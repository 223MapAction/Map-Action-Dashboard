/*! For license information please see main.751c6cfc.chunk.js.LICENSE.txt */
(this.webpackJsonpmapaction=this.webpackJsonpmapaction||[]).push([[0],{102:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(21),n=s(22),o=s(24),r=s(23),i=s(1),c=s(73),l=s(32),d=s(0),u=function(e){Object(o.a)(s,e);var t=Object(r.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"card card-stats",children:Object(d.jsxs)("div",{className:"content",children:[Object(d.jsxs)(c.a,{children:[Object(d.jsx)(l.a,{xs:3,children:Object(d.jsx)("div",{className:"icon-big text-center icon-warning",children:this.props.bigIcon})}),Object(d.jsx)(l.a,{xs:9,children:Object(d.jsxs)("div",{className:"numbers",children:[Object(d.jsx)("p",{children:this.props.statsText}),this.props.statsValue]})})]}),Object(d.jsxs)("div",{className:"footer",children:[Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{className:"stats",children:[this.props.statsIcon," ",this.props.statsIconText]})]})]})})}}]),s}(i.Component)},1045:function(e,t,s){},1049:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),o=s(26),r=s.n(o),i=s(81),c=s(1080),l=s(656),d=(s(480),s(481),s(482),s(483),s(484),s(674),s(66)),u=s(72),p=s(21),h=s(22),m=s(24),j=s(23),b=s(44),g=s(1081),f=s(1073),x=s(1074),O=s(413),v=s(0),w=function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).logOut=function(){sessionStorage.clear(),window.location.pathname="/"},a.profile=function(){"admin"==sessionStorage.getItem("user_type")?window.location.pathname="/admin/profile":window.location.pathname="/elu/profile-elu"},a.state={redirect:!1},a}return Object(h.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(f.a,{pullRight:!0,children:Object(v.jsxs)(x.a,{title:sessionStorage.first_name,eventKey:2,id:"basic-nav-dropdown-right",children:[Object(v.jsx)(O.a,{eventKey:2.1,onClick:this.profile,children:"Profil"}),Object(v.jsx)(O.a,{eventKey:2.2,onClick:this.logOut,children:"Log Out"})]})})})}}]),s}(a.Component),y=function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).mobileSidebarToggle=a.mobileSidebarToggle.bind(Object(b.a)(a)),a.state={sidebarExists:!1},a}return Object(h.a)(s,[{key:"mobileSidebarToggle",value:function(e){!1===this.state.sidebarExists&&this.setState({sidebarExists:!0}),e.preventDefault(),document.documentElement.classList.toggle("nav-open");var t=document.createElement("div");t.id="bodyClick",t.onclick=function(){this.parentElement.removeChild(this),document.documentElement.classList.toggle("nav-open")},document.body.appendChild(t)}},{key:"render",value:function(){return Object(v.jsxs)(g.a,{fluid:!0,children:[Object(v.jsx)(g.a.Header,{children:Object(v.jsx)(g.a.Toggle,{onClick:this.mobileSidebarToggle})}),Object(v.jsx)(g.a.Collapse,{children:Object(v.jsx)(w,{})})]})}}]),s}(a.Component),N=s(130),S=s(242),_=function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(){return Object(p.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(v.jsx)("footer",{className:"footer",children:Object(v.jsx)(S.a,{fluid:!0,children:Object(v.jsxs)("p",{className:"copyright pull-right",children:["\xa9 ",(new Date).getFullYear()," ",Object(v.jsx)("a",{href:"https://volkeno.sn",children:"Volkeno"}),", make IT"]})})})}}]),s}(a.Component),C=s(153),M=function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).state={width:window.innerWidth},a}return Object(h.a)(s,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth})}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"render",value:function(){var e=this,t={backgroundImage:"url("+this.props.image+")"};return Object(v.jsxs)("div",{id:"sidebar",className:"sidebar","data-color":this.props.color,"data-image":this.props.image,children:[this.props.hasImage?Object(v.jsx)("div",{className:"sidebar-background",style:t}):null,Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)("div",{className:"",children:Object(v.jsx)("img",{src:C.a,alt:"logo_image"})})}),Object(v.jsx)("div",{className:"sidebar-wrapper",children:Object(v.jsxs)("ul",{className:"nav",children:[this.state.width<=991?Object(v.jsx)(w,{}):null,this.props.routes.map((function(t,s){return t.redirect?null:Object(v.jsx)("li",{className:t.upgrade?"active active-pro":e.activeRoute(t.layout+t.path),children:Object(v.jsxs)(i.b,{to:t.layout+t.path,className:"nav-link",activeClassName:"active",children:[Object(v.jsx)("i",{className:t.icon}),Object(v.jsx)("p",{children:t.name})]})},s)}))]})})]})}}]),s}(a.Component),I=s(628),k=s(234),z=s(243);Object(z.withScriptjs)(Object(z.withGoogleMap)((function(e){return Object(v.jsx)(z.GoogleMap,{defaultZoom:13,defaultCenter:{lat:40.748817,lng:-73.985428},defaultOptions:{scrollwheel:!1,zoomControl:!0},children:Object(v.jsx)(z.Marker,{position:{lat:40.748817,lng:-73.985428}})})})));var P=s(73),E=s(32),R=s(325),D=s(75),T=(a.Component,s(635)),A=s(399),B=s(639),F=s(640),U=s(641),q=s(642),L=s(643),V=s(644),Z=s(645),H=s(646),K=[{path:"/dashboard",name:"Dashboard",icon:"pe-7s-graph",component:I.a,layout:"/admin"},{path:"/parametres",name:"Parametres",icon:"fas fa-tools",component:H.a,layout:"/admin"},{path:"/incidents",name:"Incidents",icon:"fa fa-map-marker fa-2x",component:T.a,layout:"/admin"},{path:"/rapports",name:"Rapports",icon:"fa fa-tasks fa-2x",component:B.a,layout:"/admin"},{path:"/indicateurs",name:"Indicateurs",icon:"fa fa-arrow-left fa-2x",component:F.a,layout:"/admin"},{path:"/categories",name:"Categories",icon:"fa fa-tag fa-2x",component:L.a,layout:"/admin"},{path:"/zones",name:"Zones",icon:"pe-7s-map-marker",component:V.a,layout:"/admin"},{path:"/users",name:"Utilisateurs",icon:"fa fa-users fa-2x",component:U.a,layout:"/admin"},{path:"/elus",name:"Organisation",icon:"fa fa-user-secret fa-2x",component:A.a,layout:"/admin"},{path:"/citoyens",name:"Citoyens",icon:"fa fa-user-plus fa-2x",component:q.a,layout:"/admin"},{path:"/contact",name:"Message",icon:"fa fa-comments fa-2x",component:Z.a,layout:"/admin"},{path:"/profile",name:"Profile",icon:"fa fa-user-circle fa-2x",component:k.a,layout:"/admin"}],J=s(647),W=s(648),Y=s(204),Q=s(649),X=[{path:"/dashboard",name:"Dashboard",icon:"pe-7s-graph",component:s(650).a,layout:"/elu"},{path:"/IncidentByZone",name:"Incidents",icon:"fa fa-map-marker fa-2x",component:J.a,layout:"/elu"},{path:"/rapports",name:"Rapports",icon:"fa fa-tasks fa-2x",component:W.a,layout:"/elu"},{path:"/add-rapport",name:"Nouveau Rapport",icon:"fa fa-file fa-2x",component:Y.a,layout:"/elu"},{path:"/message",name:"Message",icon:"fa fa-comments fa-2x",component:Q.a,layout:"/elu"},{path:"/profile-elu",name:"Profile Elu",icon:"fa fa-user-circle fa-2x",component:k.a,layout:"/elu"}],G=s.p+"static/media/sidebar-3.fbded615.jpg",$=(a.Component,function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).getRoutes=function(e){return e.map((function(e,t){return"/admin"===e.layout||"/elu"===e.layout?Object(v.jsx)(u.b,{path:e.layout+e.path,render:function(t){return Object(v.jsx)(e.component,Object(d.a)({},t))}},t):null}))},a.getBrandText=function(e){for(var t=0;t<K.length;t++)if(-1!==a.props.location.pathname.indexOf(K[t].layout+K[t].path))return K[t].name;return"Brand"},a.handleImageClick=function(e){a.setState({image:e})},a.handleColorClick=function(e){a.setState({color:e})},a.handleHasImage=function(e){a.setState({hasImage:e})},a.handleFixedClick=function(){"dropdown"===a.state.fixedClasses?a.setState({fixedClasses:"dropdown show-dropdown open"}):a.setState({fixedClasses:"dropdown"})},a.state={token:sessionStorage.getItem("token"),isAdmin:!1,userType:sessionStorage.getItem("user_type"),Config:{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}},userID:sessionStorage.getItem("user_id"),_notificationSystem:null,image:G,color:"#38A0DB",hasImage:!0,fixedClasses:"dropdown show-dropdown open"},a}return Object(h.a)(s,[{key:"componentDidMount",value:function(){switch(Math.floor(4*Math.random()+1)){case 1:"success";break;case 2:"warning";break;case 3:"error";break;case 4:"info"}}},{key:"componentDidUpdate",value:function(e){window.innerWidth<993&&e.history.location.pathname!==e.location.pathname&&-1!==document.documentElement.className.indexOf("nav-open")&&document.documentElement.classList.toggle("nav-open"),"PUSH"===e.history.action&&(document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainPanel.scrollTop=0)}},{key:"render",value:function(){var e="",t=[],s=sessionStorage.getItem("token")||"";void 0===s&&0===s.trim().length||0!==(e=sessionStorage.getItem("user_type")||"").trim().length&&("admin"===e?t=K:"elu"===e&&(t=X));var a=[];t.forEach((function(e){a.includes(e.layout+e.path)||a.push(e.layout+e.path)}));var n=Object(v.jsx)("div",{className:"content",style:{backgroundColor:"#fff"},children:Object(v.jsx)(S.a,{children:Object(v.jsx)(P.a,{children:Object(v.jsx)("h2",{children:"Page introuvable"})})})});return console.log(!this.state.userType),null===this.state.token||!0===this.state.isSessionExpiration?Object(v.jsx)(u.a,{to:{pathname:"/"}}):Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(M,Object(d.a)(Object(d.a)({},this.props),{},{routes:t,image:this.state.image,color:this.state.color,hasImage:this.state.hasImage})),Object(v.jsxs)("div",{id:"main-panel",className:"main-panel",ref:"mainPanel",children:[Object(v.jsx)(y,Object(d.a)({},this.props)),Object(v.jsxs)(u.d,{children:[" ",Object(v.jsx)(u.b,{path:"/elu/add-rapport",render:function(e){return Object(v.jsx)(Y.a,Object(d.a)({},e))}}),this.getRoutes(t)]}),a.includes(this.props.location.pathname)?"":n,Object(v.jsx)(_,{})]})]})}}]),s}(a.Component)),ee=s.p+"static/media/sidebar-2.b3b20288.jpg",te=function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).getRoutes=function(e){return e.map((function(e,t){return"/elu"===e.layout?Object(v.jsx)(u.b,{path:e.layout+e.path,render:function(t){return Object(v.jsx)(e.component,Object(d.a)({},t))}},t):null}))},a.getBrandText=function(e){for(var t=0;t<X.length;t++)if(-1!==a.props.location.pathname.indexOf(X[t].layout+X[t].path))return X[t].name;return"Brand"},a.handleImageClick=function(e){a.setState({image:e})},a.handleColorClick=function(e){a.setState({color:e})},a.handleHasImage=function(e){a.setState({hasImage:e})},a.handleFixedClick=function(){"dropdown"===a.state.fixedClasses?a.setState({fixedClasses:"dropdown show-dropdown open"}):a.setState({fixedClasses:"dropdown"})},a.state={token:sessionStorage.getItem("token"),Config:{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}},userID:window.sessionStorage.getItem("user_id"),userType:window.sessionStorage.getItem("user_type"),_notificationSystem:null,image:ee,color:"black",hasImage:!0,fixedClasses:"dropdown show-dropdown open"},a}return Object(h.a)(s,[{key:"componentDidMount",value:function(){if("elu"!=this.state.userType)return Object(v.jsx)(N.a,{});switch(Math.floor(4*Math.random()+1)){case 1:"success";break;case 2:"warning";break;case 3:"error";break;case 4:"info"}}},{key:"componentDidUpdate",value:function(e){window.innerWidth<993&&e.history.location.pathname!==e.location.pathname&&-1!==document.documentElement.className.indexOf("nav-open")&&document.documentElement.classList.toggle("nav-open"),"PUSH"===e.history.action&&(document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,this.refs.mainPanel.scrollTop=0)}},{key:"render",value:function(){return null===this.state.token||!0===this.state.isSessionExpiration?Object(v.jsx)(N.a,{}):Object(v.jsxs)("div",{className:"wrapper",children:[Object(v.jsx)(M,Object(d.a)(Object(d.a)({},this.props),{},{routes:X,image:this.state.image,color:this.state.color,hasImage:this.state.hasImage})),Object(v.jsxs)("div",{id:"main-panel",className:"main-panel",ref:"mainPanel",children:[Object(v.jsx)(y,Object(d.a)(Object(d.a)({},this.props),{},{brandText:this.getBrandText(this.props.location.pathname)})),Object(v.jsx)(u.d,{children:this.getRoutes(X)}),Object(v.jsx)(_,{})]})]})}}]),s}(a.Component),se=s(17),ae=(s(1045),s(12)),ne=s.n(ae),oe=function(e){Object(m.a)(s,e);var t=Object(j.a)(s);function s(e){var a;return Object(p.a)(this,s),(a=t.call(this,e)).renderRedirect=function(){if(a.state.redirect)return Object(v.jsx)(u.a,{to:"/"})},a.onChange=function(e){var t=e.target,s=t.name,n=t.value;a.setState(Object(se.a)({},s,n))},a.onShowAlert=function(){a.setState({visible:!0})},a.handleSubmit=function(e){e.preventDefault(),a.setState({inPogress:!a.state.inPogress,succes:!1,erreur:[],message_success:"",successfully:!1});var t={first_name:a.state.first_name,last_name:a.state.last_name,password:a.state.password,email:a.state.email,user_type:a.state.user_type};console.log(t),ne.a.post("http://mapaction.withvolkeno.com//api/user",t,{headers:{"Content-Type":"application/json","access-control-allow-origin":"*"}}).then((function(e){console.log(e);a.state.message_success;a.setState({inPogress:!a.state.inPogress,first_name:"",last_name:"",password:"",email:"",user_type:"",redirect:!0,successfully:!0,message_success:"Inscription avec succ\xe9s.Veuillez contacter votre l'administrateur pour l'activation du votre compte."}),console.log(e.data)})).catch((function(e){a.setState({inPogress:!a.state.inPogress,redirect:!1,succes:!0}),console.log(e.response);var t=a.state.erreur;e.response?(console.log(e.response.status),console.log(e.response.data),400===e.response.status?(t.push("Veuillez remplir tous les champs"),a.setState({erreur:t})):500===e.response.status&&""!==e.response.data.message?(t.push("Ce email existe deja veuillez en choisir un autre "),a.setState({erreur:t})):(t.push("Probl\xe8me d'envoie des donn\xe9es. Veuillez r\xe9essayer plus tard"),a.setState({erreur:t}))):e.request?(t.push("Probl\xe8me d'envoie des donn\xe9es. Veuillez r\xe9essayer plus tard"),a.setState({erreur:t})):console.log(e.message),a.onShowAlert()}))},a.state={first_name:"",last_name:"",email:"",password:"",user_type:"",erreur:[],visible:!1,inPogress:!1,redirect:!1,succes:!1,successfully:!1,message_success:""},a}return Object(h.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"auth-wrapper",children:Object(v.jsx)("div",{className:"auth-inner",children:Object(v.jsxs)("form",{children:[Object(v.jsx)("h3",{children:"Inscription"}),this.state.succes&&Object(v.jsx)("div",{className:"alert alert-danger",children:this.state.erreur}),this.state.successfully&&Object(v.jsx)("div",{className:"alert alert-success",children:this.state.message_success}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Pr\xe9nom"}),Object(v.jsx)("input",{type:"text",className:"form-control",name:"first_name",placeholder:"First name",onChange:this.onChange})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Nom"}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name",name:"last_name",onChange:this.onChange})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Type Utilisateur:"}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Type de l'utilisateur",name:"user_type",onChange:this.onChange})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Email address"}),Object(v.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter email",onChange:this.onChange})]}),Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{children:"Mot de passe"}),Object(v.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Enter password",onChange:this.onChange})]}),this.state.inPogress?Object(v.jsxs)("button",{className:"btn btn-primary btn-block",children:["Loading...",Object(v.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(v.jsx)("button",{className:"btn btn-primary btn-block",onClick:this.handleSubmit,children:"S'inscrire"}),Object(v.jsxs)("p",{className:"forgot-password text-right",children:["D\xe9j\xe0 membre ",Object(v.jsx)("a",{href:"/",children:"Se connecter ?"})]})]})})})}}]),s}(a.Component),re=s(651),ie=s(652),ce=s(653),le=s(400),de=s(141),ue=s.n(de),pe=s(655),he=s(657);var me=function(e){return function(t){var s=Object(a.useState)(!1),o=Object(he.a)(s,2),r=o[0],i=o[1];Object(a.useEffect)((function(){fetch("/meta.json").then((function(e){return e.json()})).then((function(e){(function(e,t){var s=ue()(e),a=ue()(t);return!!s.isAfter(a)})(e.buildDate,le.buildDate)?(i(!1),c()):i(!0)}))}),[]);var c=function(){caches&&caches.keys().then((function(e){var t,s=Object(pe.a)(e);try{for(s.s();!(t=s.n()).done;){var a=t.value;caches.delete(a)}}catch(n){s.e(n)}finally{s.f()}})),window.location.reload(!0)};return Object(v.jsx)(n.a.Fragment,{children:r?Object(v.jsx)(e,Object(d.a)({},t)):null})}}((function(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(u.b,{exact:!0,path:"/",component:N.a}),Object(v.jsx)(u.b,{path:"/inscription",component:oe}),Object(v.jsx)(u.b,{exact:!0,path:"/incident/:id",component:ce.a}),Object(v.jsx)(u.b,{path:"/request-password",component:re.a}),Object(v.jsx)(u.b,{path:"/request-password-view",component:ie.a}),Object(v.jsx)(u.d,{children:Object(v.jsx)(u.b,{path:"/admin",render:function(e){return Object(v.jsx)($,Object(d.a)({},e))}})}),Object(v.jsx)(u.d,{children:Object(v.jsx)(u.b,{path:"/elu",render:function(e){return Object(v.jsx)(te,Object(d.a)({},e))}})}),Object(v.jsx)(u.d,{children:Object(v.jsx)(u.b,{path:"/add-rapport",component:Y.a,render:function(e){return Object(v.jsx)(te,Object(d.a)({},e))}})})]})}));var je=function(){return Object(v.jsx)(me,{})};c.a({dsn:"http://06d9dd5746c540dab4c2a6705fa08a82@159.89.32.58:9000/13",autoSessionTracking:!0,integrations:[new l.a.BrowserTracing],tracesSampleRate:.5}),r.a.render(Object(v.jsx)(i.a,{children:Object(v.jsx)(je,{})}),document.getElementById("root"))},130:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return _}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(44),d=s(24),u=s(23),p=s(1),h=s(40),m=s(37),j=s(52),b=s(36),g=s(39),f=s(9),x=s(12),O=s.n(x),v=(s(136),s(140)),w=s(153),y=s(8),N=s.n(y),S=s(0),_=("url(".concat(v.a,")"),function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=s.call(this,t)).handleShowPwdModal=function(){a.setState((function(e){return{showPwdModal:!e.showPwdModal}}))},a.handleModalOpen=function(e){e.preventDefault(),a.setState({changepwd:!0})},a.handleShowPwdModal=function(e){e.preventDefault(),a.setState({changepwd:!1})},a.handleChangePassword=function(t){if(t.preventDefault(),a.setState({inProgress:!a.state.inProgress}),a.state.confirm_pwd!==a.state.new_password)N()("erreur","les 2 mots de pass doivent etre identiques","error");else{var s={old_password:a.state.old_password,new_password:a.state.new_password},n=e.config.url+"api/changepassword/";console.log(s),console.log(sessionStorage.token),O.a.put(n,s,{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),N()("Succes"," Mot de passe modifi\xe9 avec succ\xe8s","success"),a.setState({inProgress:!1,changepwd:!1}),a.setState({old_password:"",new_password:"",confirm_pwd:""}),a.props.history.push("/elu/dashboard")})).catch((function(e){a.setState({inProgress:!1}),a.setState({changepwd:!1}),a.setState({old_password:"",new_password:""}),e.response?(console.log(e.response.status),e.response.data.old_password?N()("Erreur",e.response.data.old_password[0],"error"):N()("Erreur","Veuillez reessayer","error")):e.request?(console.log(e.request.data),N()("erreur","Veuillez reessayer","error")):(N()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}},a.state={email:"",password:"",emailpwd:"",isValidForm:"",email_empty:!1,password_empty:!1,isPending:!1,isRequestError:!1,errors:{},inProgress:!1,showPwdModal:!1,changepwd:!1,file:null,url_reset:e.config.url+"api/request-password-reset/",show_reset:"/request-password"},a.onChange=a.onChange.bind(Object(l.a)(a)),a.onSubmit=a.onSubmit.bind(Object(l.a)(a)),a.onSend=a.onSend.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=Object(r.a)(o.a.mark((function t(){var s,a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/imagebackground/",a=this.state.file,t.prev=2,t.next=5,O.a.get(s,{headers:{"Content-Type":"application/json"}});case 5:n=t.sent,console.log("response=>",n.data),r=n.data,0!==Object.keys(r).length&&(a=r.photo,this.setState({file:a})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log("erreur=>",t.t0.response);case 14:case"end":return t.stop()}}),t,this,[[2,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"validateLoginForm",value:function(){var e=this.state.email,t=this.state.password,s=!0,a={};return e||(this.setState({isPending:!1}),s=!1,this.state.email_empty=!0,this.handleShowAndHideAlert("email"),a.email="Le champ email est obligatoire"),t||(this.setState({isPending:!1}),s=!1,this.state.password_empty=!0,this.handleShowAndHideAlert("password"),a.password="Le champ mot de passe est obligatoire"),this.setState({errors:a}),s}},{key:"handleShowAndHideAlert",value:function(e){var t=this;setTimeout((function(){"credential_error"==e&&t.setState({isValidUser:!0}),"email"==e&&t.setState({email_empty:!1}),"password"==e&&t.setState({password_empty:!1}),"requestError"==e&&t.setState({isRequestError:!1})}),5e3)}},{key:"onSubmit",value:function(t){var s=this;t.preventDefault(),this.validateLoginForm()&&this.setState({isPending:!1,inProgress:!0});var a={email:this.state.email,password:this.state.password};O.a.post(e.config.url+"api/auth/login/",a).then((function(t){s.setState({isPending:!0,inProgress:!1}),console.log(t),sessionStorage.setItem("token",t.data.token),O.a.get(e.config.url+"api/me/",{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e.data.data),sessionStorage.setItem("user",JSON.stringify(e.data.data)),sessionStorage.setItem("user_id",e.data.data.id),sessionStorage.setItem("first_name",e.data.data.first_name),sessionStorage.setItem("zone",e.data.data.adress),sessionStorage.setItem("user_type",e.data.data.user_type),"admin"===e.data.data.user_type?window.location="/admin/dashboard":"elu"===e.data.data.user_type?(console.log(e.data.data.password_reset_count),"0"===e.data.data.password_reset_count?s.setState({changepwd:!0}):window.location="/elu/dashboard"):N()("Attention","Vous ne pouvez pas acceder au dashboard, Veuillez contacter l'administrateur","warning")}))})).catch((function(e){s.setState({isPending:!0,inProgress:!1}),N()("Erreur","Login ou mot de passe incorrect! Veuillez reessayer","error"),console.log(e)}))}},{key:"onSend",value:function(t){var s=this;t.preventDefault(),this.setState({inProgress:!0});var a=this.state.emailpwd;a&&O.a.post(e.config.url+"api/password_reset/",a,{headers:{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}}}).then((function(e){s.setState({inProgress:!1}),console.log(e)})).catch((function(e){s.setState({isPending:!0,inProgress:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.file,s="https://backend-dashboard.map-action.com/".concat(t),a=Object(S.jsxs)(h.a,{show:this.state.changepwd,onHide:this.handleShowPwdModal,children:[Object(S.jsx)(m.a,{closeButton:!0,children:"Veuillez changer votre mot de passe avant de continuer"}),Object(S.jsxs)(j.a,{encType:"multipart/form-data",children:[Object(S.jsxs)(b.a,{className:"col-sm-12",children:[Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"form-group col-md-8",children:[Object(S.jsx)("label",{children:"Mot de passe"}),Object(S.jsx)("input",{type:"password",name:"old_password",className:"form-control",placeholder:"Password",value:this.state.old_password,onChange:function(t){e.setState({old_password:t.target.value})}})]})}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"form-group col-md-8",children:[Object(S.jsx)("label",{children:"Nouveau Mot de passe"}),Object(S.jsx)("input",{type:"password",name:"new_password",className:"form-control",placeholder:"New password",value:this.state.new_password,onChange:function(t){e.setState({new_password:t.target.value})}})]})}),Object(S.jsx)("div",{className:"row",children:Object(S.jsxs)("div",{className:"form-group col-md-8",children:[Object(S.jsx)("label",{children:"Confirmation Mot de passe"}),Object(S.jsx)("input",{type:"password",name:"confirm_password",className:"form-control",placeholder:"Confirm password",value:this.state.confirm_pwd,onChange:function(t){e.setState({confirm_pwd:t.target.value})}})]})})]}),Object(S.jsxs)(g.a,{children:[this.state.inProgress?Object(S.jsxs)(f.a,{className:"btn btn-primary",children:["Loading...",Object(S.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(S.jsx)(f.a,{className:"btn btn-primary",onClick:this.handleChangePassword,children:"Modifier"})," ",Object(S.jsx)(f.a,{className:"btn btn-danger",onClick:this.handleShowPwdModal,children:"Annuler"})]})]})]});return Object(S.jsxs)("div",{className:"auth-wrapper",style:{backgroundImage:"url(".concat(t?s:v.a,")"),backgroundSize:"cover"},children:[a,Object(S.jsx)("div",{className:"modal fade",children:Object(S.jsxs)(h.a,{show:this.state.showPwdModal,onHide:this.handleShowPwdModal,children:[Object(S.jsx)(m.a,{closeButton:!0,className:"map-color t-center",children:Object(S.jsx)("div",{className:"row",children:Object(S.jsx)("div",{className:"col-md-7",children:"Mot de Passe oublie"})})}),Object(S.jsx)(b.a,{className:"col-sm-12",children:Object(S.jsxs)("form",{noValidate:!0,onSubmit:function(t){return e.onSend(t)},className:"map-color",children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"email",children:" Adresse Email"}),Object(S.jsx)("input",{type:"email",className:"form-control",name:"emailpwd",placeholder:"Entrez votre email",value:this.state.emailpwd,onChange:this.onChange})]}),this.state.inProgress?Object(S.jsxs)(f.a,{className:"btn",children:["Loading...",Object(S.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(S.jsx)("button",{className:"btn button--round-l button--text-thick ",children:"Envoyer"})]})}),Object(S.jsx)(g.a,{})]})}),Object(S.jsx)("div",{className:"auth-inner",children:Object(S.jsxs)("form",{noValidate:!0,onSubmit:function(t){return e.onSubmit(t)},className:"map-color",children:[Object(S.jsx)("h3",{children:Object(S.jsx)("img",{className:"logo-front",src:w.a})}),this.state.succes?this.state.message.map((function(e,t){return Object(S.jsx)("div",{className:"alert alert-danger",children:e},t)})):null,Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"email",children:" Adresse Email"}),Object(S.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Entrez votre email",value:this.state.email,onChange:this.onChange})]}),this.state.email_empty&&Object(S.jsx)("div",{className:"errorMsg",children:this.state.errors.email}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"passsword",children:" Mot de Passe"}),Object(S.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"Entrez votre mot de passe",value:this.state.password,onChange:this.onChange})]}),Object(S.jsx)("div",{className:"form-group",children:Object(S.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(S.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),"\xa0",Object(S.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),this.state.email_empty&&Object(S.jsx)("div",{className:"errorMsg",children:this.state.errors.password}),Object(S.jsx)("div",{className:"form-group",children:this.state.inProgress?Object(S.jsxs)(f.a,{className:"button  button--round-l button--text-thick button--text-upper",children:["Loading...",Object(S.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(S.jsx)("button",{className:"button  button--round-l button--text-thick button--text-upper",children:"Connecter"})}),Object(S.jsx)("a",{href:this.state.show_reset,children:"Mot de passe oubli\xe9"})]})})]})}}]),n}(p.Component))}).call(this,s(45))},136:function(e,t,s){},140:function(e,t,s){"use strict";t.a=s.p+"static/media/map-bg-1.bda2b559.jpg"},153:function(e,t,s){"use strict";t.a=s.p+"static/media/logo.ff03b7a9.png"},204:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return N}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(44),d=s(24),u=s(23),p=s(1),h=s(73),m=s(32),j=s(52),b=s(13),g=s(9),f=s(12),x=s.n(f),O=s(48),v=s(8),w=s.n(v),y=s(0),N=function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=s.call(this,t)).componentDidMount=function(){a._getIncidents()},a._getIncidents=Object(r.a)(o.a.mark((function t(){var s,n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,n=e.config.url+"api/incidentbyzone/"+s+"/",t.prev=2,t.next=5,x.a.get(n,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:r=t.sent,console.log(r.data),i=r.data,console.log(i),a.setState({incidents:i}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),a.handleMultiChange=function(e){var t=[];e&&e.map((function(e,s){t.push(e.value)})),a.state.newReport.incident_id=t,console.log(a.state.newReport.incident_id)},a.handleModalClose=function(){a.setState({visualisation:!a.state.visualisation})},a.addReport=function(t){t.preventDefault(),a.setState({inProgress:!a.state.inProgress});var s="";if("zone"===a.state.newReport.type){s={details:a.state.newReport.details,zone:sessionStorage.zone,user_id:sessionStorage.user_id,incidents:a.state.newReport.incident_id,date_livraison:a.state.newReport.date_livraison,type:a.state.newReport.type,disponible:!1};var n=e.config.url+"api/rapportonzone/";x.a.post(n,s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),a.setState({inProgress:!a.state.inProgress,showRapportModal:!1,showIncidentModal:!1,newReport:{details:"",type:"",zone:"",incident_id:[],date_livraison:""}}),document.getElementById("formR").reset(),a._getIncidents(),w()("Succ\xe8s","Votre rapport a \xe9t\xe9 command\xe9.","success")})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(console.log(e.response.status),w()("Erreur","Erreur lors de l'ajout, veuillez r\xe9essayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))}else{s={details:a.state.newReport.details,zone:sessionStorage.zone,user_id:sessionStorage.user_id,incident:a.state.newReport.incident_id[0],date_livraison:a.state.newReport.date_livraison,type:a.state.newReport.type,disponible:!1};n=e.config.url+"api/rapport/";x.a.post(n,s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),a.setState({inProgress:!a.state.inProgress,showRapportModal:!1,showIncidentModal:!1,newReport:{details:"",type:"",zone:"",incident_id:[],date_livraison:""}}),document.getElementById("formR").reset(),w()("Succ\xe8s","Votre rapport a \xe9t\xe9 command\xe9.","success")})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(console.log(e.response.status),w()("Erreur","Erreur lors de l'ajout, veuillez reessayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))}},a.state={newReport:{details:"",type:"",zone:"",incident_id:[],date_livraison:""},report:"",incidents:[],incidents_rapport:[],visualisation:!1},a.handleChange=a.handleChange.bind(Object(l.a)(a)),a.onValueChange=a.onValueChange.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"handleChange",value:function(e){console.log(e.target.value),this.state.newReport.type=e.target.value}},{key:"onValueChange",value:function(e){this.setState({selectedOption:e.target.value}),console.log(this.state.selectedOption)}},{key:"render",value:function(){var e,t=this,s=(this.state.incidents.map((function(e,t){return Object(y.jsx)("option",{value:e.id,children:e.title},t)})),this.state.incidents.map((function(e){return{value:e.id,label:e.title+"-"+e.description,key:e.id+"unique-key"}})));return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("h3",{className:"map-color",children:"Commande de rapports d\u2019inspection "}),Object(y.jsx)(h.a,{children:Object(y.jsx)(m.a,{lg:6,sm:6,children:Object(y.jsxs)(j.a,{className:"text-white",id:"formR",children:[Object(y.jsxs)(b.a,{className:"col-sm-12",children:[Object(y.jsx)("p",{className:"title mt-3",children:"Type de Rapports:"}),Object(y.jsxs)("div",{onChange:this.handleChange,children:[Object(y.jsx)("input",{type:"radio",value:"zone",name:"type"})," Zone ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",value:"detaille",name:"type"})," Detaille"]})]}),Object(y.jsxs)(b.a,{className:"col-sm-12",children:[Object(y.jsx)("label",{htmlFor:"from",children:"Details:"}),Object(y.jsx)("textarea",{className:"form-control",type:"text",id:"prenom",name:"details",value:this.state.newReport.details,onChange:function(e){var s=t.state.newReport;s.details=e.target.value,t.setState({newReport:s},console.log(t.state))}})]}),Object(y.jsxs)(b.a,{className:"col-sm-3",children:[Object(y.jsx)("label",{htmlFor:"from",children:"Zone:"}),Object(y.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"zone",value:sessionStorage.zone,onChange:function(e){var s=t.state.newReport;s.zone=e.target.value,t.setState({newReport:s},console.log(t.state))},disabled:!0})]}),Object(y.jsxs)(b.a,{className:"col-sm-4",children:[Object(y.jsx)("label",{htmlFor:"",children:"Type:"}),Object(y.jsx)(O.a,(e={className:"mt-4 col-md-6 col-offset-4",isMulti:!0,name:"incidents_rapport",options:s},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"onChange",this.handleMultiChange),Object(a.a)(e,"classNamePrefix","select"),e))]}),Object(y.jsxs)(b.a,{className:"col-sm-5",children:[Object(y.jsx)("label",{htmlFor:"phone",children:"Date livraison:"}),Object(y.jsx)("input",{className:"form-control",type:"date",id:"phone",name:"date_livraison",value:this.state.newReport.date_livraison,onChange:function(e){var s=t.state.newReport;s.date_livraison=e.target.value,t.setState({newReport:s},console.log(t.state))}})]}),Object(y.jsx)("p",{}),Object(y.jsxs)(b.a,{className:"col-sm-6",children:[this.state.inProgress?Object(y.jsxs)(g.a,{className:"btn  btn-white btn-round",children:["Loading...",Object(y.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(y.jsx)(g.a,{className:"btn btn-white btn-round",onClick:this.addReport,children:"Ajouter"})," "]}),Object(y.jsx)(b.a,{className:"col-sm-6",children:Object(y.jsx)(g.a,{className:"btn btn-red btn-round",onClick:this.handleModalOpen,children:"Annuler"})})]})})})]})}}]),n}(p.Component)}).call(this,s(45))},234:function(e,t,s){"use strict";(function(e){var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(44),d=s(24),u=s(23),p=s(1),h=s(40),m=s(37),j=s(52),b=s(36),g=s(39),f=s(242),x=s(73),O=s(32),v=s(13),w=s(8),y=s.n(w),N=(s(43),s(12)),S=s.n(N),_=s(64),C=s(75),M=s(48),I=s(632),k=s(633),z=s(0),P=function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=s.call(this,t)).componentDidMount=function(){a.getUser(),a._getZones()},a.getUser=Object(r.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/me/",n={headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}},t.next=4,S.a.get(s,n).then((function(e){console.log("user",e),a.setState({user:e.data.data})})).catch((function(e){console.log("e",e)}));case 4:case"end":return t.stop()}}),t)}))),a.onUpdateUser=function(t){t.preventDefault(),a.setState({inProgress:!a.state.inProgress}),console.log(a.state.user);var s={first_name:a.state.user.first_name,last_name:a.state.user.last_name,email:a.state.user.email,phone:a.state.user.phone,adress:a.state.user.adress,user_type:a.state.user.user_type,zones:a.state.user.zones},n=e.config.url+"api/user/"+a.state.user.id+"/";console.log(s),S.a.put(n,s).then((function(e){console.log(e.data),console.log(a.state.user),a.setState({inProgress:!a.state.inProgress}),sessionStorage.setItem("user",JSON.stringify(e.data)),y()("Succ\xe8s","Utilisateur mis \xe0 jour avec succ\xe8s. Vos modifications seront prises en compte lors de la prochaine connexion","success")})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(y()("Erreur Ajout","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response)):e.request?(console.log(e.request.data),y()("erreur","Veuillez reessayer","error")):(y()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},a.handleModalOpen=function(e){e.preventDefault(),a.setState({changepwd:!0})},a.handleShowPwdModal=function(e){e.preventDefault(),a.setState({changepwd:!1})},a.handleChangePassword=function(t){if(t.preventDefault(),a.setState({inProgress:!a.state.inProgress}),a.state.confirm_pwd!==a.state.new_password)y()("erreur","les 2 mots de pass doivent etre identiques","error");else{var s={old_password:a.state.old_password,new_password:a.state.new_password},n=e.config.url+"api/changepassword/";console.log(s),console.log(sessionStorage.token),S.a.put(n,s,{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),y()("Succes"," Mot de passe modifi\xe9 avec succ\xe8s","success"),a.setState({inProgress:!1,changepwd:!1}),a.setState({old_password:"",new_password:"",confirm_pwd:""})})).catch((function(e){a.setState({inProgress:!1}),a.setState({changepwd:!1}),a.setState({old_password:"",new_password:""}),e.response?(console.log(e.response.status),e.response.data.old_password?y()("Erreur",e.response.data.old_password[0],"error"):y()("Erreur","Veuillez reessayer","error")):e.request?(console.log(e.request.data),y()("erreur","Veuillez reessayer","error")):(y()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}},a._getZones=Object(r.a)(o.a.mark((function t(){var s,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,S.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:n=t.sent,console.log("zones=>",n.data),r=n.data.results,console.log(r),a.setState({zones:r}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),a.onSelectChange=function(e,t){var s=a.state.user;"select-option"===t.action&&(-1===s.zones.findIndex((function(e){return e===t.option.id}))&&s.zones.push(String(t.option.id)));if("remove-value"===t.action){var n=s.zones.findIndex((function(e){return parseInt(e)===t.removedValue.id}));-1!==n&&s.zones.splice(n)}"clear"===t.action&&(s.zones=[]),a.setState({user:s})},a.state={user:{},inProgress:!1,changepwd:!1,old_password:"",new_password:"",confirm_pwd:"",zones:[]},a.handleModalOpen=a.handleModalOpen.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this,s=this.state.zones.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key",id:e.id}})),n=[];if(this.state.user&&void 0!==this.state.user.zones&&this.state.user.zones.length&&s.length)for(var o=0;o<s.length;o++)for(var r=s[o],i=0;i<this.state.user.zones.length;i++){var c=this.state.user.zones[i];parseInt(c)===parseInt(r.value)&&n.push(r)}var l=Object(z.jsxs)(h.a,{show:this.state.changepwd,onHide:this.handleShowPwdModal,children:[Object(z.jsx)(m.a,{closeButton:!0,children:"Modifer Mot de passe"}),Object(z.jsxs)(j.a,{encType:"multipart/form-data",children:[Object(z.jsxs)(b.a,{className:"col-sm-12",children:[Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"form-group col-md-8",children:[Object(z.jsx)("label",{children:"Mot de passe"}),Object(z.jsx)("input",{type:"password",name:"old_password",className:"form-control",placeholder:"Password",value:this.state.old_password,onChange:function(e){t.setState({old_password:e.target.value})}})]})}),Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"form-group col-md-8",children:[Object(z.jsx)("label",{children:"Nouveau Mot de passe"}),Object(z.jsx)("input",{type:"password",name:"new_password",className:"form-control",placeholder:"New password",value:this.state.new_password,onChange:function(e){t.setState({new_password:e.target.value})}})]})}),Object(z.jsx)("div",{className:"row",children:Object(z.jsxs)("div",{className:"form-group col-md-8",children:[Object(z.jsx)("label",{children:"Confirmation Mot de passe"}),Object(z.jsx)("input",{type:"password",name:"confirm_password",className:"form-control",placeholder:"Confirm password",value:this.state.confirm_pwd,onChange:function(e){t.setState({confirm_pwd:e.target.value})}})]})})]}),Object(z.jsxs)(g.a,{children:[this.state.inProgress?Object(z.jsxs)(C.a,{className:"btn btn-primary",children:["Loading...",Object(z.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(z.jsx)(C.a,{className:"btn btn-primary",onClick:this.handleChangePassword,children:"Modifier"})," ",Object(z.jsx)(C.a,{className:"btn btn-danger",onClick:this.handleShowPwdModal,children:"Annuler"})]})]})]});return Object(z.jsxs)("div",{className:"content",children:[l,Object(z.jsx)(f.a,{fluid:!0,children:Object(z.jsxs)(x.a,{children:[Object(z.jsxs)(O.a,{md:8,children:[Object(z.jsx)(_.a,{title:"Modifier Profil",content:Object(z.jsxs)(j.a,{children:[Object(z.jsxs)(v.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"prenom",children:"Prenom:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"prenom",value:this.state.user.first_name,onChange:function(e){var s=t.state.user;s.first_name=e.target.value,t.setState({user:s})}})]}),Object(z.jsxs)(v.a,{className:"col-sm-3",children:[Object(z.jsx)("label",{htmlFor:"long",children:"Nom:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"long",name:"last_name",value:this.state.user.last_name,onChange:function(e){var s=t.state.user;s.last_name=e.target.value,t.setState({user:s})}})]}),Object(z.jsxs)(v.a,{className:"col-sm-3",children:[Object(z.jsx)("label",{children:"Adresse Email:"}),Object(z.jsx)("input",{className:"form-control",type:"text",name:"email",value:this.state.user.email,onChange:function(e){var s=t.state.user;s.email=e.target.value,t.setState({user:s})}})]}),Object(z.jsxs)(v.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"long",children:"Adresse:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"long",name:"email",value:this.state.user.adress,onChange:function(e){var s=t.state.user;s.adress=e.target.value,t.setState({user:s})}})]}),Object(z.jsxs)(v.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"long",children:"Telephone:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"long",name:"email",value:this.state.user.phone,onChange:function(e){var s=t.state.user;s.phone=e.target.value,t.setState({user:s})}})]}),Object(z.jsxs)(v.a,{className:"col-sm-12",children:[Object(z.jsx)("label",{htmlFor:"zone",children:"Zone(s):"}),Object(z.jsx)(M.a,(e={className:"mt-4 col-md-6 col-offset-4",name:"zones",options:s,value:n},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"isMulti",!0),Object(a.a)(e,"onChange",(function(e,s){return t.onSelectChange(e,s)})),Object(a.a)(e,"classNamePrefix","select"),e))]}),this.state.inProgress?Object(z.jsxs)(C.a,{bsStyle:"info",pullRight:!0,fill:!0,children:["Loading...",Object(z.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(z.jsx)(C.a,{bsStyle:"info",pullRight:!0,fill:!0,onClick:this.onUpdateUser,type:"submit",children:"Mettre \xe0 jour"}),Object(z.jsx)("div",{className:"clearfix"})]})}),Object(z.jsx)(C.a,{className:"btn-modal-change-password btn-fill btn btn-warning",bsStyle:"warning",onClick:this.handleModalOpen,pullLeft:!0,fill:!0,children:"Modifier votre mot de passe"})]}),Object(z.jsx)(O.a,{md:4,children:Object(z.jsx)(k.a,{bgImage:"https://ununsplash.imgix.net/photo-1431578500526-4d9613015464?fit=crop&fm=jpg&h=300&q=75&w=400",avatar:I.a,name:this.state.user.first_name,userName:this.state.user.email,description:Object(z.jsxs)("span",{children:[this.state.user.user_type,Object(z.jsx)("br",{}),this.state.user.adress,Object(z.jsx)("br",{}),this.state.user.phone]}),socials:Object(z.jsxs)("div",{children:[Object(z.jsx)(C.a,{simple:!0,children:Object(z.jsx)("i",{className:"fa fa-facebook-square"})}),Object(z.jsx)(C.a,{simple:!0,children:Object(z.jsx)("i",{className:"fa fa-twitter"})}),Object(z.jsx)(C.a,{simple:!0,children:Object(z.jsx)("i",{className:"fa fa-google-plus-square"})})]})})})]})})]})}}]),n}(p.Component);t.a=P}).call(this,s(45))},389:function(e,t,s){"use strict";var a=s(17),n=s(21),o=s(22),r=s(24),i=s(23),c=s(1),l=s(1075),d=s(1083),u=s(66),p=s(322),h=s(44),m=s(0),j=["isChecked","number","label","inline"],b=function(e){Object(r.a)(s,e);var t=Object(i.a)(s);function s(e){var a;return Object(n.a)(this,s),(a=t.call(this,e)).state={is_checked:!!e.isChecked},a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(o.a)(s,[{key:"handleClick",value:function(){this.setState({is_checked:!this.state.is_checked})}},{key:"render",value:function(){var e=this.props,t=(e.isChecked,e.number),s=e.label,a=e.inline,n=Object(p.a)(e,j),o=void 0!==a?"checkbox checkbox-inline":"checkbox";return Object(m.jsxs)("div",{className:o,children:[Object(m.jsx)("input",Object(u.a)({id:t,type:"checkbox",onChange:this.handleClick,checked:this.state.is_checked},n)),Object(m.jsx)("label",{htmlFor:t,children:s})]})}}]),s}(c.Component),g=s(75);c.Component},399:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return z}));var a=s(17),n=s(156),o=s(10),r=s.n(o),i=s(20),c=s(21),l=s(22),d=s(24),u=s(23),p=s(1),h=s(9),m=s(40),j=s(37),b=s(52),g=s(36),f=s(13),x=s(39),O=(s(64),s(43)),v=s(12),w=s.n(v),y=s(8),N=s.n(y),S=s(59),_=s.n(S),C=s(83),M=s(111),I=s(48),k=s(0),z=function(t){Object(d.a)(o,t);var s=Object(u.a)(o);function o(t){var a;return Object(c.a)(this,o),(a=s.call(this,t)).componentDidMount=function(){a._getElus(),a._getcommunaute()},a.onValidateFormData=function(){var e=a.state.newElu,t=a.state.errors,s=!0;(e.adress||(s=!1,a.setState({is_empty_adress:!0}),setTimeout((function(){a.setState({is_empty_adress:!1})}),5e3),t.adress="Ce champ est obligatoire"),e.phone||(s=!1,a.setState({is_empty_phone:!0}),setTimeout((function(){a.setState({is_empty_phone:!1})}),5e3),t.phone="Ce champ est obligatoire"),e.email||(s=!1,a.setState({is_empty_email:!0}),setTimeout((function(){a.setState({is_empty_email:!1})}),5e3),t.email="Ce champ est obligatoire"),"undefined"!==typeof e.email)&&(new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e.email)||(s=!1,a.setState({is_invalid_email:!0}),setTimeout((function(){a.setState({is_invalid_email:!1})}),5e3),t.invalid_email="Votre adresse email n'est pas valide"));return e.first_name||(s=!1,a.setState({is_empty_first_name:!0}),setTimeout((function(){a.setState({is_empty_first_name:!1})}),5e3),t.first_name="Ce champ est obligatoire"),e.last_name||(s=!1,a.setState({is_empty_last_name:!0}),setTimeout((function(){a.setState({is_empty_last_name:!1})}),5e3),t.last_name="Ce champ est obligatoire"),e.organisation||(s=!1,a.setState({is_empty_organisation:!0}),setTimeout((function(){a.setState({is_empty_organisation:!1})}),5e3),t.organisation="Ce champ est obligatoire"),a.setState({errors:t}),console.log(s,t),s},a.getMuiTheme=function(){return Object(C.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},a.handleSelectChange=function(e){console.log(e.value);var t=a.state.newElu;t.user_type=e.value,a.setState({newElu:t})},a.handleSelectChangeCom=function(e){console.log(e.value);var t=a.state.newElu;t.communaute=e.value,a.setState({newElu:t})},a.handleSelectZoneChange=function(e){console.log(e.value);var t=a.state.newElu;t.adress=e.value,a.setState({newElu:t})},a.onSelectChange=function(e,t){var s=a.state,n=s.sendZone,o=s.newElu;"select-option"===t.action&&(-1===n.findIndex((function(e){return e===t.option.id}))&&(n.push(parseInt(t.option.id)),o.zones=n));if("remove-value"===t.action){var r=n.findIndex((function(e){return e===t.removedValue.id}));-1!==r&&(n.splice(r),o.zones=n)}"clear"===t.action&&(n=[],o.zones=n),a.setState({sendZone:n,newElu:o})},a._getZones=Object(i.a)(r.a.mark((function t(){var s,n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,w.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:n=t.sent,o=n.data.results,a.setState({zones:o}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),a._getElus=Object(i.a)(r.a.mark((function t(){var s,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/elu/",o=a.state.data,t.prev=2,t.next=5,w.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:return i=t.sent,o=i.data.results,i.data.results,t.next=10,a._getZones();case 10:o.forEach((function(e){e.customZone=[],e.zones.forEach((function(t){a.state.zones.forEach((function(s){t===s.id&&(e.customZone=[].concat(Object(n.a)(e.customZone),[s]))}))}))})),a.setState({data:o}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[2,14]])}))),a._getcommunaute=Object(i.a)(r.a.mark((function t(){var s,a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/communaute/",t.prev=1,t.next=4,w.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log("communaute",a.data),n=a.data.results,console.log(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),a.__addElu=function(t){if(t.preventDefault(),a.onValidateFormData()){a.setState({inProgress:!a.state.inProgress});var s={first_name:a.state.newElu.first_name,last_name:a.state.newElu.last_name,email:a.state.newElu.email,phone:a.state.newElu.phone,adress:a.state.newElu.adress,user_type:"elu",password:"mapaction2020",organisation:a.state.newElu.organisation,zones:a.state.newElu.zones},n=e.config.url+"api/elu/";console.log("newElu",s),w.a.post(n,s,{headers:{"Content-Type":"application/json",Bearer:"".concat(sessionStorage.token)}}).then((function(e){console.log(e);a.state.data;a._getElus(),a.setState({inProgress:!a.state.inProgress,newEluModal:!1,newElu:{}}),N()("Succes","Organisation ajout\xe9 avec succ\xe8s","success")})).catch((function(e){var t,s,n,o,r;if(a.setState({inProgress:!a.state.inProgress}),400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.email))N()("Erreur Ajout","Cet email est d\xe9ja associ\xe9 \xe0 un compte. Veuillez renseigner une autre adresse email.","error"),console.log(null===e||void 0===e||null===(o=e.response)||void 0===o?void 0:o.status),console.log(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data);else if(null===e||void 0===e?void 0:e.request){var i;console.log(null===e||void 0===e||null===(i=e.request)||void 0===i?void 0:i.data),N()("erreur","Veuillez reessayer","error")}else N()("erreur",null===e||void 0===e?void 0:e.message,"error"),console.log(null===e||void 0===e?void 0:e.message)}))}},a.onUpdateUser=function(t){t.preventDefault();var s=a.state,n=s.errors;if(0===s.newElu.zones.length)n.zones="Ce champ est obligatoire",a.setState({is_empty_zones:!0,errors:n}),setTimeout((function(){a.setState({is_empty_zones:!1,errors:{}})}),5e3);else{a.setState({inProgress:!a.state.inProgress});var o={first_name:a.state.newElu.first_name,last_name:a.state.newElu.last_name,email:a.state.newElu.email,phone:a.state.newElu.phone,adress:a.state.newElu.adress,organisation:a.state.newElu.organisation,user_type:a.state.newElu.user_type,communaute:a.state.newElu.communaute,zones:a.state.newElu.zones||[]},r=e.config.url+"api/user/"+a.state.newElu.id+"/";console.log(o),w.a.put(r,o).then((function(e){console.log(e),a.setState({inProgress:!a.state.inProgress,newEluModal:!1,editUserModal:!1,newElu:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:"",organisation:"",zones:[]}}),N()("Succ\xe8s","Utilisateur mis \xe0 jour avec succ\xe8s","success"),a._getElus()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(N()("Erreur","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),N()("erreur","Veuillez reessayer","error")):(N()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}},a.onEditUser=function(e){console.log(e);var t=a.state.sendZone;e.zones.map((function(e){t=[].concat(Object(n.a)(t),[parseInt(e)])})),a.setState({editUserModal:!a.state.editUserModal,newElu:e,sendZone:t},(function(){!1===a.state.editUserModal&&a.setState({newElu:{},sendZone:[]})}))},a.onDeleteUser=function(t){console.log("item=>",t),N()({title:"Etes vous sure?",text:"La suppression est definitive",icon:"warning",buttons:!0,dangerMode:!0}).then((function(s){if(s){var n=e.config.url+"api/user/"+t.id+"/";console.log(t),w.a.delete(n,t).then((function(e){console.log(e),console.log("response done=>",e),N()("Utilisateur Supprime!",{icon:"success"}),a._getElus()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),console.log("erreur=>",e),e.response?(N()("Erreur Suppression","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),N()("erreur","Veuillez reessayer","error")):(N()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}else N()("Suppression annulee!")}))},a.handleEditModal=function(){a.setState({editUserModal:!a.state.editUserModal,newElu:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:"",zones:[]}})},a.handleModalOpen=function(){a.setState({newEluModal:!a.state.newEluModal}),!1===a.state.newEluModal&&a.setState({newElu:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:"",organisation:"",communaute:"",zones:[]}})},a.state={data:[],inProgress:!1,errors:{},newElu:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"elu",password:"mapaction2020",organisation:"",zones:[]},newEluModal:!1,editUserModal:!1,visible:!1,error:!1,message:[],communaute:[],zones:[],is_empty_adress:!1,is_empty_email:!1,is_empty_name:!1,is_empty_phone:!1,is_empty_user_type:!1,is_empty_first_organisation:!1,is_empty_last_communaute:!1,is_empty_password:!1,is_invalid_email:!1,is_empty_zones:!1,listZones:[],sendZone:[]},a}return Object(l.a)(o,[{key:"render",value:function(){var e,t,s,o,r,i,c=this,l=[{value:"admin",label:"Admin"},{value:"visitor",label:"Visitor"},{value:"reporter",label:"Reporter"},{value:"citizen",label:"Citizen"},{value:"business",label:"Business"},{value:"elu",label:"Organisation"}],d=this.state.zones.map((function(e){return{value:e.name,label:e.name,key:e.id+"unique-key",id:e.id}})),u=[],p=this.state.newElu.zones;(null===(e=this.state.zones)||void 0===e?void 0:e.length)&&this.state.zones.forEach((function(e){(null===p||void 0===p?void 0:p.length)&&p.forEach((function(t){if(t===e.id){var s={value:e.name,label:e.name,key:e.id+"unique-key",id:e.id};u=[].concat(Object(n.a)(u),[s])}}))}));this.state.zones.map((function(e){return{value:e.name,label:e.name,key:e.id+"unique-key"}})),this.state.communaute.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key"}}));var v=this.state.data.reverse().map((function(e,t){return[e.first_name,e.last_name,e.email,e.phone,e.adress,e.organisation,e.customZone.map((function(e){return e.name+" ,"})),Object(k.jsxs)("div",{className:"btn-group",children:[Object(k.jsx)("a",{onClick:function(t){return c.onEditUser(e)},className:"btn btn-default btn-xs map-color nb","data-id":e.id,children:Object(k.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(k.jsx)(h.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(t){c.onDeleteUser(e),c.setState({inProgress:!1})},children:Object(k.jsx)("i",{className:"fas fa-trash fa-x"})})]})]})),w=Object(k.jsxs)(m.a,{show:this.state.newEluModal,onHide:this.handleModalOpen,children:[Object(k.jsx)(j.a,{closeButton:!0,children:"Nouveau Organisation"}),Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(g.a,{className:"col-sm-12",children:[Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"from",children:"Prenom:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newElu.first_name||"",onChange:function(e){var t=c.state.newElu;t.first_name=e.target.value,c.setState({newElu:t})}}),!0===this.state.is_empty_first_name&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.first_name," "]})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newElu.last_name,onChange:function(e){var t=c.state.newElu;t.last_name=e.target.value,c.setState({newElu:t})}}),!0===this.state.is_empty_last_name&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.last_name," "]})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"email",name:"email",value:this.state.newElu.email,onChange:function(e){var t=c.state.newElu;t.email=e.target.value,c.setState({newElu:t})}}),!0===this.state.is_empty_email&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.email," "]}),!this.state.is_empty_email&&!0===this.state.is_invalid_email&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.invalid_email," "]})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"phone",children:"Telephone:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"phone",name:"phone",value:this.state.newElu.phone,onChange:function(e){var t=c.state.newElu;t.phone=e.target.value,c.setState({newElu:t})}}),!0===this.state.is_empty_phone&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.phone," "]})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"zone",children:"Adresse:"}),Object(k.jsx)(I.a,(t={className:"mt-4 col-md-6 col-offset-4",name:"zone",options:d},Object(a.a)(t,"className","basic-multi-select map-color"),Object(a.a)(t,"onChange",this.handleSelectZoneChange),Object(a.a)(t,"classNamePrefix","select"),t)),!0===this.state.is_empty_adress&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.adress," "]})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"user_type",children:"Type Utilisateur:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:" user_type",name:" user_type",value:"elu",disabled:!0})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"org",children:"Organisation:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"org",placeholder:"Organisation",name:"organisation",value:this.state.newElu.organisation,onChange:function(e){var t=c.state.newElu;t.organisation=e.target.value,c.setState({newElu:t})}}),!0===this.state.is_empty_organisation&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.organisation," "]})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"zone",children:"Zone(s):"}),Object(k.jsx)(I.a,(s={className:"mt-4 col-md-6 col-offset-4",name:"zones",options:d},Object(a.a)(s,"className","basic-multi-select map-color"),Object(a.a)(s,"isMulti",!0),Object(a.a)(s,"onChange",(function(e,t){return c.onSelectChange(e,t)})),Object(a.a)(s,"classNamePrefix","select"),s)),!0===this.state.is_empty_zones&&Object(k.jsxs)("div",{className:"alert alert-danger gfa-alert-danger",children:[" ",this.state.errors.is_empty_zones," "]})]})]}),Object(k.jsxs)(x.a,{children:[this.state.inProgress?Object(k.jsxs)(h.a,{className:"btn btn-primary",children:["Loading...",Object(k.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(k.jsx)(h.a,{className:"btn btn-primary",onClick:this.__addElu,children:"Ajouter"})," ",Object(k.jsx)(h.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]}),y=Object(k.jsxs)(m.a,{show:this.state.editUserModal,onHide:this.handleEditModal,children:[Object(k.jsx)(j.a,{closeButton:!0,children:"Modifier Organisation"}),Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(g.a,{className:"col-sm-12",children:[Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"from",children:"Prenom:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newElu.first_name,onChange:function(e){var t=c.state.newElu;t.first_name=e.target.value,c.setState({newElu:t})}})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newElu.last_name,onChange:function(e){var t=c.state.newElu;t.last_name=e.target.value,c.setState({newElu:t})}})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"email",name:"email",value:this.state.newElu.email,onChange:function(e){var t=c.state.newElu;t.email=e.target.value,c.setState({newElu:t})}})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"phone",children:"Telephone:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"phone",name:"phone",value:this.state.newElu.phone,onChange:function(e){var t=c.state.newElu;t.phone=e.target.value,c.setState({newElu:t})}})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"zone",children:"Adresse:"}),Object(k.jsx)(I.a,(o={className:"mt-4 col-md-6 col-offset-4",name:"zone",options:d,value:d.filter((function(e){return e.value===c.state.newElu.adress}))},Object(a.a)(o,"className","basic-multi-select map-color"),Object(a.a)(o,"onChange",this.handleSelectZoneChange),Object(a.a)(o,"classNamePrefix","select"),o))]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"org",children:"Organisation:"}),Object(k.jsx)("input",{className:"form-control",type:"text",id:"org",placeholder:"Organisation",name:"organisation",value:this.state.newElu.organisation,onChange:function(e){var t=c.state.newElu;t.organisation=e.target.value,c.setState({newElu:t})}})]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"user_type",children:"Type Utilisateur:"}),Object(k.jsx)(I.a,(r={className:"mt-4 col-md-6 col-offset-4",name:"incidents_rapport",value:l.filter((function(e){return e.value===c.state.newElu.user_type})),options:l},Object(a.a)(r,"className","basic-multi-select map-color"),Object(a.a)(r,"onChange",this.handleSelectChange),Object(a.a)(r,"classNamePrefix","select"),r))]}),Object(k.jsxs)(f.a,{className:"col-sm-6",children:[Object(k.jsx)("label",{htmlFor:"user_type",children:"Zones:"}),Object(k.jsx)(I.a,(i={className:"mt-4 col-md-6 col-offset-4",name:"zones",options:d,defaultValue:u},Object(a.a)(i,"className","basic-multi-select map-color"),Object(a.a)(i,"isMulti",!0),Object(a.a)(i,"onChange",(function(e,t){return c.onSelectChange(e,t)})),Object(a.a)(i,"classNamePrefix","select"),i)),this.state.is_empty_zones&&Object(k.jsx)("div",{className:"alert alert-danger",children:this.state.errors.zones})]})]}),Object(k.jsxs)(x.a,{children:[this.state.inProgress?Object(k.jsxs)(h.a,{className:"btn btn-primary",children:["Loading...",Object(k.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(k.jsx)(h.a,{className:"btn btn-primary",onClick:this.onUpdateUser,children:"Modifier"})," ",Object(k.jsx)(h.a,{className:"btn btn-danger",onClick:this.handleEditModal,children:"Annuler"})]})]})]});return Object(k.jsxs)("div",{className:"content",children:[w,y,Object(k.jsxs)(h.a,{className:"pull-right",style:O.btnStyle,onClick:this.handleModalOpen,children:[Object(k.jsx)("i",{className:"fa fa-plus"}),"Nouveau Organisation"]}),Object(k.jsx)(M.a,{theme:this.getMuiTheme(),children:Object(k.jsx)(_.a,{title:"Liste des Organisations",data:v,columns:[{name:"first_name",label:"Prenom",options:{filter:!0,sort:!0}},{name:"last_name",label:"Nom",options:{filter:!0,sort:!1}},{name:"email",label:"Email",options:{filter:!1,sort:!1}},{name:"phone",label:"Telephone",options:{filter:!1,sort:!1}},{name:"adress",label:"Adresse",options:{filter:!0,sort:!1}},{name:"organisation",label:"Organisation",options:{filter:!0,sort:!1}},{name:"Zone",label:"Zone",options:{filter:!0,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1,export:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0}})})]})}}]),o}(p.Component)}).call(this,s(45))},400:function(e){e.exports=JSON.parse('{"name":"mapaction","version":"1.3.0","private":true,"dependencies":{"@material-ui/core":"^4.11.3","@material-ui/icons":"^4.9.1","@sentry/react":"^6.12.0","@sentry/tracing":"^6.12.0","axios":"^0.21.1","bootstrap":"^3.4.1","chartist":"0.10.1","ckeditor4":"^4.16.0","ckeditor4-react":"^1.1.0","core-js":"3","formik":"^2.1.4","google-maps-react":"^2.0.6","leaflet":"^1.6.0","moment":"^2.29.1","mui-datatables":"^2.14.0","node-sass":"4.14.1","prop-types":"^15.7.2","react":"^16.8.6","react-bootstrap":"0.32.4","react-chartist":"0.13.3","react-csv":"^2.0.3","react-document-meta":"^3.0.0-beta.2","react-dom":"^16.8.6","react-google-maps":"^9.4.5","react-html-parser":"^2.0.2","react-leaflet":"^2.7.0","react-loader-spinner":"^3.1.14","react-meta-tags":"^0.7.4","react-notification-system":"0.2.17","react-router":"^5.2.0","react-router-dom":"^5.2.0","react-scripts":"^4.0.3","react-select":"^3.1.0","react-toggle":"4.0.2","sweetalert":"^2.1.2","video-react":"^0.14.1","yup":"^0.29.1"},"devDependencies":{"@babel/core":"^7.13.10","@types/markerclustererplus":"2.1.33","@types/react":"16.8.13","typescript":"3.4.3"},"scripts":{"start":"react-scripts start","build":"node ./update-build.js && react-scripts build","test":"react-scripts test --env=jsdom","eject":"react-scripts eject","install:clean":"rm -rf node_modules/ && rm -rf package-lock.json && npm install && npm start","compile-sass":"node-sass src/assets/sass/light-bootstrap-dashboard-react.scss src/assets/css/light-bootstrap-dashboard-react.css","minify-sass":"node-sass src/assets/sass/light-bootstrap-dashboard-react.scss src/assets/css/light-bootstrap-dashboard-react.min.css --output-style compressed","map-sass":"node-sass src/assets/sass/light-bootstrap-dashboard-react.scss src/assets/css/light-bootstrap-dashboard-react.css --source-map true"},"proxy":"http://mapaction.withvolkeno.com/","browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"buildDate":1631875946678}')},43:function(e,t){var s=window.screen.width>768?1*window.screen.width/3:window.screen.width,a={Wrapper:{},Containers:{DefaultStyle:{position:"fixed",width:s,padding:"10px 10px 10px 20px",zIndex:9998,WebkitBoxSizing:"",MozBoxSizing:"",boxSizing:"",height:"auto",display:"inline-block",border:"0",fontSize:"14px",WebkitFontSmoothing:"antialiased",fontFamily:'"Roboto","Helvetica Neue",Arial,sans-serif',fontWeight:"400",color:"#FFFFFF"},tl:{top:"0px",bottom:"auto",left:"0px",right:"auto"},tr:{top:"0px",bottom:"auto",left:"auto",right:"0px"},tc:{top:"0px",bottom:"auto",margin:"0 auto",left:"50%",marginLeft:-s/2},bl:{top:"auto",bottom:"0px",left:"0px",right:"auto"},br:{top:"auto",bottom:"0px",left:"auto",right:"0px"},bc:{top:"auto",bottom:"0px",margin:"0 auto",left:"50%",marginLeft:-s/2}},NotificationItem:{DefaultStyle:{position:"relative",width:"100%",cursor:"pointer",borderRadius:"4px",fontSize:"14px",margin:"10px 0 0",padding:"10px",display:"block",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box",boxSizing:"border-box",opacity:0,transition:"all 0.5s ease-in-out",WebkitTransform:"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)",willChange:"transform, opacity",isHidden:{opacity:0},isVisible:{opacity:1}},success:{borderTop:0,backgroundColor:"#a1e82c",WebkitBoxShadow:0,MozBoxShadow:0,boxShadow:0},error:{borderTop:0,backgroundColor:"#fc727a",WebkitBoxShadow:0,MozBoxShadow:0,boxShadow:0},warning:{borderTop:0,backgroundColor:"#ffbc67",WebkitBoxShadow:0,MozBoxShadow:0,boxShadow:0},info:{borderTop:0,backgroundColor:"#63d8f1",WebkitBoxShadow:0,MozBoxShadow:0,boxShadow:0}},Title:{DefaultStyle:{fontSize:"30px",margin:"0",padding:0,fontWeight:"bold",color:"#FFFFFF",display:"block",left:"15px",position:"absolute",top:"50%",marginTop:"-15px"}},MessageWrapper:{DefaultStyle:{marginLeft:"55px",marginRight:"30px",padding:"0 12px 0 0",color:"#FFFFFF",maxWidthwidth:"89%"}},Dismiss:{DefaultStyle:{fontFamily:"inherit",fontSize:"21px",color:"#000",float:"right",position:"absolute",right:"10px",top:"50%",marginTop:"-13px",backgroundColor:"#FFFFFF",display:"block",borderRadius:"50%",opacity:".4",lineHeight:"11px",width:"25px",height:"25px",outline:"0 !important",textAlign:"center",padding:"6px 3px 3px 3px",fontWeight:"300",marginLeft:"65px"},success:{},error:{},warning:{},info:{}},Action:{DefaultStyle:{background:"#ffffff",borderRadius:"2px",padding:"6px 20px",fontWeight:"bold",margin:"10px 0 0 0",border:0},success:{backgroundColor:"#a1e82c",color:"#ffffff"},error:{backgroundColor:"#fc727a",color:"#ffffff"},warning:{backgroundColor:"#ffbc67",color:"#ffffff"},info:{backgroundColor:"#63d8f1",color:"#ffffff"}},ActionWrapper:{DefaultStyle:{margin:0,padding:0}}};e.exports={style:a,thArray:["ID","Name","Salary","Country","City"],tdArray:[["1","Dakota Rice","$36,738","Niger","Oud-Turnhout"],["2","Minerva Hooper","$23,789","Cura\xe7ao","Sinaai-Waas"],["3","Sage Rodriguez","$56,142","Netherlands","Baileux"],["4","Philip Chaney","$38,735","Korea, South","Overland Park"],["5","Doris Greene","$63,542","Malawi","Feldkirchen in K\xe4rnten"],["6","Mason Porter","$78,615","Chile","Gloucester"]],arrayJourneys:[{id:1,from:"Dakar",to:"Mbour",date_dep:"2020-03-11",date_arr:"2020-03-11",real_arr_date:"2020-03-11",transporter:"Transporteur Dembi",price:"1500 Frcfa"},{id:2,from:"Dakar",to:"Saint-Louis",date_dep:"2020-03-14",date_arr:"2020-03-14",real_arr_date:"2020-03-14",transporter:"Moustapha Voyage",price:"6000 Frcfa"},{id:3,from:"Saint-Louis",to:"Ziguinchor",date_dep:"2020-03-07",date_arr:"2020-03-07",real_arr_date:"2020-03-07",transporter:"Bakeli Voyage",price:"10000 Frcfa"},{id:4,from:"Mbour",to:"Dakar",date_dep:"2020-03-08",date_arr:"2020-03-08",real_arr_date:"2020-03-08",transporter:"Test voyage",price:"2500 Frcfa"}],iconsArray:["pe-7s-album","pe-7s-arc","pe-7s-back-2","pe-7s-bandaid","pe-7s-car","pe-7s-diamond","pe-7s-door-lock","pe-7s-eyedropper","pe-7s-female","pe-7s-gym","pe-7s-hammer","pe-7s-headphones","pe-7s-helm","pe-7s-hourglass","pe-7s-leaf","pe-7s-magic-wand","pe-7s-male","pe-7s-map-2","pe-7s-next-2","pe-7s-paint-bucket","pe-7s-pendrive","pe-7s-photo","pe-7s-piggy","pe-7s-plugin","pe-7s-refresh-2","pe-7s-rocket","pe-7s-settings","pe-7s-shield","pe-7s-smile","pe-7s-usb","pe-7s-vector","pe-7s-wine","pe-7s-cloud-upload","pe-7s-cash","pe-7s-close","pe-7s-bluetooth","pe-7s-cloud-download","pe-7s-way","pe-7s-close-circle","pe-7s-id","pe-7s-angle-up","pe-7s-wristwatch","pe-7s-angle-up-circle","pe-7s-world","pe-7s-angle-right","pe-7s-volume","pe-7s-angle-right-circle","pe-7s-users","pe-7s-angle-left","pe-7s-user-female","pe-7s-angle-left-circle","pe-7s-up-arrow","pe-7s-angle-down","pe-7s-switch","pe-7s-angle-down-circle","pe-7s-scissors","pe-7s-wallet","pe-7s-safe","pe-7s-volume2","pe-7s-volume1","pe-7s-voicemail","pe-7s-video","pe-7s-user","pe-7s-upload","pe-7s-unlock","pe-7s-umbrella","pe-7s-trash","pe-7s-tools","pe-7s-timer","pe-7s-ticket","pe-7s-target","pe-7s-sun","pe-7s-study","pe-7s-stopwatch","pe-7s-star","pe-7s-speaker","pe-7s-signal","pe-7s-shuffle","pe-7s-shopbag","pe-7s-share","pe-7s-server","pe-7s-search","pe-7s-film","pe-7s-science","pe-7s-disk","pe-7s-ribbon","pe-7s-repeat","pe-7s-refresh","pe-7s-add-user","pe-7s-refresh-cloud","pe-7s-paperclip","pe-7s-radio","pe-7s-note2","pe-7s-print","pe-7s-network","pe-7s-prev","pe-7s-mute","pe-7s-power","pe-7s-medal","pe-7s-portfolio","pe-7s-like2","pe-7s-plus","pe-7s-left-arrow","pe-7s-play","pe-7s-key","pe-7s-plane","pe-7s-joy","pe-7s-photo-gallery","pe-7s-pin","pe-7s-phone","pe-7s-plug","pe-7s-pen","pe-7s-right-arrow","pe-7s-paper-plane","pe-7s-delete-user","pe-7s-paint","pe-7s-bottom-arrow","pe-7s-notebook","pe-7s-note","pe-7s-next","pe-7s-news-paper","pe-7s-musiclist","pe-7s-music","pe-7s-mouse","pe-7s-more","pe-7s-moon","pe-7s-monitor","pe-7s-micro","pe-7s-menu","pe-7s-map","pe-7s-map-marker","pe-7s-mail","pe-7s-mail-open","pe-7s-mail-open-file","pe-7s-magnet","pe-7s-loop","pe-7s-look","pe-7s-lock","pe-7s-lintern","pe-7s-link","pe-7s-like","pe-7s-light","pe-7s-less","pe-7s-keypad","pe-7s-junk","pe-7s-info","pe-7s-home","pe-7s-help2","pe-7s-help1","pe-7s-graph3","pe-7s-graph2","pe-7s-graph1","pe-7s-graph","pe-7s-global","pe-7s-gleam","pe-7s-glasses","pe-7s-gift","pe-7s-folder","pe-7s-flag","pe-7s-filter","pe-7s-file","pe-7s-expand1","pe-7s-exapnd2","pe-7s-edit","pe-7s-drop","pe-7s-drawer","pe-7s-download","pe-7s-display2","pe-7s-display1","pe-7s-diskette","pe-7s-date","pe-7s-cup","pe-7s-culture","pe-7s-crop","pe-7s-credit","pe-7s-copy-file","pe-7s-config","pe-7s-compass","pe-7s-comment","pe-7s-coffee","pe-7s-cloud","pe-7s-clock","pe-7s-check","pe-7s-chat","pe-7s-cart","pe-7s-camera","pe-7s-call","pe-7s-calculator","pe-7s-browser","pe-7s-box2","pe-7s-box1","pe-7s-bookmarks","pe-7s-bicycle","pe-7s-bell","pe-7s-battery","pe-7s-ball","pe-7s-back","pe-7s-attention","pe-7s-anchor","pe-7s-albums","pe-7s-alarm","pe-7s-airplay"],dataPie:{labels:["rs%","20%","40%"],series:[20,20,40]},legendPie:{names:["Nouveau","Danger","Urgent","RAS"],types:["info","danger","warning","nouv"]},dataSales:{labels:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"],series:[[23,113,67,108,190,239,307]]},optionsSales:{low:0,high:5,showArea:!1,height:"245px",axisX:{showGrid:!1},lineSmooth:!0,showLine:!0,showPoint:!0,fullWidth:!0,chartPadding:{right:50}},responsiveSales:[["screen and (max-width: 640px)",{axisX:{labelInterpolationFnc:function(e){return e[0]}}}]],legendSales:{names:["Donnes hebdomadaires"],types:["info","danger","warning"]},dataBar:{labels:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],series:[[542,443,320,780,553,453,326,434,568,610,756,895],[412,243,280,580,453,353,300,364,368,410,636,695],[302,143,270,490,343,253,200,264,268,310,536,595]]},optionsBar:{seriesBarDistance:10,axisX:{showGrid:!1},height:"245px"},optionsPie:{donut:!0,donutWidth:30},responsiveBar:[["screen and (max-width: 640px)",{seriesBarDistance:5,axisX:{labelInterpolationFnc:function(e){return e[0]}}}]],responsiveOptionsCircle:[["screen and (min-width: 640px)",{chartPadding:30,labelOffset:100,labelDirection:"explode",labelInterpolationFnc:function(e){return e}}],["screen and (min-width: 1024px)",{labelOffset:60,chartPadding:20}]],optionsCircle:{labelInterpolationFnc:function(e){return e[0]}},legendBar:{names:["Total","Resolus","Non-Resolus"],types:["info","warning","danger"]},btnStyle:{marginTop:"4px",marginRight:"5px"}}},481:function(e,t,s){},482:function(e,t,s){},483:function(e,t,s){},484:function(e,t,s){},628:function(e,t,s){"use strict";(function(e){var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(1),u=s(142),p=s.n(u),h=s(73),m=s(32),j=s(64),b=(s(102),s(389),s(206)),g=s.n(b),f=s(43),x=s(40),O=s(37),v=s(36),w=s(39),y=s(12),N=s.n(y),S=s(213),_=s(214),C=s(211),M=s(215),I=s(326),k=s(51),z=s.n(k),P=(s(136),s(154)),E=(s(364),s(130)),R=s(0);z.a.Icon.Default.prototype._getIconUrl,z.a.Icon.Default.mergeOptions({iconRetinaUrl:s(543),shadowUrl:s(544)});var D=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=s.call(this,t))._getIncidents=Object(o.a)(n.a.mark((function t(){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/incident/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,i.setState({count_incidents:a.data.count}),i.setState({data:a.data.results}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),i.getIcon=function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.etat),"declared"!=t.etat){e.next=5;break}return e.abrupt("return",z.a.Icon.Default.mergeOptions({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png"}));case 5:return e.abrupt("return",z.a.Icon.Default.mergeOptions({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getIndicateur=Object(o.a)(n.a.mark((function t(){var s,a,o,r,c,l;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/indicateurincident/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,o=a.data.data,o.reverse(),r=[],c=[],o.forEach((function(e){e.number>0&&"null"!=e.indicateur&&(r.push(e.indicateur+"("+e.number+")"),c.push(e.number))})),l={labels:r,series:c},console.log("data pie",l),i.setState({indicateurs:l}),console.log("data indicateurs",i.state.indicateurs),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.log(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[1,16]])}))),i.getIncidentsByWeek=Object(o.a)(n.a.mark((function t(){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/incidentonweek/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a.data.data),i.setState({incidentsByWeek:a.data.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message),console.log("err",t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))),i.getIncidentsByMonth=Object(o.a)(n.a.mark((function t(){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/incidentbymonth/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a.data.data),i.setState({incidentsByMonth:a.data.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),i._getIncidentsNotResolved=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,console.log(s),a=e.config.url+"api/incidentnotresolved/",t.prev=3,t.next=6,N.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 6:o=t.sent,console.log(o.data.count),i.setState({non_resolus:o.data.count}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),i._getIncidentsResolved=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,console.log(s),a=e.config.url+"api/incidentresolved/",t.prev=3,t.next=6,N.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 6:o=t.sent,console.log(o),i.setState({resolus:o.data.count}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),i.getZones=Object(o.a)(n.a.mark((function t(){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a.data.count),i.setState({count_zones:a.data.count}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),i.getElus=Object(o.a)(n.a.mark((function t(){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/elu/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a),i.setState({count_elus:a.data.count}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),i._getRapports=Object(o.a)(n.a.mark((function t(){var s,a,o,r,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/rapport/",t.prev=1,t.next=4,N.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 4:a=t.sent,o=a.data,i.setState({count_rapports:a.data.count}),r=0,c=0,i.setState({rapports_dispo:r,rapports_nondispo:c}),i.state.data.map((function(e,t){return e.disponible?(r+=1,i.setState({rapports_dispo:r})):(c+=1,i.setState({rapports_nondispo:c}))})),console.log(o),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[1,14]])}))),i.onShowIncident=function(e){i.setState({inProgress:!1,showIncidentModal:!i.state.showIncidentModal});var t=i.getIncidentById(e);console.log(t),t&&(console.log("element \xe0 afficher ",t),i.state.incident=t)},i.handleShowIncidentModal=function(){i.setState({inProgress:!1,showIncidentModal:!i.state.showIncidentModal})},i.componentDidMount=function(){if("admin"!==i.state.userType)return Object(R.jsx)(E.a,{});i._isMounted=!0,i._getIncidents(),i._getRapports(),i.getZones(),i.getElus(),i.getIncidentsByMonth(),i.getIncidentsByWeek(),i._getIncidentsNotResolved(),i._getIncidentsResolved(),i.getIndicateur()},i.renderShowIncident=function(){var t=e.config.url.slice(0,-1),s=i.state.incident.photo,a=t+"".concat(s),n=i.state.incident.audio,o=t+"".concat(n),r=i.state.incident.video,c=t+"".concat(r),l=function(){return Object(R.jsx)("div",{className:"loader",children:Object(R.jsx)("h2",{children:"Loading video..."})})},d=i.state.incident.lattitude,u=i.state.incident.longitude,p=[d,u];return Object(R.jsx)("div",{className:"modal fade",children:Object(R.jsxs)(x.a,{show:i.state.showIncidentModal,onHide:i.handleShowIncidentModal,children:[Object(R.jsx)(O.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Details Incident"}),Object(R.jsxs)(v.a,{className:"col-sm-12",children:[Object(R.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(R.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Titre:"}),Object(R.jsx)("p",{children:i.state.incident.title})]}),Object(R.jsxs)("div",{className:"col-sm-6",children:[Object(R.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Zone:"}),Object(R.jsx)("p",{children:i.state.incident.zone})]}),Object(R.jsx)("hr",{}),Object(R.jsx)("div",{className:"col-sm-12 pb-3",children:null!==d&&null!==u?Object(R.jsxs)(S.a,{center:p,zoom:13,children:[Object(R.jsx)(_.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),Object(R.jsxs)(C.a,{position:p,children:[Object(R.jsx)(M.a,{children:i.state.incident.title}),Object(R.jsx)(I.a,{center:p,radius:500,color:"red"})]})]}):Object(R.jsx)("p",{className:"danger",children:"Coordonnees non renseignees"})}),Object(R.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(R.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Description:"}),Object(R.jsx)("p",{children:i.state.incident.description})]}),Object(R.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(R.jsx)("label",{className:"map-color fs-18",children:"Image:"}),Object(R.jsx)("img",{src:a,alt:""})," "]}),Object(R.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(R.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Video:"}),Object(R.jsxs)("div",{className:"video",children:[Object(R.jsx)(P.Player,{fluid:!1,width:537,height:400,children:Object(R.jsx)("source",{src:c})}),i.state.videoIsLoading?Object(R.jsx)(l,{}):null]})]}),Object(R.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(R.jsxs)("label",{htmlFor:"code",className:"map-color fs-18",children:["Audio:"," "]}),Object(R.jsx)("br",{}),Object(R.jsxs)("audio",{controls:!0,src:o,children:["Your browser does not support the",Object(R.jsx)("code",{children:"audio"})," element."]})]})]}),Object(R.jsx)(w.a,{})]})})},i.state={count_incidents:"",count_rapports:"",count_zones:"",count_elus:"",rapports_dispo:0,rapports_nondispo:0,incidentsByMonth:[],incidentsByWeek:[],data:[],indicateurs:{},resolus:"",non_resolus:"",markers:[[14.716677,-17.467686]],showIncidentModal:!1,incident:[],userType:sessionStorage.getItem("user_type")},i}return Object(i.a)(a,[{key:"createLegend",value:function(e){for(var t=[],s=0;s<e.names.length;s++){var a="fa fa-circle text-"+e.types[s];t.push(Object(R.jsx)("i",{className:a},s)),t.push(" "),t.push(e.names[s])}return t}},{key:"getIncidentById",value:function(e){for(var t="",s=0;s<this.state.data.length;s++){var a=this.state.data[s];a.id===e&&(t=a)}return t}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this,s={labels:[],series:[[]]},a=new Date;1===a.getDay()&&(s.labels=["Lundi"]),2===a.getDay()&&(s.labels=["Lundi","Mardi"]),3===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi"]),4===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi"]),5===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi","Vendredi"]),6===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]),7===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"]);var n=new Array;n[0]="Jan",n[1]="Feb",n[2]="Mar",n[3]="Apr",n[4]="May",n[5]="Jun",n[6]="Jul",n[7]="Aug",n[8]="Sep",n[9]="Oct",n[10]="Nov",n[11]="Dec";var o={labels:[],series:[]},r=[],i=[],c=[];this.state.incidentsByMonth.map((function(e,t){var s=new Date(e.month),a=n[s.getMonth()];o.labels.push(a),r.push(e.total),i.push(e.resolved),c.push(e.unresolved)})),o.series.push(r,c,i);var l=[];if(this.state.incidentsByWeek.length)this.state.incidentsByWeek.map((function(e,t){for(var n=new Date(e.day).getDay(),o=0;o<a.getDay();o++)o===n?s.series[0][n]=e.total:s.series[0][o]=0;l.push(e.total)}));else for(var d=0;d<a.getDay();d++)s.series[0][d]=0;var u=[];this.state.data.map((function(t,s){if(null!==t.lattitude&&null!==t.longitude&&!isNaN(t.longitude)&&!isNaN(t.lattitude)){var a={id:t.id,lat:t.lattitude,lon:t.longitude,tooltip:t.title,desc:t.description,etat:t.etat,img:e.config.url.slice(0,-1)+t.photo};u.push(a)}}));var b=g.a.renderToString(Object(R.jsx)("i",{class:"fas fa-map-marker-alt fa-2x text-primary "})),x=new z.a.DivIcon({html:b}),O=g.a.renderToString(Object(R.jsx)("i",{class:"fas fa-map-marker-alt fa-2x text-danger "})),v=new z.a.DivIcon({html:O}),w=Object(R.jsxs)(S.a,{center:[14.716677,-17.467686],zoom:5,children:[Object(R.jsx)(_.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),u.map((function(e,s){return Object(R.jsx)(C.a,{className:"icon-marker",icon:"resolved"==e.etat?x:v,position:[e.lat,e.lon],children:Object(R.jsx)(M.a,{children:Object(R.jsx)("span",{className:"icon-marker-tooltip",children:Object(R.jsx)("ul",{children:Object(R.jsxs)("div",{className:"row",children:[Object(R.jsxs)("div",{className:"col-md-6",children:[Object(R.jsxs)("li",{children:[Object(R.jsx)("strong",{children:"Titre:"}),Object(R.jsx)("a",{onClick:function(s){return t.onShowIncident(e.id)},className:"btn btn-default btn-xs map-color nb","data-id":e.id,children:e.tooltip})]}),Object(R.jsxs)("li",{children:[Object(R.jsx)("strong",{children:"Description:"})," ",e.desc]})]}),Object(R.jsxs)("div",{className:"col-md-6",children:[Object(R.jsx)("img",{src:e.img,alt:""}),Object(R.jsx)("div",{children:Object(R.jsx)("button",{className:"boutton  button--round-l",onClick:function(s){return t.onShowIncident(e.id)},children:Object(R.jsx)("i",{className:"fa fa-eye","aria-hidden":"true"})})})]})]})})})})},"marker-".concat(s))}))]});return Object(R.jsxs)("div",{className:"content",children:[Object(R.jsxs)(h.a,{children:[Object(R.jsx)(m.a,{lg:3,sm:6,children:Object(R.jsx)("div",{className:"card card-stats",children:Object(R.jsxs)("div",{className:"content",children:[Object(R.jsxs)(h.a,{children:[Object(R.jsx)(m.a,{xs:3,children:Object(R.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(R.jsx)("i",{className:"pe-7s-map text-warning"})})}),Object(R.jsx)(m.a,{xs:9,children:Object(R.jsxs)("div",{className:"text-card admin-stats",children:[Object(R.jsx)("h3",{className:"text-card-title",children:"Zones"}),Object(R.jsx)("div",{className:"incident-count",children:this.state.count_zones})]})})]}),Object(R.jsxs)("div",{className:"footer",children:[Object(R.jsx)("hr",{}),Object(R.jsx)("div",{className:"stats"})]})]})})}),Object(R.jsx)(m.a,{lg:3,sm:6,children:Object(R.jsx)("div",{className:"card card-stats",children:Object(R.jsxs)("div",{className:"content",children:[Object(R.jsxs)(h.a,{children:[Object(R.jsx)(m.a,{xs:3,children:Object(R.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(R.jsx)("i",{className:"pe-7s-wallet text-success"})})}),Object(R.jsx)(m.a,{xs:9,children:Object(R.jsxs)("div",{className:"text-card admin-stats",children:[Object(R.jsx)("h3",{className:"text-card-title",children:"Rapports"}),Object(R.jsx)("div",{className:"incident-count",children:this.state.count_rapports})]})})]}),Object(R.jsxs)("div",{className:"footer",children:[Object(R.jsx)("hr",{}),Object(R.jsx)("div",{className:"stats"})]})]})})}),Object(R.jsx)(m.a,{lg:3,sm:6,children:Object(R.jsx)("div",{className:"card card-stats",children:Object(R.jsxs)("div",{className:"content",children:[Object(R.jsxs)(h.a,{children:[Object(R.jsx)(m.a,{xs:3,children:Object(R.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(R.jsx)("i",{className:"pe-7s-server text-warning"})})}),Object(R.jsx)(m.a,{xs:9,children:Object(R.jsxs)("div",{className:"text-card admin-stats",children:[Object(R.jsx)("h3",{className:"text-card-title",children:"Etat des incidents "}),Object(R.jsx)("div",{className:"incident-count",children:this.state.count_incidents}),Object(R.jsxs)("div",{className:"text-card-details-container",children:[Object(R.jsxs)("div",{className:"text-card-details",children:[Object(R.jsx)("span",{className:"text-card-number-infos",children:this.state.resolus}),"\xa0",Object(R.jsx)("span",{className:"text-card-number-label",children:"r\xe9solu(s)"})]}),Object(R.jsxs)("div",{className:"text-card-details",children:[Object(R.jsx)("span",{className:"text-card-number-infos",children:this.state.non_resolus}),"\xa0",Object(R.jsx)("span",{className:"text-card-number-label",children:"en cours"})]})]})]})})]}),Object(R.jsxs)("div",{className:"footer",children:[Object(R.jsx)("hr",{}),Object(R.jsx)("div",{className:"stats"})]})]})})}),Object(R.jsx)(m.a,{lg:3,sm:6,children:Object(R.jsx)("div",{className:"card card-stats",children:Object(R.jsxs)("div",{className:"content",children:[Object(R.jsxs)(h.a,{children:[Object(R.jsx)(m.a,{xs:3,children:Object(R.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(R.jsx)("i",{className:"fa fa-user text-info"})})}),Object(R.jsx)(m.a,{xs:9,children:Object(R.jsxs)("div",{className:"text-card admin-stats",children:[Object(R.jsx)("h3",{className:"text-card-title",children:"Organisations"}),Object(R.jsx)("div",{className:"incident-count",children:this.state.count_elus})]})})]}),Object(R.jsxs)("div",{className:"footer",children:[Object(R.jsx)("hr",{}),Object(R.jsx)("div",{className:"stats"})]})]})})})]}),Object(R.jsx)("br",{}),Object(R.jsxs)(h.a,{children:[Object(R.jsx)(m.a,{md:5,children:Object(R.jsx)(j.a,{id:"chartActivity",title:"Incidents",category:"Les incidents selon leur etat",stats:"Etat des incidents",statsIcon:"fa fa-check",content:Object(R.jsx)("div",{className:"ct-chart",children:Object(R.jsx)(p.a,{data:o,type:"Bar",options:f.optionsBar,responsiveOptions:f.responsiveBar})}),legend:Object(R.jsx)("div",{className:"legend",children:this.createLegend(f.legendBar)})})}),Object(R.jsx)(m.a,{md:7,children:Object(R.jsx)(j.a,{id:"chartActivity",title:"Indicateurs",category:"Nombre incidents par indicateur",statsIcon:"fa fa-check",stats:"Indicateurs",content:Object(R.jsx)("div",{className:"ct-chart",children:Object(R.jsx)(p.a,{data:this.state.indicateurs,type:"Pie",options:f.optionsCircle,responsiveOptions:f.responsiveOptionsCircle})}),legend:Object(R.jsx)("div",{className:"legend"})})})]}),Object(R.jsx)("br",{}),Object(R.jsx)(h.a,{children:Object(R.jsx)(m.a,{md:12,children:Object(R.jsx)(j.a,{id:"chartActivity",title:"Bilan Hebdomadaire",category:"Nombres d'incidents de la semaine",stats:"Incidents par jour",statsIcon:"fa fa-check",content:Object(R.jsx)("div",{className:"ct-chart",children:Object(R.jsx)(p.a,{data:s,type:"Line",options:f.optionsSales,responsiveOptions:f.responsiveSales})}),legend:Object(R.jsx)("div",{className:"legend",children:this.createLegend(f.legendSales)})})})}),Object(R.jsx)(h.a,{children:Object(R.jsx)(m.a,{lg:12,sm:12,children:Object(R.jsx)(j.a,{id:"map",title:"Carte des Incidents",category:"Tous les incidents",statsIcon:"fa fa-map",content:Object(R.jsx)("div",{className:"map",children:w})})})}),this.renderShowIncident()]})}}]),a}(d.Component);t.a=D}).call(this,s(45))},632:function(e,t,s){"use strict";t.a="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAG2YAABzjgAA+swAAIT6AAB5gQAA/RMAADBtAAASKQ0eJk4AAAMAUExURevr7Jydn5manJucnuPj5JiZm9vb3PT09MvLzMLCw5GSlPr6+qeoqdXV1tHR0rW1trW2uKusrbi4urO0tLq6vKiqq7e4uLW2tqGipLm6ury8vr6+vr+/wLu8vM7OztDQ0cjJytjY2dTU1aipqqqrrMXGxqanqKmqq6Wmp9LT062usKSlprS0ta2trra2t6ytrqWmqK2ur66vsK6ur7CwsbOztK+vsK+wsbKys7GxsqOkpqOkpZ6foampq6qqrJ2eoKenqaysraKjpZqbnbi4uaKjpKSlp5eYmqioqqurrKChory8vKGio6amqKCho7Gys7CxsrGysrKzs5+gop+gobS1tbq6u7e3uLCxsbKztLi4uJWWmJaXmba3t7i5ub29vZWXmZSWmLq6upOVl5SVl7m5up6foLq7u7u7vJqcnZOUlpeZm5aYmpKUlry8vZKTlpGTlZCRlJCRk6ytr9bX197e3q+vsb2+v8DAweDh4bOztebm5ujp6e/v756eoP///4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKGhoaKioqOjo6SkpKWlpaampqenp6ioqKmpqaqqqqurq6ysrK2tra6urq+vr7CwsLGxsbKysrOzs7S0tLW1tba2tre3t7i4uLm5ubq6uru7u7y8vL29vb6+vr+/v8DAwMHBwcLCwsPDw8TExMXFxcbGxsfHx8jIyMnJycrKysvLy8zMzM3Nzc7Ozs/Pz9DQ0NHR0dLS0tPT09TU1NXV1dbW1tfX19jY2NnZ2dra2tvb29zc3N3d3d7e3t/f3+Dg4OHh4eLi4uPj4+Tk5OXl5ebm5ufn5+jo6Onp6erq6uvr6+zs7O3t7e7u7u/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vf39/j4+Pn5+fr6+vv7+/z8/P39/f7+/v///zfARREAAAeqSURBVHja7N3xVxJZFMBxQAQVilzPSTslBxcDdwdtBQRBDQUFBYNMDTcoNLAMM7QD23JozvvX94cJZBhQZ+bdO2/26F/Q59wv8K48JwP5n/wY7iH3kHvIPYT6D89bLBazfiF8Y+T09PT09MOHzc3Nd+8yeoTwb99+/PjkSbfj8eN83qYPSCOTOTs7O3veEP69UkcegEIdMpPJCI6zz5/f9p9HPp9//97KMsTwLZO5o2Nh4RmrkHrpmxzHwsICzyLEWSq1IXd1TE6aWYNYSqVSqSRzHpOTDsdDliC2ksBQ4HA4zOxA6iURRJ7DccizAbE9fVpyNXhlXTkcjsNDHxMQKyGEWBV35Tg89Pl8rKTVUtHVoc/n89mYgPBK3686Dt8EIcQwMzOjKUTF+1XHMbG0tLT095s3y8vL77WCqHq/Ehy+Lsdybm9aC4irRKGrLkcut7cXiUTQIS1588jfPo/cXiQSibxGhtTpdyU4kCElyq/zXMdx9AwT0qI+j1zbEQwiQmyUX+fXXR0Fg0EXGsQK1dXRUTAYDIbRIJBdBYNhNIgFsqtgOBx2IkFguwqHQyEcSAu2q3AICwLcVSjEh1oYEPCuQgbix4A4obsK+QmPAwHtKhTy+3+gvEacsF2F/H5/wIAIAevK7/cHAhgQgPNuzzwCgcAiFgSoK3/bgQWhuUdJuwosYkGgu1pcnDdgQCju5wPmMY8CAeyqPY/5+To8BKErPAjY50fb8QIHAnIu6Z7HCxwI0Lmk24ECge8KB4LQ1YuNDYS3X4SuNjbGESAIXW2M40DAuxofH0c4ayF0hQNB6AoJAt8VDgShq/GdHQwIYFfteezMIkCgzrsiBwZkhPp+LulqFgXyB/X9XDoPFEgTviscCE99P+/+/PjlwIAQ6vu5dB4vX2JAALvaaTu8OBCoc0m7q5deHAjYuaQzD68fAwJ3Luk4vC4MyAh4V17vAwxIE7orr9fLY0AIdFde7xpBg8B09cuBCAHtyrvmxoLAdrXm/h0DUgfvas3tdvPQEBdCV2632+3eHgWFwL9ftR12+yYg5CfIfi7pyu3ettvtdkAI2B4lnYfdbndBQiD28wGO9XUwiAFmP5e8zu0CxGOFgrgQu1pf93hcUJA84HlX/DoXIDkoCNB+3r8rj8fjgYIA7ef9u4KGoHXl8XheAUKAzyXdXXlezcFBwM8lXV29moODoHY1BwfB7QoSgtoVIARuj+rXFTAEtCvxPJKPoCBm1K6SyZ9gx3jorrodc0kObh/B7CrJzQJCELviZA1EJsQAtp9LuwKFENA9SjwPbhoSYgbbzwVGl0PeQGT/gg5sP+/tipuFhRCkruQORD5kFPa8qzAsJb/Ehj3v/uqKM8NDSANmPxd11cD5fgS8K5Q/3yOE2L7l9vYWALpKPuI4jsP7M3DhB+JcovyBbmoeJ0K/K45oASG0u0py09pAND7v0oM0qe7nSU4zCKG7R2kJofw5yGsFcVLcz1UOROXztah2pSWE6vkqatUO0qS2n3McFyXaQYiP2h6l0qH6qYCU9nMuGmUBon6P4qLRh9pCrJS6UjsQ9Q+cXKKwR3HRaPQfrSGESlfRFaI5pK7284OKg8aDiyl0tcIEpKV4j6LooPIoaYParlZ4NiBE2X5+7fiXMAIh6rpaIcxAeDVdUXHQem78A/n7ecfRYAlCphXsURTnQfG/JJC/RwkO9iCy9yjBEWcNoqyrlTiTEPldxZmEKOgqHt9iDyL782MlHo9vsQeRtZ9fO5iDyNyjOg72IIq62tqaYg0ib4+6drAJkd3VFJMQBV1NTe2yC5HTFZOQO+9R3fPYZQ4iu6spwcEq5PY9StTV7m6WLYjtVFlXu9nsCDMQi9+ruKtsNptOp9N/WTWHmJ/I2s8l88im0+n0/v7+Qc6mHcSiZI8a4Dg4OFhdVXGnRjHks9I9StpVx7G6uvrpU8yJCHmudD+/cR6CIxaLxR5gQJT/3ufOjljMaDQ6ASHN18q+P5fRVcdhNBqNQ9tWAEhL+ffnCuZhNBqNQ0NDQ0N+qpCmyu85lTu+fEkkEnYLDcio6u/PFXbVcSQSiYTJ5FQFeU7le0518xAcJpPJNKMMUqL0/Tk1h2l4eHh4RB6kPkHlHvKA827HsS/bMXx+nvqtdUcItfvt9OcxfH6eSqVSqa8/boU06d2/AnR8LRaLN0Pq9O6339aVckfqa7FYLB7fBKF0DxlhHsXj42PjQEgIqqspCEehUBgA8dG5347S1fFxoVAo2PpCWrrqqlAoFE5OWn0gBr11VTg5Oan0gdC63w45j1Svo2KVQujdQ8bq6qRSqVQkkAlq95DxuqpUKmUJhNb9dsyuKpVyeVQC0WNX5XK52gOx6LKrcrlabYghE5Tut+N2VS5Xq3YxhNo9ZNyuqtXqhQhipXS/HburavVCDKkzvUcN7qp60QPZ1GtXFxc1EYTV/fwaMmgetV4Iu/v5jV3VarW6CML2fj64q1qt9mc3hPX9fPA8ape9ED3sUX3mcXl5KYboY4/q5xgTQdjfz/t31QvRb1djYz0QvXYlhbC/n/ftqgeinz1KMo8eiG72KKlDBNHPHtXbVT+ILrsaG7vqgei0q6ur770QfXZ19V2A/DcAHpmC7NcZ4/wAAAAASUVORK5CYII="},633:function(e,t,s){"use strict";var a=s(21),n=s(22),o=s(24),r=s(23),i=s(1),c=s(0),l=function(e){Object(o.a)(s,e);var t=Object(r.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"card card-user",children:[Object(c.jsx)("div",{className:"image",children:Object(c.jsx)("img",{src:this.props.bgImage,alt:"..."})}),Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)("div",{className:"author",children:Object(c.jsxs)("a",{href:"#pablo",children:[Object(c.jsx)("img",{className:"avatar border-gray",src:this.props.avatar,alt:"..."}),Object(c.jsxs)("h4",{className:"title",children:[this.props.name,Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:this.props.userName})]})]})}),Object(c.jsx)("p",{className:"description text-center",children:this.props.description})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"text-center",children:this.props.socials})]})}}]),s}(i.Component);t.a=l},635:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return V}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(44),d=s(24),u=s(23),p=s(1),h=s(40),m=s(37),j=s(1060),b=s(413),g=s(36),f=s(39),x=s(52),O=s(13),v=s(9),w=s(325),y=(s(64),s(43)),N=s(12),S=s.n(N),_=(s(136),s(59)),C=s.n(_),M=s(83),I=s(111),k=s(213),z=s(214),P=s(211),E=s(215),R=s(326),D=(s(611),s(320)),T=s(8),A=s.n(T),B=s(48),F=s(154),U=(s(364),s(614),s(321)),q=s.n(U),L=s(0),V=function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var c,d;return Object(i.a)(this,n),(d=s.call(this,t)).handleSelectZoneChange=function(e){console.log(e.label);var t=d.state.newIncident;t.zone=e.label,d.setState({newIncident:t})},d.componentDidMount=function(){d._getIncidents(),d._getcategorys(),d._getIndicateurs(),d._getZones()},d.onShowAlert=function(){d.setState({visible:!0},(function(){window.setTimeout((function(){d.setState({visible:!1,message:[]})}),5e3)}))},d.onShowIncident=function(e){d.setState({inProgress:!1,showIncidentModal:!d.state.showIncidentModal}),e&&(console.log("element \xe0 afficher ",e),d.state.newIncident=e)},d.getMuiTheme=function(){return Object(M.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},d.handleShowIncidentModal=function(){d.setState((function(e){return{showIncidentModal:!e.showIncidentModal}})),!1===d.state.showIncidentModal&&d.setState({newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}})},d._getIncidents=Object(r.a)(o.a.mark((function t(){var s,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/incident/",t.prev=1,t.next=4,S.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a.data),n=a.data.results,console.log(n),d.setState({dataReady:!0,data:n,users:n.user_id}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),d.onDeleteIncident=function(e){e&&(console.log("element \xe0 supprimer ",e),d.setState({newIncident:e})),d.setState({show:!0})},d.deleteIncident=function(t){d.setState({inProgress:!0}),t.preventDefault(),console.log(d.state.newIncident.id);var s=e.config.url+"api/incident/";S.a.delete(s+d.state.newIncident.id).then((function(e){d.setState({inProgress:!d.state.inProgress}),d.setState({show:!1}),A()("Succes","Incident Supprime","Warning"),d._getIncidents(),console.log(e),d.setState({newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}})})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),e.response?(A()("Erreur","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},d.onRowClick=function(e,t){console.log("----RowClick"),console.log("rowData: ",e),console.log("rowMeta: ",t)},d.formatDate=function(e){var t=new Date(e),s=""+(t.getMonth()+1),a=""+t.getDate(),n=t.getFullYear();return s.length<2&&(s="0"+s),a.length<2&&(a="0"+a),[a,s,n].join("-")},d.handleMultiChange=function(e){var t=[];e.map((function(e,s){t.push(e.value)})),console.log(t),d.state.newIncident.category_ids=t},d.handleOneChange=function(e){d.state.newIncident.indicateur_id=e.value,console.log(e)},d.handleSelectChange=function(t){console.log(t.value);var s=d.state.newIncident;s.etat=t.value,d.setState({newIncident:s}),console.log(d.state.newIncident);var a=new FormData;a.append("etat",d.state.newIncident.etat),a.append("zone",d.state.newIncident.zone);var n=e.config.url+"api/incident/"+d.state.newIncident.id+"/";S.a.put(n,a).then((function(e){console.log(e),d.setState({changeState:!d.state.changeState}),A()("Succ\xe8s"," Statut modifi\xe9 avec succ\xe8s.","success")})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),d.setState({changeState:!d.state.changeState}),e.response?(A()("Erreur Ajout","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),A()("erreur","Veuillez reessayer","error")):(A()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},d.handleIndicateurChange=function(t){console.log(t.value);var s=d.state.newIncident;s.indicateur_id=t.value,d.setState({newIncident:s}),console.log(d.state.newIncident);var a=new FormData;a.append("indicateur_id",d.state.newIncident.indicateur_id),a.append("etat",d.state.newIncident.etat),a.append("zone",d.state.newIncident.zone),console.log(a);var n=e.config.url+"api/incident/"+d.state.newIncident.id+"/";S.a.put(n,a).then((function(e){console.log(e),d.setState({changeIndicateur:!d.state.changeIndicateur}),A()("Succes"," Indicateur modifie","success")})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),d.setState({changeIndicateur:!d.state.changeIndicateur}),e.response?(A()("Erreur Ajout","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),A()("erreur","Veuillez reessayer","error")):(A()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},d.handleCategoryChange=function(t){d.setState({inProgress:!d.state.inProgress}),console.log(d.state.newIncident.category_ids.length);for(var s=new FormData,a=0;a<d.state.newIncident.category_ids.length;a++)s.append("category_ids",d.state.newIncident.category_ids[a]);s.append("etat",d.state.newIncident.etat),s.append("zone",d.state.newIncident.zone),console.log(s);var n=e.config.url+"api/incident/"+d.state.newIncident.id+"/";S.a.put(n,s).then((function(e){console.log(e),d.setState({inProgress:!d.state.inProgress,changeCategory:!d.state.changeCategory}),A()("Succes"," Categories ajoutees","success")})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),d.setState({changeCategory:!d.state.changeCategory}),e.response?(A()("Erreur Ajout","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),A()("erreur","Veuillez reessayer","error")):(A()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},d._getcategorys=Object(r.a)(o.a.mark((function t(){var s,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/category/",t.prev=2,t.next=5,S.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:a=t.sent,console.log(a.data),n=a.data.results,d.setState({categories:n}),console.log(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),d._getIndicateurs=Object(r.a)(o.a.mark((function t(){var s,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/indicateur/",t.prev=2,t.next=5,S.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:a=t.sent,console.log(a.data),n=a.data.results,d.setState({indicateurs:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),d.handleModalOpen=function(){d.setState({newIncidentModal:!d.state.newIncidentModal})},d.addIncident=function(t){t.preventDefault(),d.setState({inProgress:!d.state.inProgress});var s=new FormData;s.append("title",d.state.newIncident.title),s.append("zone",d.state.newIncident.zone),s.append("description",d.state.newIncident.description),s.append("photo",d.state.newIncident.photo),s.append("video",d.state.newIncident.video),s.append("audio",d.state.newIncident.audio),s.append("lattitude",d.state.newIncident.lattitude),s.append("longitude",d.state.newIncident.longitude),s.append("user_id",sessionStorage.user_id),s.append("category_ids",d.state.newIncident.category_ids),s.append("indicateur_id",d.state.newIncident.indicateur_id);var a=e.config.url+"api/incident/";S.a.post(a,s).then((function(e){d.state.data.push(s),console.log("new_data",d.state.newIncident),d.setState({inProgress:!d.state.inProgress,newEluModal:!1,newIncidentModal:!1}),d._getIncidents(),A()("Succes","Incident ajoute avec succes","success")})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),e.response?(A()("erreur","Reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(A()("erreur","Reessayer","error"),console.log(e.request.data)):(A()("erreur","Reessayer","error"),console.log(e.message))}))},d.onChangeState=function(e){d.setState({changeState:!d.state.changeState,EditIncident:e})},d.onChangeIndicateur=function(e){d.setState({changeIndicateur:!d.state.changeIndicateur,EditIncident:e})},d.onChangeCategory=function(e){d.setState({changeCategory:!d.state.changeCategory,EditIncident:e})},d._getZones=Object(r.a)(o.a.mark((function t(){var s,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,S.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a.data),n=a.data.results,console.log(n),d.setState({zones:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),d.renderShowIncident=function(){var t,s,a,n,o,r=e.config.url.slice(0,-1),i=d.state.newIncident.photo,c=r+"".concat(i),l=d.state.newIncident.audio,u=r+"".concat(l),p=d.state.newIncident.video;null!=p&&("mov"==p.substr(p.length-3)&&(p=p.slice(0,-3)+"mp4"));var x=r+"".concat(p),O=function(){return Object(L.jsx)("div",{className:"loader",children:Object(L.jsx)("h2",{children:"Loading video..."})})},v=d.state.newIncident.lattitude,w=d.state.newIncident.longitude,y=[v,w];return Object(L.jsx)("div",{className:"modal fade",children:Object(L.jsxs)(h.a,{show:d.state.showIncidentModal,onHide:d.handleShowIncidentModal,children:[Object(L.jsxs)(m.a,{closeButton:!0,className:"map-color fs-20 t-center",children:["Details Incident",Object(L.jsx)("button",{className:"pull-right",style:{border:0},children:Object(L.jsxs)(j.a,{title:"Modifier",id:"dropdownEdit",className:"btn btn-primary",children:[Object(L.jsx)(b.a,{onClick:function(){return d.onChangeState(d.state.newIncident)},children:"Statut"}),Object(L.jsx)(b.a,{onClick:function(){return d.onChangeIndicateur(d.state.newIncident)},children:"Indicateur"}),Object(L.jsx)(b.a,{onClick:function(){return d.onChangeCategory(d.state.newIncident)},children:"Categories"})]})})]}),Object(L.jsxs)(g.a,{className:"col-sm-12",children:[Object(L.jsxs)("div",{className:"row mb-4 container-infos-modal-incident",children:[Object(L.jsxs)("div",{className:"col-sm-6 pb-1",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Titre:"}),Object(L.jsx)("p",{children:d.state.newIncident.title})]}),Object(L.jsxs)("div",{className:"col-sm-6 pb-1",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Zone:"}),Object(L.jsx)("p",{children:d.state.newIncident.zone})]}),Object(L.jsxs)("div",{className:"col-sm-6 pb-1",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Statut:"}),"declared"===d.state.newIncident.etat?Object(L.jsx)("p",{children:"D\xe9clar\xe9"}):Object(L.jsx)(L.Fragment,{}),"resolved"===d.state.newIncident.etat?Object(L.jsx)("p",{children:"R\xe9solu"}):Object(L.jsx)(L.Fragment,{}),"in_progress"===d.state.newIncident.etat?Object(L.jsx)("p",{children:"En cours"}):Object(L.jsx)(L.Fragment,{}),"taken_into_account"===d.state.newIncident.etat?Object(L.jsx)("p",{children:"Pris en compte"}):Object(L.jsx)(L.Fragment,{})]}),Object(L.jsxs)("div",{className:"col-sm-6 pb-1",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Auteur:"}),Object(L.jsx)("p",{children:(null===(t=d.state.newIncident)||void 0===t?void 0:t.user_id)?(null===(s=d.state.newIncident)||void 0===s||null===(a=s.user_id)||void 0===a?void 0:a.first_name)+" "+(null===(n=d.state.newIncident)||void 0===n||null===(o=n.user_id)||void 0===o?void 0:o.last_name):null})]})]}),Object(L.jsx)("hr",{className:"py-3"}),Object(L.jsx)("div",{className:"col-sm-12 pb-3",children:null===v||null===w||isNaN(w)||isNaN(v)?Object(L.jsx)("p",{className:"danger",children:"Coordonnees non renseign\xe9es ou invalide "}):Object(L.jsxs)(k.a,{center:y,zoom:13,children:[Object(L.jsx)(z.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),Object(L.jsxs)(P.a,{position:y,children:[Object(L.jsx)(E.a,{children:d.state.newIncident.title}),Object(L.jsx)(R.a,{center:y,radius:500,color:"red"})]})]})}),Object(L.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Description:"}),Object(L.jsx)("p",{children:d.state.newIncident.description})]}),Object(L.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(L.jsx)("label",{className:"map-color fs-18",children:"Image:"}),Object(L.jsx)("img",{src:c,alt:""})]}),Object(L.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Video:"}),Object(L.jsxs)("div",{className:"video",children:[Object(L.jsx)(F.Player,{fluid:!1,width:537,height:400,children:Object(L.jsx)("source",{src:x})}),d.state.videoIsLoading?Object(L.jsx)(O,{}):null]})]}),Object(L.jsxs)("div",{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Category:"}),Object(L.jsx)("p",{children:d.state.newIncident.category_ids})]}),Object(L.jsxs)("div",{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Indicateur:"}),Object(L.jsx)("p",{children:d.getIndicateurById(d.state.newIncident.indicateur_id)})]}),Object(L.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(L.jsxs)("label",{htmlFor:"code",className:"map-color fs-18",children:["Audio:"," "]}),Object(L.jsx)("br",{}),Object(L.jsxs)("audio",{controls:!0,src:u,children:["Your browser does not support the",Object(L.jsx)("code",{children:"audio"})," element."]})]})]}),Object(L.jsx)(f.a,{})]})})},d.state=(c={data:[],inProgress:!1,newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:"",indicateur_id:"",category_ids:[],etat:""},newIncidentModal:!1,showIncidentModal:!1,visible:!1,error:!1,message:[]},Object(a.a)(c,"newIncidentModal",!1),Object(a.a)(c,"users",[]),Object(a.a)(c,"categories",[]),Object(a.a)(c,"indicateurs",[]),Object(a.a)(c,"dateFilterChecked",!1),Object(a.a)(c,"zones",[]),Object(a.a)(c,"ChangeState",!1),Object(a.a)(c,"changeIndicateur",!1),Object(a.a)(c,"changeCategory",!1),Object(a.a)(c,"dataReady",!1),c),d.handleSelectChange=d.handleSelectChange.bind(Object(l.a)(d)),d.handleIndicateurChange=d.handleIndicateurChange.bind(Object(l.a)(d)),d.handleCategoryChange=d.handleCategoryChange.bind(Object(l.a)(d)),d}return Object(c.a)(n,[{key:"formatEtat",value:function(e){return"resolved"===e?Object(L.jsx)("label",{className:"admin-s",children:" R\xe9solu"}):"declared"===e?Object(L.jsx)("label",{className:"reporter-s",children:"D\xe9clare"}):"in_progress"===e?Object(L.jsx)("label",{className:"business-s",children:"En cours"}):"taken_into_account"===e?Object(L.jsx)("label",{className:"encharge-s",children:"Pris en compte"}):void 0}},{key:"getIndicateurById",value:function(e){for(var t="",s=0;s<this.state.indicateurs.length;s++){var a=this.state.indicateurs[s];a.id===e&&(t=a.name)}return t}},{key:"getCategoryById",value:function(e){var t=this,s=[];return void 0!=e&&e.map((function(e,a){for(var n=0;n<t.state.categories.length;n++){var o=t.state.categories[n];o.id===e&&s.push(o.name+" ")}})),s}},{key:"render",value:function(){var e,t,s,n,o=this,r=this.state.categories.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key"}})),i=this.state.zones.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key"}})),c=this.state.indicateurs.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key"}})),l={};"declared"==this.state.newIncident.etat&&(l={label:"D\xe9clar\xe9",value:"declared"}),"in_progress"==this.state.newIncident.etat&&(l={label:"En cours de r\xe9soluton",value:"En cours de r\xe9soluton"}),"taken_into_account"==this.state.newIncident.etat&&(l={label:"Pris en compte",value:"Pris en compte"}),"resolved"==this.state.newIncident.etat&&(l={label:"R\xe9solu",value:"R\xe9solu"});var d=Object(L.jsx)("div",{className:"modal fade",children:Object(L.jsxs)(h.a,{size:"sm",show:this.state.changeState,onHide:this.onChangeState,children:[Object(L.jsx)(m.a,{closeButton:!0,children:"Status Incident"}),Object(L.jsx)(g.a,{className:"col-sm-12",children:Object(L.jsx)(x.a,{encType:"multipart/form-data",children:Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsxs)("label",{htmlFor:"etat",children:["Statut Incident: ",this.state.newIncident.etat]}),Object(L.jsx)(B.a,{className:"basic-single",classNamePrefix:"select",defaultValue:l,name:"etat",options:[{label:"D\xe9clar\xe9",value:"declared"},{label:"Pris en compte",value:"taken_into_account"},{label:"En cours de r\xe9soluton",value:"in_progress"},{label:"R\xe9solu",value:"resolved"}],onChange:this.handleSelectChange})]})})}),Object(L.jsx)(f.a,{})]})}),u=Object(L.jsx)("div",{className:"modal fade",children:Object(L.jsxs)(h.a,{size:"sm",show:this.state.changeIndicateur,onHide:this.onChangeIndicateur,children:[Object(L.jsx)(m.a,{closeButton:!0,children:"Indicateur"}),Object(L.jsx)(g.a,{className:"col-sm-12",children:Object(L.jsx)(x.a,{encType:"multipart/form-data",children:Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"from",children:"Indicateurs:"}),Object(L.jsx)(B.a,{defaultValue:{label:this.getIndicateurById(this.state.newIncident.indicateur_id),value:this.state.newIncident.indicateur_id},name:"indicateurs",options:c,className:"basic-single map-color",onChange:this.handleIndicateurChange,classNamePrefix:"select"})]})})}),Object(L.jsx)(f.a,{})]})}),p=Object(L.jsx)("div",{className:"modal fade",children:Object(L.jsxs)(h.a,{size:"sm",show:this.state.changeCategory,onHide:this.onChangeCategory,children:[Object(L.jsx)(m.a,{closeButton:!0,children:"Categories :"}),Object(L.jsx)(g.a,{className:"col-sm-12",children:Object(L.jsx)(x.a,{encType:"multipart/form-data",children:Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsxs)("label",{htmlFor:"from",children:["Categories:",Object(L.jsx)("div",{children:this.getCategoryById(this.state.newIncident.category_ids).map((function(e,t){return Object(L.jsxs)("span",{children:[" ",e]})}))})]}),Object(L.jsx)(B.a,(e={className:"mt-4 col-md-6 col-offset-4",isMulti:!0,name:"categories",options:r},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"onChange",this.handleMultiChange),Object(a.a)(e,"classNamePrefix","select"),e))]})})}),Object(L.jsxs)(f.a,{children:[this.state.inProgress?Object(L.jsxs)(v.a,{className:"btn btn-primary",children:["Loading...",Object(L.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(L.jsx)(v.a,{className:"btn btn-primary",onClick:this.handleCategoryChange,children:"Ajouter"})," ",Object(L.jsx)(v.a,{className:"btn btn-danger",onClick:this.onChangeCategory,children:"Annuler"})]})]})}),j=Object(L.jsxs)(h.a,{show:this.state.newIncidentModal,onHide:this.handleModalOpen,children:[Object(L.jsx)(m.a,{closeButton:!0,children:"Nouveau Incident"}),Object(L.jsxs)(x.a,{encType:"multipart/form-data",children:[Object(L.jsxs)(g.a,{className:"col-sm-12",children:[Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"title",children:"Titre:"}),Object(L.jsx)("input",{className:"form-control",type:"text",id:"title",name:"title",value:this.state.newIncident.title,onChange:function(e){var t=o.state.newIncident;t.title=e.target.value,o.setState({newIncident:t})}})]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"zone",children:"Zone:"}),Object(L.jsx)(B.a,(t={className:"mt-4 col-md-6 col-offset-4",name:"zone",options:i},Object(a.a)(t,"className","basic-multi-select map-color"),Object(a.a)(t,"onChange",this.handleSelectZoneChange),Object(a.a)(t,"classNamePrefix","select"),t))]}),Object(L.jsxs)(O.a,{className:"col-sm-12",children:[Object(L.jsx)("label",{htmlFor:"from",children:"Description:"}),Object(L.jsx)("textarea",{className:"form-control",type:"text",id:"desc",name:"description",value:this.state.newIncident.description,onChange:function(e){var t=o.state.newIncident;t.description=e.target.value,o.setState({newIncident:t})}})]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"from",children:"Categories:"}),Object(L.jsx)(B.a,(s={className:"mt-4 col-md-6 col-offset-4",isMulti:!0,name:"categories",options:r},Object(a.a)(s,"className","basic-multi-select map-color"),Object(a.a)(s,"onChange",this.handleMultiChange),Object(a.a)(s,"classNamePrefix","select"),s))]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"from",children:"Indicateurs:"}),Object(L.jsx)(B.a,(n={className:"mt-4 col-md-6 col-offset-4",name:"indicateurs",options:c},Object(a.a)(n,"className","basic-multi-select map-color"),Object(a.a)(n,"onChange",this.handleOneChange),Object(a.a)(n,"classNamePrefix","select"),n))]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"photo_inc",children:"Photo:"}),Object(L.jsx)("input",{className:"form-control",type:"file",id:"photo_inc",name:"photo",onChange:function(e){var t=o.state.newIncident;t.photo=e.target.files[0],o.setState({newIncident:t})}})]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"video_inc",children:"Video:"}),Object(L.jsx)("input",{className:"form-control",type:"file",id:"video_inc",name:"video",onChange:function(e){var t=o.state.newIncident;t.video=e.target.files[0],o.setState({newIncident:t})}})]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"lat",children:"Lattitude:"}),Object(L.jsx)("input",{className:"form-control",type:"text",id:"lat",name:"lattitude",value:this.state.newIncident.lattitude,onChange:function(e){var t=o.state.newIncident;t.lattitude=e.target.value,o.setState({newIncident:t})}})]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"aud",children:"Audio:"}),Object(L.jsx)("input",{className:"form-control",type:"file",id:"aud",name:"audio",onChange:function(e){var t=o.state.newIncident;t.audio=e.target.files[0],o.setState({newIncident:t})}})]}),Object(L.jsxs)(O.a,{className:"col-sm-6",children:[Object(L.jsx)("label",{htmlFor:"long",children:"Longitude:"}),Object(L.jsx)("input",{className:"form-control",type:"text",id:"long",name:"longitude",value:this.state.newIncident.longitude,onChange:function(e){var t=o.state.newIncident;t.longitude=e.target.value,o.setState({newIncident:t},console.log(o.state))}})]})]}),Object(L.jsxs)(f.a,{children:[this.state.inProgress?Object(L.jsxs)(v.a,{className:"btn btn-primary",children:["Loading...",Object(L.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(L.jsx)(v.a,{className:"btn btn-primary",onClick:this.addIncident,children:"Ajouter"})," ",Object(L.jsx)(v.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]});if(this.state.show)return Object(L.jsxs)(w.a,{bsStyle:"danger",onDismiss:function(e){return o.setState({show:!1})},children:[Object(L.jsx)("h4",{children:"Suppresion"}),Object(L.jsx)("p",{children:"Voulez vous vraiment supprimer cet incident"}),Object(L.jsxs)("p",{children:[this.state.inProgress?Object(L.jsxs)(v.a,{className:"btn btn-primary",children:["Loading...",Object(L.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(L.jsx)(v.a,{bsStyle:"danger",onClick:this.deleteIncident,children:"Supprimer"}),Object(L.jsx)("span",{children:" or "}),Object(L.jsx)(v.a,{onClick:function(e){return o.setState({show:!1})},children:"Annuler"})]})]});var b=this.state.data,N=[{name:"title",label:"Titre",options:{filter:!0,filterType:"dropdown",sort:!0}},{name:"zone",label:"Zone",options:{filter:!0,filterType:"dropdown",sort:!1}},{name:"description",label:"Description",options:{filter:!1,sort:!1}},{name:"user_id",label:"Utilisateur",options:{filter:!1,sort:!1}},{name:"categories",label:"Categorie",options:{filter:!0,filterType:"dropdown",sort:!0}},{name:"indicateur",label:"Indicateur",options:{filter:!0,filterType:"dropdown",sort:!0}},{name:"status",label:"Etat",options:{filter:!0,filterType:"custom",sort:!0,customBodyRender:function(e,t,s){return"resolved"===e?Object(L.jsx)("label",{className:"admin-s",children:" R\xe9solu"}):"declared"===e?Object(L.jsx)("label",{className:"reporter-s",children:"D\xe9clare"}):"in_progress"===e?Object(L.jsx)("label",{className:"business-s",children:"En cours"}):"taken_into_account"===e?Object(L.jsx)("label",{className:"encharge-s",children:"Pris en compte"}):null},customFilterListOptions:{render:function(e){return e},update:function(e,t,s){return e[s]=[],e}},filterOptions:{logic:function(e,t,s){return!!(t.length&&t.length>1)&&!t.includes(e)},display:function(e,t,s,a){return Object(L.jsxs)("div",{className:"form-group pos-relative mb-4",children:[Object(L.jsx)("label",{className:"label-state",htmlFor:"etat",children:"Etat"}),Object(L.jsxs)("select",{className:"form-control select-state",name:"etat",id:"etat",multiple:!1,value:e[s]||[],onChange:function(n){e[s]=n.target.value,t(e[s],s,a)},children:[Object(L.jsx)("option",{value:"",children:"All"}),[{label:"D\xe9clar\xe9",value:"declared"},{label:"Pris en compte",value:"taken_into_account"},{label:"En cours de r\xe9soluton",value:"in_progress"},{label:"R\xe9solu",value:"resolved"}].map((function(e){return Object(L.jsx)("option",{value:e.value,children:e.label},e.value)}))]})]})}}}},{name:"created_at",label:"Date Creation",options:{sort:!0,filter:!0,filterType:"dropdown"}},{name:"actions",label:"Action",options:{filter:!1,sort:!1,export:!1}}],S=this.state.data.map((function(e,t){var s="";return s=null!=e.user_id?e.user_id.first_name+" "+e.user_id.last_name:"indefini",[e.title,e.zone,e.description,s,o.getCategoryById(e.category_ids),o.getIndicateurById(e.indicateur_id),e.etat,o.formatDate(e.created_at),Object(L.jsxs)("div",{className:"btn-group",children:[Object(L.jsx)("a",{onClick:function(t){return o.onShowIncident(e)},className:"btn btn-default btn-xs map-color nb","data-id":e.id,children:Object(L.jsx)("i",{className:"fas fa-eye fa-x"})}),Object(L.jsx)(v.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(t){o.onDeleteIncident(e),o.setState({inProgress:!1})},children:Object(L.jsx)("i",{className:"fas fa-trash fa-x"})})]})]}));return Object(L.jsxs)("div",{className:"content",children:[Object(L.jsx)(v.a,{className:"pull-right",style:y.btnStyle,children:Object(L.jsxs)(D.CSVLink,{filename:"incidents.csv",data:b,headers:[{label:"Titre",key:"title"},{label:"Description",key:"description"},{label:"Zone",key:"zone"},{label:"Lattitude",key:"lattitude"},{label:"Longitude",key:"longitude"},{label:"Etat",key:"etat"},{label:"Utilisateur",key:"user_id"},{label:"Indicateur",key:"indicateur_id"},{label:"Categorie",key:"category_id"}],className:"pull-right",children:[Object(L.jsx)("i",{className:"fa fa-download"}),"Export CSV"]})}),Object(L.jsxs)(v.a,{style:y.btnStyle,onClick:this.handleModalOpen,className:"pull-right",children:[Object(L.jsx)("i",{className:"fa fa-plus"}),"Nouveau"]}),this.state.dataReady?Object(L.jsx)(I.a,{theme:this.getMuiTheme(),children:Object(L.jsx)(C.a,{title:"Liste des Incidents",data:S,columns:N,options:{filter:!0,filterType:"dropdown",responsive:"stacked",search:!0,hasIndex:!0,emptyTable:"No data available in table"}})}):Object(L.jsx)(q.a,{type:"Audio",color:"#00BFFF",height:100,width:100,timeout:3e3}),this.renderShowIncident(),j,d,u,p]})}}]),n}(p.Component)}).call(this,s(45))},639:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return T}));var a=s(17),n=s(10),o=s.n(n),r=s(156),i=s(20),c=s(21),l=s(22),d=s(24),u=s(23),p=s(1),h=s(9),m=s(40),j=s(37),b=s(36),g=s(52),f=s(73),x=s(32),O=s(13),v=s(325),w=s(39),y=(s(64),s(43),s(12)),N=s.n(y),S=s(8),_=s.n(S),C=s(48),M=s(102),I=(s(389),s(142),s(59)),k=s.n(I),z=s(83),P=s(111),E=s(141),R=s.n(E),D=s(0),T=function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=s.call(this,t)).componentDidMount=function(){a._getRapports()},a._getRapports=Object(i.a)(o.a.mark((function t(){var s,n,i,c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/rapport/",t.prev=2,t.next=5,N.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:return n=t.sent,i=n.data.results,t.next=9,a._getIncidents();case 9:i.forEach((function(e){e.customIncidents=[],e.incidents.forEach((function(t){a.state.incidents.forEach((function(s){t===s.id&&(e.customIncidents=[].concat(Object(r.a)(e.customIncidents),[s]))}))}))})),console.log("allRapport=>",i),a.setState({data:i,count_rapports:i.length}),c=0,l=0,a.setState({rapports_dispo:c,rapports_nondispo:l}),a.state.data.map((function(e,t){return e.disponible?(c+=1,a.setState({rapports_dispo:c})):(l+=1,a.setState({rapports_nondispo:l}))})),console.log(i),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),console.log(t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[2,19]])}))),a._getIncidents=Object(i.a)(o.a.mark((function t(){var s,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.zone,s=e.config.url+"api/incident/",t.prev=2,t.next=5,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:n=t.sent,r=n.data,console.log("data incident",r),a.setState({incidents:r.results}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),a.getMuiTheme=function(){return Object(z.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},a.handleModalOpen=function(){a.setState({showRapportModal:!a.state.showRapportModal})},a.onShowRapport=function(e){a.setState({inProgress:!1,showRapportModal:!a.state.showRapportModal}),e&&(console.log("element \xe0 afficher ",e),a.setState({newRapport:e}))},a.openRapport=function(e){a.setState({inProgress:!1,open:!a.state.open}),e&&(console.log("element \xe0 soummettre ",e),a.setState({uploadItem:e}))},a.uploadRapportModal=function(){a.setState((function(e){return{open:!e.open}})),!1===a.state.open&&a.setState({uploadItem:{details:"",zone:"",date_livraison:"",disponible:"",incident:""}})},a.onFileChange=function(e){e.persist();var t=a.state.file;t=e.target.files[0],a.setState({file:t},(function(){return console.log("file",e.target.files[0].name)}))},a.handleShowRapportModal=function(){a.setState((function(e){return{showRapportModal:!e.showRapportModal}})),!1===a.state.showRapportModal&&a.setState({newRapport:{details:"",zone:"",date_livraison:"",disponible:"",incident:""}})},a.uploadRapport=function(){var t=Object(i.a)(o.a.mark((function t(s){var n,r,i,c,l,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),n=a.state,r=n.uploadItem,i=n.file,a.setState({inProgress:!0}),r.disponible=!0,r.file=i,console.log("uploadItem=>",r),c=e.config.url+"api/rapport/"+r.id+"/",t.prev=7,!i){t.next=19;break}return(l=new FormData).append("disponible",r.disponible),l.append("file",r.file),t.next=14,N.a.put(c,l,{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}});case 14:d=t.sent,console.log("upload Response=>",d),_()("Succ\xe8s","Votre rapport a \xe9t\xe9 soumis","success"),a.setState({inProgress:!1,open:!1,uploadItem:{}}),a._getRapports();case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(7),a.setState({inProgress:!1}),t.t0.response?(console.log(t.t0.response.status),_()("Erreur","Erreur lors de l'ajout, veuillez reessayer","error"),console.log(t.t0.response.data)):t.t0.request?console.log(t.t0.request.data):console.log(t.t0.message);case 25:case"end":return t.stop()}}),t,null,[[7,21]])})));return function(e){return t.apply(this,arguments)}}(),a.updateReport=function(t){t.preventDefault(),a.state.newRapport.statut="edit",a.state.newRapport.user_id&&(a.state.newRapport.user_id=a.state.newRapport.user_id.id);var s=e.config.url+"api/rapport/"+a.state.newRapport.id+"/";N.a.put(s,a.state.newRapport,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),_()("Succ\xe8s","Votre rapport a \xe9t\xe9 command\xe9.","success"),a.setState({inProgress:!a.state.inProgress,showRapportModal:!1,newRapport:{}}),a._getRapports()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(console.log(e.response.status),_()("Erreur","Erreur lors de l'ajout, veuillez reessayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},a.onDelete=function(e){a.setState({itemDelete:e}),_()({title:"Voulez vous vraiment annuler ce rapport ",icon:"warning",buttons:["Non","Oui"],dangerMode:!0}).then((function(e){e?a.deleteRapport():_()("Suppression annul\xe9e!")}))},a.onDeleteRapport=function(e){e&&(window.scrollTo(0,0),console.log("element \xe0 supprimer ",e),a.setState({itemDelete:e})),a.setState({show:!0})},a.deleteRapport=function(){a.setState({inProgress:!0}),a.state.itemDelete.statut="canceled",a.state.itemDelete.user_id&&(a.state.itemDelete.user_id=a.state.itemDelete.user_id.id);var t=e.config.url+"api/rapport/"+a.state.itemDelete.id+"/",s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}};N.a.delete(t,s).then((function(e){a.setState({inProgress:!a.state.inProgress}),a.setState({show:!1}),a._getRapports(),_()("Rapport annul\xe9 !",{icon:"success"}),console.log(e),a.setState({itemDelete:{}})})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(_()("Erreur","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message),a.setState({show:!1})}))},a.handleMultiChange=function(e,t){console.log("test=>",t);var s=a.state.newRapport;a.state.user;if("select-option"===t.action){var n=s.incidents.findIndex((function(e){return e===t.option.value}));console.log("int",String(t.option.value)),-1===n&&s.incidents.push(String(t.option.value))}if("remove-value"===t.action){var o=s.incidents.findIndex((function(e){return parseInt(e)===t.removedValue.value}));-1!==o&&s.incidents.splice(o)}"clear"===t.action&&(s.incidents=[]),a.setState({newRapport:s})},a.state={data:[],inProgress:!1,newRapport:{},newIncident:{title:"",zone:"",description:"",photo:""},incidents:[],newRapportModal:!1,showRapportModal:!1,visible:!1,error:!1,message:[],count_rapports:"",rapports_dispo:"",rapports_nondispo:"",show:!1,itemDelete:{},open:!1,uploadItem:{},file:null},a}return Object(l.a)(n,[{key:"createLegend",value:function(e){for(var t=[],s=0;s<e.names.length;s++){var a="fa fa-circle text-"+e.types[s];t.push(Object(D.jsx)("i",{className:a},s)),t.push(" "),t.push(e.names[s])}return t}},{key:"render",value:function(){var e,t=this,s=this.state.incidents.map((function(e){return{value:e.id,label:e.title,key:e.id+"unique-key"}})),n=[];if(this.state.newRapport&&void 0!==this.state.newRapport.incidents&&this.state.newRapport.incidents.length&&s.length)for(var o=0;o<s.length;o++)for(var r=s[o],i=0;i<this.state.newRapport.incidents.length;i++){var c=this.state.newRapport.incidents[i];parseInt(c)===parseInt(r.value)&&n.push(r)}var l=this.state.data.map((function(e,s){var a="https://backend-dashboard.map-action.com".concat(e.file),n="";return n=e.disponible?"oui":"non",[e.details,e.zone,R()(e.date_livraison).format("DD/MM/YYYY"),n,e.customIncidents.map((function(e){return e.title+" ,"})),"new"===e.statut&&!1===e.disponible?Object(D.jsx)("span",{className:"label label-info",children:"Nouveau"}):"edit"===e.statut&&!1===e.disponible?Object(D.jsx)("span",{className:"label label-warning",children:"Modifi\xe9"}):"canceled"===e.statut&&!1===e.disponible?Object(D.jsx)("span",{className:"label label-danger",children:"Annul\xe9"}):!0===e.disponible?Object(D.jsx)("span",{className:"label label-success",children:"Trait\xe9"}):null,Object(D.jsx)("div",{className:"btn-group",children:"new"===e.statut&&!1===e.disponible||"edit"===e.statut&&!1===e.disponible?Object(D.jsx)(h.a,{onClick:function(){return t.openRapport(e)},className:"btn btn-default btn-xs map-color nb",children:Object(D.jsx)("i",{className:"fas fa-folder-open",children:"Ouvrir un fichier"})}):!0===e.disponible&&(null===e||void 0===e?void 0:e.file)?Object(D.jsx)("a",{className:"label label-success",target:"_blank",rel:"noopener noreferrer",href:a,download:!0,children:"Telecharger le rapport"}):Object(D.jsx)("span",{className:"label label-warning",children:"Fichier non disponible"})}),Object(D.jsxs)("div",{className:"btn-group",children:[Object(D.jsx)(h.a,{onClick:function(s){return t.onShowRapport(e)},className:"btn btn-default btn-xs map-color nb",children:Object(D.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(D.jsx)(h.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(s){t.onDelete(e),t.setState({inProgress:!1})},children:Object(D.jsx)("i",{className:"fas fa-trash fa-x"})})," "]})]})),d=Object(D.jsxs)(m.a,{show:this.state.open,onHide:this.uploadRapportModal,children:[Object(D.jsx)(j.a,{closeButton:!0,children:Object(D.jsx)("span",{className:"map-color",children:"Rapport: ".concat(this.state.uploadItem.details)})}),Object(D.jsx)(b.a,{children:Object(D.jsxs)(g.a,{encType:"multipart/form-data",children:[Object(D.jsx)(f.a,{children:Object(D.jsx)(x.a,{md:6,children:Object(D.jsx)(O.a,{children:Object(D.jsx)("input",{type:"file",name:"file",onChange:function(e){return t.onFileChange(e)},placeholder:"upload rapport"})})})}),Object(D.jsxs)(f.a,{children:[Object(D.jsxs)(x.a,{md:6,children:[this.state.inProgress?Object(D.jsxs)(h.a,{className:"btn  btn-white btn-round",children:["Loading...",Object(D.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(D.jsx)(h.a,{className:"btn btn-white btn-round",onClick:this.uploadRapport,disabled:!this.state.file,children:"Envoyer"})," "]}),Object(D.jsx)(x.a,{md:6,children:Object(D.jsx)(O.a,{children:Object(D.jsx)(h.a,{className:"btn btn-red btn-round",onClick:this.uploadRapportModal,children:"Annuler"})})})]})]})})]});return Object(D.jsxs)("div",{className:"content",children:[this.state.show&&Object(D.jsxs)(v.a,{bsStyle:"danger",onDismiss:function(e){return t.setState({show:!1})},children:[Object(D.jsx)("h4",{children:"Attention!!!"}),Object(D.jsx)("p",{children:"Voulez vous vraiment annuler ce rapport ?"}),Object(D.jsxs)("p",{children:[this.state.inProgress?Object(D.jsxs)(h.a,{className:"btn btn-primary",children:["Loading...",Object(D.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(D.jsx)(h.a,{bsStyle:"danger",onClick:this.deleteRapport,children:"Oui"}),Object(D.jsx)("span",{children:" or "}),Object(D.jsx)(h.a,{onClick:function(e){return t.setState({show:!1})},children:"Annuler"})]})]}),Object(D.jsxs)(f.a,{children:[Object(D.jsx)(x.a,{lg:4,sm:6,children:Object(D.jsx)(M.a,{bigIcon:Object(D.jsx)("i",{className:"pe-7s-file text-warning"}),statsText:"Rapports Commandes",statsValue:this.state.count_rapports,statsIcon:Object(D.jsx)("i",{className:"fa fa-refresh"}),statsIconText:"Vos Rapports"})}),Object(D.jsx)(x.a,{lg:4,sm:6,children:Object(D.jsx)(M.a,{bigIcon:Object(D.jsx)("i",{className:"pe-7s-wallet text-success"}),statsText:"Rapports Disponibles",statsValue:this.state.rapports_dispo,statsIcon:Object(D.jsx)("i",{className:"fa fa-calendar-o"}),statsIconText:"Rapports livres"})}),Object(D.jsx)(x.a,{lg:4,sm:6,children:Object(D.jsx)(M.a,{bigIcon:Object(D.jsx)("i",{className:"pe-7s-graph1 text-danger"}),statsText:"Rapports Non Disponibles",statsValue:this.state.rapports_nondispo,statsIcon:Object(D.jsx)("i",{className:"fa fa-clock-o"}),statsIconText:"Rapports en attente"})})]}),Object(D.jsx)(P.a,{theme:this.getMuiTheme(),children:Object(D.jsx)(k.a,{title:"Liste des Rapports",data:l,columns:[{name:"details",label:"Details",options:{filter:!0,sort:!0}},{name:"zone",label:"Zone",options:{filter:!0,sort:!1}},{name:"date_livraison",label:"Date Livraison",options:{filter:!0,sort:!1}},{name:"disponible",label:"Disponible",options:{filter:!0,sort:!1}},{name:"incident",label:"Incident",options:{filter:!0,sort:!1}},{name:"status",label:"Etat",options:{sort:!0,filter:!1,filterType:"dropdown"}},{name:"rapport",label:"Rapport",options:{filter:!1,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0}})}),d,Object(D.jsx)("div",{className:"modal fade",children:Object(D.jsxs)(m.a,{show:this.state.showRapportModal,onHide:this.handleShowRapportModal,children:[Object(D.jsx)(j.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Details Rapport"}),Object(D.jsxs)(g.a,{encType:"multipart/form-data",children:[Object(D.jsxs)(b.a,{className:"col-sm-12",children:[Object(D.jsxs)(O.a,{className:"col-sm-6",children:[Object(D.jsx)("p",{className:"title mt-3",children:"Type de Rapports:"}),Object(D.jsx)("div",{children:[{id:1,value:"zone",label:"Zone"},{id:2,value:"detaille",label:"Detaille"}].map((function(e,s){return Object(D.jsxs)("div",{children:[Object(D.jsx)("input",{type:"radio",name:"type",checked:t.state.newRapport.type&&t.state.newRapport.type===e.value,value:e.value,onChange:function(e){var s=t.state.newRapport;s.type=e.target.value,t.setState({newRapport:s},console.log(t.state.newRapport))}}),Object(D.jsx)("label",{children:e.label})]},s)}))})]}),Object(D.jsxs)(O.a,{className:"col-sm-6",children:[Object(D.jsx)("p",{className:"title mt-3",children:"Validation du rapport:"}),Object(D.jsxs)("div",{children:[Object(D.jsx)("input",{type:"checkbox",name:"disponible",id:"disponible",defaultChecked:this.state.newRapport.disponible,onChange:function(e){var s=t.state.newRapport;!0===e.target.checked?(s.disponible=!0,t.setState({newRapport:s},console.log(t.state.newRapport))):(s.disponible=!1,t.setState({newRapport:s},console.log(t.state.newRapport)))}}),Object(D.jsx)("label",{htmlFor:"disponible",children:"Disponible"})]})]}),Object(D.jsxs)(O.a,{className:"col-sm-12",children:[Object(D.jsx)("label",{htmlFor:"from",children:"Details:"}),Object(D.jsx)("textarea",{className:"form-control",type:"text",id:"prenom",name:"details",value:this.state.newRapport.details,onChange:function(e){var s=t.state.newRapport;s.details=e.target.value,t.setState({newRapport:s},console.log(t.state.newRapport))}})]}),Object(D.jsxs)(O.a,{className:"col-sm-3",children:[Object(D.jsx)("label",{htmlFor:"from",children:"Zone:"}),Object(D.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"zone",value:sessionStorage.zone,onChange:function(e){var s=t.state.newRapport;s.zone=e.target.value,t.setState({newRapport:s},console.log(t.state.newRapport))},disabled:!0})]}),Object(D.jsxs)(O.a,{className:"col-sm-4",children:[Object(D.jsx)("label",{htmlFor:"",children:"Type:"}),Object(D.jsx)(C.a,(e={className:"mt-4 col-md-6 col-offset-4",isMulti:!0,name:"incidents",value:n,options:s},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"onChange",this.handleMultiChange),Object(a.a)(e,"classNamePrefix","select"),e))]}),Object(D.jsxs)(O.a,{className:"col-sm-5",children:[Object(D.jsx)("label",{htmlFor:"phone",children:"Date livraison:"}),Object(D.jsx)("input",{className:"form-control",type:"date",id:"phone",name:"date_livraison",value:this.state.newRapport.date_livraison,onChange:function(e){var s=t.state.newRapport;s.date_livraison=e.target.value,t.setState({newRapport:s},console.log(t.state.newRapport))}})]}),Object(D.jsx)("p",{}),Object(D.jsxs)(O.a,{className:"col-sm-6",children:[this.state.inProgress?Object(D.jsxs)(h.a,{className:"btn  btn-white btn-round",children:["Loading...",Object(D.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(D.jsx)(h.a,{className:"btn btn-white btn-round",onClick:this.updateReport,children:"Modifer"})," "]}),Object(D.jsx)(O.a,{className:"col-sm-6",children:Object(D.jsx)(h.a,{className:"btn btn-red btn-round",onClick:this.handleModalOpen,children:"Annuler"})}),Object(D.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Details:"}),Object(D.jsx)("p",{children:this.state.newRapport.details})]}),Object(D.jsxs)("div",{className:"col-sm-6",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Zone:"}),Object(D.jsx)("p",{children:this.state.newRapport.zone})]}),Object(D.jsx)("hr",{}),Object(D.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Date Livraison:"}),Object(D.jsx)("p",{children:this.state.newRapport.date_livraison})]}),Object(D.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Incident:"}),Object(D.jsx)("p",{children:this.state.newRapport.incident})]}),this.state.newRapport.user_id?Object(D.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(D.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Prenom Organisation :"}),Object(D.jsx)("p",{children:this.state.newRapport.user_id.first_name})]}),Object(D.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Nom Organisation :"}),Object(D.jsx)("p",{children:this.state.newRapport.user_id.last_name})]}),Object(D.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Email Organisation :"}),Object(D.jsx)("p",{children:this.state.newRapport.user_id.email})]}),Object(D.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(D.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"T\xe9l\xe9phone Organisation :"}),Object(D.jsx)("p",{children:this.state.newRapport.user_id.phone})]})]}):null]}),Object(D.jsx)(w.a,{})]})]})})]})}}]),n}(p.Component)}).call(this,s(45))},64:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(21),n=s(22),o=s(24),r=s(23),i=s(1),c=s(0),l=function(e){Object(o.a)(s,e);var t=Object(r.a)(s);function s(){return Object(a.a)(this,s),t.apply(this,arguments)}return Object(n.a)(s,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"card"+(this.props.plain?" card-plain":""),children:[Object(c.jsxs)("div",{className:"header"+(this.props.hCenter?" text-center":""),children:[Object(c.jsx)("h4",{className:"title",children:this.props.title}),Object(c.jsx)("p",{className:"category",children:this.props.category})]}),Object(c.jsxs)("div",{className:"content"+(this.props.ctAllIcons?" all-icons":"")+(this.props.ctTableFullWidth?" table-full-width":"")+(this.props.ctTableResponsive?" table-responsive":"")+(this.props.ctTableUpgrade?" table-upgrade":""),children:[this.props.content,Object(c.jsxs)("div",{className:"footer",children:[this.props.legend,null!=this.props.stats?Object(c.jsx)("hr",{}):"",Object(c.jsxs)("div",{className:"stats",children:[Object(c.jsx)("i",{className:this.props.statsIcon})," ",this.props.stats]})]})]})]})}}]),s}(i.Component);t.b=l},640:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return C}));var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(1),u=s(9),p=s(40),h=s(37),m=s(36),j=s(52),b=s(13),g=s(39),f=(s(64),s(43),s(12)),x=s.n(f),O=(s(102),s(59)),v=s.n(O),w=s(83),y=s(111),N=s(8),S=s.n(N),_=s(0),C=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=s.call(this,t)).componentDidMount=function(){i._getIndicateurs()},i._getIndicateurs=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/indicateur/",t.prev=2,t.next=5,x.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:a=t.sent,o=a.data.results,i.setState({data:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),i.getMuiTheme=function(){return Object(w.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},i.handleModalOpen=function(){i.setState({showIndicModal:!i.state.showIndicaModal})},i.handleModalClose=function(){i.setState({showIndicModal:!1})},i.handleEditModalToggle=function(){i.setState({editIndicModal:!i.state.editIndicModal})},i.onAddIndicateur=function(t){t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var s={name:i.state.newIndic.name},a=e.config.url+"api/indicateur/";console.log(s),x.a.post(a,s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,showRapportModal:!1,showIncidentModal:!1}),i._getIndicateurs(),S()("Succes","Indicateur Ajoute avec succes","success")})).catch((function(e){i.setState({inProgress:!i.state.inProgress}),e.response?(console.log(e.response.status),S()("Erreur","Erreur lors de l'ajout, veuillez reessayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},i.onEditIndicateur=function(t){var s;t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var a=e.config.url+"api/indicateur/"+(null===(s=i.state.editIndic)||void 0===s?void 0:s.id)+"/";console.log(i.state.editIndic),x.a.put(a,i.state.editIndic,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,editIndic:{},editIndicModal:!1}),i._getIndicateurs(),S()("Succes","Indicateur Ajoute avec succes","success")})).catch((function(e){var t,s;if(i.setState({inProgress:!i.state.inProgress}),null===e||void 0===e?void 0:e.response)console.log(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status),S()("Erreur","Erreur lors de la modification, veuillez reessayer","error"),console.log(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data);else if(null===e||void 0===e?void 0:e.request){var a;console.log(null===e||void 0===e||null===(a=e.request)||void 0===a?void 0:a.data)}else console.log(null===e||void 0===e?void 0:e.message)}))},i.onDeleteIndicateur=function(){var t;i.setState({inProgress:!i.state.inProgress});var s=e.config.url+"api/indicateur/"+(null===(t=i.state.editIndic)||void 0===t?void 0:t.id)+"/";console.log(i.state.editIndic),x.a.delete(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,editIndic:{},editIndicModal:!1}),S()("Indicateur supprim\xe9!",{icon:"success"}),i._getIndicateurs()})).catch((function(e){var t,s;if(i.setState({inProgress:!i.state.inProgress}),null===e||void 0===e?void 0:e.response)console.log(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status),S()("Erreur","Erreur lors de la suppression, veuillez reessayer plus tard","error"),console.log(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data);else if(null===e||void 0===e?void 0:e.request){var a;console.log(null===e||void 0===e||null===(a=e.request)||void 0===a?void 0:a.data)}else console.log(null===e||void 0===e?void 0:e.message)}))},i.handleEdit=function(e){i.setState({editIndic:e,editIndicModal:!0})},i.onDelete=function(e,t){e.preventDefault(),i.setState({editIndic:t}),S()({title:"\xcates vous s\xfbr de vouloir supprimer cet indicateur?",icon:"warning",buttons:["Non","Oui"],dangerMode:!0}).then((function(e){e?i.onDeleteIndicateur():S()("Suppression annul\xe9e!")}))},i.state={data:[],inProgress:!1,newIndic:{name:""},editIndic:{},editIndicModal:!1,newIndicateurModal:!1},i}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.data.map((function(t,s){return[t.id,t.name,Object(_.jsxs)("div",{className:"btn-group",children:[Object(_.jsx)(u.a,{onClick:function(s){return e.handleEdit(t)},className:"btn btn-default btn-xs map-color nb",children:Object(_.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(_.jsx)(u.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(s){e.onDelete(s,t),e.setState({inProgress:!1})},children:Object(_.jsx)("i",{className:"fas fa-trash fa-x"})})," "]})]}));return Object(_.jsxs)("div",{className:"content",children:[Object(_.jsxs)(u.a,{onClick:this.handleModalOpen,className:"pull-right",children:[" ","Nouveau Indicateur"]}),Object(_.jsx)(y.a,{theme:this.getMuiTheme(),children:Object(_.jsx)(v.a,{title:"Liste des Indicateurs",data:t,columns:[{name:"id",label:"Id",options:{filter:!0,sort:!0}},{name:"name",label:"Name",options:{filter:!0,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0,selectableRows:!1}})}),Object(_.jsx)("div",{className:"modal fade",children:Object(_.jsxs)(p.a,{show:this.state.showIndicModal,onHide:this.handleModalClose,children:[Object(_.jsx)(h.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Nouveau Indicateur"}),Object(_.jsx)(m.a,{className:"col-sm-12",children:Object(_.jsxs)(j.a,{children:[Object(_.jsxs)(b.a,{className:"col-sm-12",children:[Object(_.jsx)("label",{htmlFor:"name",children:"Libelle de l'indicateur:"}),Object(_.jsx)("input",{className:"form-control",type:"text",id:"name",name:"name",value:this.state.newIndic.name,onChange:function(t){var s=e.state.newIndic;s.name=t.target.value,e.setState({newIndic:s},console.log(e.state))}})]}),Object(_.jsxs)(b.a,{className:"col-sm-12",children:[this.state.inProgress?Object(_.jsxs)(u.a,{className:"btn  btn-white btn-round",children:["Loading...",Object(_.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(_.jsx)(u.a,{className:"btn btn-white btn-round",onClick:this.onAddIndicateur,children:"Ajouter"})," ",Object(_.jsx)(u.a,{className:"btn btn-red btn-round",onClick:this.handleModalClose,children:"Annuler"})]})]})}),Object(_.jsx)(g.a,{})]})}),Object(_.jsx)("div",{className:"modal fade",children:Object(_.jsxs)(p.a,{show:this.state.editIndicModal,onHide:this.handleEditModalToggle,children:[Object(_.jsx)(h.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Modifier Indicateur"}),Object(_.jsx)(m.a,{className:"col-sm-12",children:Object(_.jsxs)(j.a,{children:[Object(_.jsxs)(b.a,{className:"col-sm-12",children:[Object(_.jsx)("label",{htmlFor:"name",children:"Libelle de l'indicateur:"}),Object(_.jsx)("input",{className:"form-control",type:"text",id:"name",name:"name",value:this.state.editIndic.name,onChange:function(t){var s=e.state.editIndic;s.name=t.target.value,e.setState({editIndic:s})}})]}),Object(_.jsxs)(b.a,{className:"col-sm-12",style:{display:"flex"},children:[this.state.inProgress?Object(_.jsxs)(u.a,{className:"btn  btn-white btn-round",style:{marginRight:"5px"},children:["Loading...",Object(_.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(_.jsx)(u.a,{className:"btn btn-white btn-round",onClick:this.onEditIndicateur,style:{marginRight:"5px"},children:"Modifier"})," ",Object(_.jsx)(u.a,{className:"btn btn-red btn-round",onClick:this.handleEditModalToggle,style:{marginLeft:"5px"},children:"Annuler"})]})]})}),Object(_.jsx)(g.a,{})]})})]})}}]),a}(d.Component)}).call(this,s(45))},641:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return P}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(24),d=s(23),u=s(1),p=s(40),h=s(37),m=s(52),j=s(36),b=s(13),g=s(39),f=s(9),x=s(8),O=s.n(x),v=(s(64),s(43)),w=s(12),y=s.n(w),N=s(48),S=(s(136),s(59)),_=s.n(S),C=s(83),M=s(111),I=(s(614),s(321)),k=s.n(I),z=s(0),P=function(t){Object(l.a)(n,t);var s=Object(d.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=s.call(this,t)).componentDidMount=function(){a._getUsers()},a._getUsers=Object(r.a)(o.a.mark((function t(){var s,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/user/",t.prev=1,t.next=4,y.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token)}});case 4:n=t.sent,a.setState({dataReady:!0,data:n.data.results}),console.log(a.state.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),a.__addUser=function(t){t.preventDefault(),a.setState({inProgress:!a.state.inProgress});var s={first_name:a.state.newUser.first_name,last_name:a.state.newUser.last_name,email:a.state.newUser.email,phone:a.state.newUser.phone,adress:a.state.newUser.adress,user_type:a.state.newUser.user_type,password:"mapaction2020"},n=e.config.url+"api/user/";console.log(s),y.a.post(n,s).then((function(e){console.log(e),a.state.data.push(s),a.setState({inProgress:!a.state.inProgress,newUserModal:!1,newUser:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:""}}),O()("Succes","Utilisateur ajoute avec succes","success")})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(O()("Erreur Ajout","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),O()("erreur","Veuillez reessayer","error")):(O()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},a.onUpdateUser=function(t){t.preventDefault(),a.setState({inProgress:!a.state.inProgress});var s={first_name:a.state.newUser.first_name,last_name:a.state.newUser.last_name,email:a.state.newUser.email,phone:a.state.newUser.phone,adress:a.state.newUser.adress,user_type:a.state.newUser.user_type,password:"mapaction2020"},n=e.config.url+"api/user/"+a.state.newUser.id+"/";console.log(s),y.a.put(n,s).then((function(e){console.log(e),a.setState({inProgress:!a.state.inProgress,newUserModal:!1,editUserModal:!1,newUser:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:""}}),O()("Succ\xe8s","Utilisateur mis \xe0 jour avec succ\xe8s","success"),a._getUsers()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(O()("Oupsss! Une erreur est survenue","Veuillez r\xe9essayer plus tard.","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),O()("Oupsss! Une erreur est survenue","Veuillez r\xe9essayer plus tard.","error")):(O()("Oupsss! Une erreur est survenue","Veuillez r\xe9essayer plus tard.","error"),console.log(e.message))}))},a.onEditUser=function(e){console.log(e),a.setState({editUserModal:!a.state.editUserModal,newUser:e})},a.onDeleteUser=function(t){O()({title:"Etes vous sure?",text:"La suppression est definitive",icon:"warning",buttons:!0,dangerMode:!0}).then((function(s){if(s){var n=e.config.url+"api/user/"+t.id+"/";console.log(t),y.a.delete(n,t).then((function(e){console.log(e),O()("Utilisateur Supprime!",{icon:"success"}),a._getUsers()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(O()("Erreur Suppression","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),O()("erreur","Veuillez reessayer","error")):(O()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}else O()("Suppression annulee!")}))},a.getMuiTheme=function(){return Object(C.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},a.handleModalOpen=function(){a.setState({newUserModal:!a.state.newUserModal})},a.handleEditModal=function(){a.setState({editUserModal:!a.state.editUserModal})},a.handleSelectChange=function(e){console.log(e.value);var t=a.state.newUser;t.user_type=e.value,a.setState({newUser:t})},a.state={data:[],inProgress:!1,newUserModal:!1,editUserModal:!1,newUser:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:""},dataReady:!1},a}return Object(c.a)(n,[{key:"formatType",value:function(e){return"admin"===e?Object(z.jsx)("label",{className:"admin-s",children:e}):"elu"===e?Object(z.jsx)("label",{className:"elu-s",children:e}):"business"===e?Object(z.jsx)("label",{className:"business-s",children:e}):"reporter"===e?Object(z.jsx)("label",{className:"reporter-s",children:e}):"citizen"===e?Object(z.jsx)("label",{className:"citizen-s",children:e}):Object(z.jsx)("label",{className:"visitor-s",children:e})}},{key:"render",value:function(){var e,t,s=this,n=[{value:"admin",label:"Admin"},{value:"visitor",label:"Visitor"},{value:"reporter",label:"Reporter"},{value:"citizen",label:"Citizen"},{value:"business",label:"Business"},{value:"elu",label:"Organisation"}],o=Object(z.jsxs)(p.a,{show:this.state.newUserModal,onHide:this.handleModalOpen,children:[Object(z.jsx)(h.a,{closeButton:!0,children:"Nouveau Utilisateur"}),Object(z.jsxs)(m.a,{children:[Object(z.jsxs)(j.a,{className:"col-sm-12",children:[Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"from",children:"Prenom:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newUser.first_name,onChange:function(e){var t=s.state.newUser;t.first_name=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newUser.last_name,onChange:function(e){var t=s.state.newUser;t.last_name=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"email",name:"email",value:this.state.newUser.email,onChange:function(e){var t=s.state.newUser;t.email=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"phone",children:"Telephone:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"phone",name:"phone",value:this.state.newUser.phone,onChange:function(e){var t=s.state.newUser;t.phone=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"adress",children:"Adresse:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:" adress",name:" adress",value:this.state.newUser.adress,onChange:function(e){var t=s.state.newUser;t.adress=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"user_type",children:"Type Utilisateur:"}),Object(z.jsx)(N.a,(e={className:"mt-4 col-md-6 col-offset-4",name:"incidents_rapport",options:n},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"onChange",this.handleSelectChange),Object(a.a)(e,"classNamePrefix","select"),e))]})]}),Object(z.jsxs)(g.a,{children:[this.state.inProgress?Object(z.jsxs)(f.a,{className:"btn btn-primary",children:["Loading...",Object(z.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(z.jsx)(f.a,{className:"btn btn-primary",onClick:this.__addUser,children:"Ajouter"})," ",Object(z.jsx)(f.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]}),r=Object(z.jsxs)(p.a,{show:this.state.editUserModal,onHide:this.handleEditModal,children:[Object(z.jsx)(h.a,{closeButton:!0,children:"Modification"}),Object(z.jsxs)(m.a,{children:[Object(z.jsxs)(j.a,{className:"col-sm-12",children:[Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"from",children:"Prenom:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newUser.first_name,onChange:function(e){var t=s.state.newUser;t.first_name=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newUser.last_name,onChange:function(e){var t=s.state.newUser;t.last_name=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"email",name:"email",value:this.state.newUser.email,onChange:function(e){var t=s.state.newUser;t.email=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"phone",children:"Telephone:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:"phone",name:"phone",value:this.state.newUser.phone,onChange:function(e){var t=s.state.newUser;t.phone=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"adress",children:"Adresse:"}),Object(z.jsx)("input",{className:"form-control",type:"text",id:" adress",name:" adress",value:this.state.newUser.adress,onChange:function(e){var t=s.state.newUser;t.adress=e.target.value,s.setState({newUser:t})}})]}),Object(z.jsxs)(b.a,{className:"col-sm-6",children:[Object(z.jsx)("label",{htmlFor:"user_type",children:"Type Utilisateur:"}),Object(z.jsx)(N.a,(t={className:"mt-4 col-md-6 col-offset-4",name:"incidents_rapport",options:n},Object(a.a)(t,"className","basic-multi-select map-color"),Object(a.a)(t,"onChange",this.handleSelectChange),Object(a.a)(t,"classNamePrefix","select"),t))]})]}),Object(z.jsxs)(g.a,{children:[this.state.inProgress?Object(z.jsxs)(f.a,{className:"btn btn-primary",children:["Loading...",Object(z.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(z.jsx)(f.a,{className:"btn btn-primary",onClick:this.onUpdateUser,children:"Modifier"})," ",Object(z.jsx)(f.a,{className:"btn btn-danger",onClick:this.handleEditModal,children:"Annuler"})]})]})]}),i=this.state.data.map((function(e,t){return[e.first_name,e.last_name,e.email,e.phone,e.user_type,s.formatType(e.user_type),Object(z.jsxs)("div",{className:"btn-group",children:[Object(z.jsx)("a",{onClick:function(t){return s.onEditUser(e)},className:"btn btn-default btn-xs map-color nb","data-id":e.id,children:Object(z.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(z.jsx)(f.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(t){s.onDeleteUser(e),s.setState({inProgress:!1})},children:Object(z.jsx)("i",{className:"fas fa-trash fa-x"})})]})]}));return Object(z.jsxs)("div",{className:"content",children:[Object(z.jsxs)(f.a,{className:"pull-right",style:v.btnStyle,onClick:this.handleModalOpen,children:[Object(z.jsx)("i",{className:"fa fa-download"}),"Nouveau Utilisateur"]}),this.state.dataReady?Object(z.jsx)(M.a,{theme:this.getMuiTheme(),children:Object(z.jsx)(_.a,{title:"Liste des Utilisateurs",data:i,columns:[{name:"first_name",label:"Prenom",options:{filter:!0,sort:!0}},{name:"last_name",label:"Nom",options:{filter:!0,sort:!1}},{name:"email",label:"Email",options:{filter:!1,sort:!1}},{name:"phone",label:"Telephone",options:{filter:!1,sort:!1}},{name:"user_type",label:"Type",options:{filter:!0,sort:!1,display:!1}},{name:"user_type",label:"Type",options:{filter:!1,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1,export:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0}})}):Object(z.jsx)(k.a,{type:"Audio",color:"#00BFFF",height:100,width:100,timeout:3e3}),o,r]})}}]),n}(u.Component)}).call(this,s(45))},642:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return k}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(24),d=s(23),u=s(1),p=s(9),h=s(40),m=s(37),j=s(52),b=s(36),g=s(13),f=s(39),x=(s(64),s(43)),O=s(12),v=s.n(O),w=s(8),y=s.n(w),N=s(59),S=s.n(N),_=s(83),C=s(111),M=s(48),I=s(0),k=function(t){Object(l.a)(n,t);var s=Object(d.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=s.call(this,t)).componentDidMount=function(){a._getCitizens()},a.getMuiTheme=function(){return Object(_.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},a._getCitizens=Object(r.a)(o.a.mark((function t(){var s,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/citizen/",t.prev=1,t.next=4,v.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:n=t.sent,r=n.data.results,a.setState({data:r.sort((function(e,t){return(null===t||void 0===t?void 0:t.id)-(null===e||void 0===e?void 0:e.id)}))}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),a.__addCitizen=function(t){t.preventDefault(),a.setState({inProgress:!a.state.inProgress});var s={first_name:a.state.newElu.first_name,last_name:a.state.newElu.last_name,email:a.state.newElu.email,phone:a.state.newElu.phone,adress:a.state.newElu.adress,user_type:"citizen",password:"mapaction2020"},n=e.config.url+"api/citizen/";console.log(s),v.a.post(n,s).then((function(e){a.state.data;a._getCitizens(),a.setState({inProgress:!a.state.inProgress,newEluModal:!1}),y()("Succes","Elu ajout\xe9 avec succ\xe8s","success")})).catch((function(e){var t,s,n;if(a.setState({inProgress:!a.state.inProgress}),e.response)y()("Erreur Ajout",null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data,"error"),console.log(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.status),console.log(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data);else if(null===e||void 0===e?void 0:e.request){var o,r;console.log(null===e||void 0===e||null===(o=e.request)||void 0===o?void 0:o.data),y()("erreur",null===e||void 0===e||null===(r=e.request)||void 0===r?void 0:r.data,"error")}else y()("erreur",null===e||void 0===e?void 0:e.message,"error"),console.log(null===e||void 0===e?void 0:e.message)}))},a.onUpdateUser=function(t){t.preventDefault(),a.setState({inProgress:!a.state.inProgress});var s={first_name:a.state.newElu.first_name,last_name:a.state.newElu.last_name,email:a.state.newElu.email,phone:a.state.newElu.phone,adress:a.state.newElu.adress,user_type:a.state.user_type,password:"mapaction2020"},n=e.config.url+"api/user/"+a.state.newElu.id+"/";console.log(s),v.a.put(n,s).then((function(e){console.log(e),a.setState({inProgress:!a.state.inProgress,newEluModal:!1,editUserModal:!1,newElu:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:""}}),y()("Succ\xe8s","Utilisateur mis \xe0 jour avec succ\xe8s","success"),a._getCitizens()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(y()("Erreur","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),y()("erreur","Veuillez reessayer","error")):(y()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},a.onEditUser=function(e){console.log(e),a.setState({editUserModal:!a.state.editUserModal,newElu:e})},a.onDeleteUser=function(t){y()({title:"Etes vous sure?",text:"La suppression est definitive",icon:"warning",buttons:!0,dangerMode:!0}).then((function(s){if(s){var n=e.config.url+"api/user/"+t.id+"/";console.log(t),v.a.delete(n,t).then((function(e){console.log(e),y()("Utilisateur Supprime!",{icon:"success"}),a._getCitizens()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(y()("Erreur Suppression","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),y()("erreur","Veuillez reessayer","error")):(y()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}else y()("Suppression annulee!")}))},a.handleEditModal=function(){a.setState({editUserModal:!a.state.editUserModal})},a.handleModalOpen=function(){a.setState({newEluModal:!a.state.newEluModal})},a.state={data:[],inProgress:!1,newElu:{first_name:"",last_name:"",email:"",phone:"",adress:"",user_type:"",password:""},newEluModal:!1,editUserModal:!1,visible:!1,error:!1,message:[]},a}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this,s=this.state.data.map((function(e,s){return[e.first_name,e.last_name,e.email,e.phone,e.adress,Object(I.jsxs)("div",{className:"btn-group",children:[Object(I.jsx)("a",{onClick:function(s){return t.onEditUser(e)},className:"btn btn-default btn-xs map-color nb","data-id":e.id,children:Object(I.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(I.jsx)(p.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(s){t.onDeleteUser(e),t.setState({inProgress:!1})},children:Object(I.jsx)("i",{className:"fas fa-trash fa-x"})})]})]})),n=Object(I.jsxs)(h.a,{show:this.state.newEluModal,onHide:this.handleModalOpen,children:[Object(I.jsx)(m.a,{closeButton:!0,children:"Nouveau Citoyen"}),Object(I.jsxs)(j.a,{children:[Object(I.jsxs)(b.a,{className:"col-sm-12",children:[Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"from",children:"Prenom:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newElu.first_name,onChange:function(e){var s=t.state.newElu;s.first_name=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newElu.last_name,onChange:function(e){var s=t.state.newElu;s.last_name=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"email",name:"email",value:this.state.newElu.email,onChange:function(e){var s=t.state.newElu;s.email=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"phone",children:"Telephone:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"phone",name:"phone",value:this.state.newElu.phone,onChange:function(e){var s=t.state.newElu;s.phone=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"adress",children:"Adresse:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:" adress",name:" adress",value:this.state.newElu.adress,onChange:function(e){var s=t.state.newElu;s.adress=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"user_type",children:"Type Utilisateur:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:" user_type",name:" user_type",value:"citizen",onChange:function(e){var s=t.state.newElu;s.user_type=e.target.value,t.setState({newElu:s})},disabled:!0})]})]}),Object(I.jsxs)(f.a,{children:[this.state.inProgress?Object(I.jsxs)(p.a,{className:"btn btn-primary",children:["Loading...",Object(I.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(I.jsx)(p.a,{className:"btn btn-primary",onClick:this.__addCitizen,children:"Ajouter"})," ",Object(I.jsx)(p.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]}),o=Object(I.jsxs)(h.a,{show:this.state.editUserModal,onHide:this.handleEditModal,children:[Object(I.jsx)(m.a,{closeButton:!0,children:"Modification"}),Object(I.jsxs)(j.a,{children:[Object(I.jsxs)(b.a,{className:"col-sm-12",children:[Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"from",children:"Prenom:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newElu.first_name,onChange:function(e){var s=t.state.newElu;s.first_name=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newElu.last_name,onChange:function(e){var s=t.state.newElu;s.last_name=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"email",name:"email",value:this.state.newElu.email,onChange:function(e){var s=t.state.newElu;s.email=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"phone",children:"Telephone:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:"phone",name:"phone",value:this.state.newElu.phone,onChange:function(e){var s=t.state.newElu;s.phone=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"adress",children:"Adresse:"}),Object(I.jsx)("input",{className:"form-control",type:"text",id:" adress",name:" adress",value:this.state.newElu.adress,onChange:function(e){var s=t.state.newElu;s.adress=e.target.value,t.setState({newElu:s})}})]}),Object(I.jsxs)(g.a,{className:"col-sm-6",children:[Object(I.jsx)("label",{htmlFor:"user_type",children:"Type Utilisateur:"}),Object(I.jsx)(M.a,(e={className:"mt-4 col-md-6 col-offset-4",name:"incidents_rapport",options:[{value:"admin",label:"Admin"},{value:"visitor",label:"Visitor"},{value:"reporter",label:"Reporter"},{value:"citizen",label:"Citizen"},{value:"business",label:"Business"},{value:"elu",label:"Elu"}]},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"onChange",this.handleSelectChange),Object(a.a)(e,"classNamePrefix","select"),e))]})]}),Object(I.jsxs)(f.a,{children:[this.state.inProgress?Object(I.jsxs)(p.a,{className:"btn btn-primary",children:["Loading...",Object(I.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(I.jsx)(p.a,{className:"btn btn-primary",onClick:this.onUpdateUser,children:"Modifier"})," ",Object(I.jsx)(p.a,{className:"btn btn-danger",onClick:this.handleEditModal,children:"Annuler"})]})]})]});return Object(I.jsxs)("div",{className:"content",children:[n,o,Object(I.jsxs)(p.a,{className:"pull-right",style:x.btnStyle,onClick:this.handleModalOpen,children:[Object(I.jsx)("i",{className:"fa fa-plus"}),"Nouveau Citoyen"]}),Object(I.jsx)(C.a,{theme:this.getMuiTheme(),children:Object(I.jsx)(S.a,{title:"Liste des Citoyens",data:s,columns:[{name:"first_name",label:"Prenom",options:{filter:!0,sort:!0}},{name:"last_name",label:"Nom",options:{filter:!0,sort:!1}},{name:"email",label:"Email",options:{filter:!1,sort:!1}},{name:"phone",label:"Telephone",options:{filter:!1,sort:!1}},{name:"adress",label:"Adresse",options:{filter:!0,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1,export:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0}})})]})}}]),n}(u.Component)}).call(this,s(45))},643:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return C}));var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(1),u=s(9),p=s(40),h=s(37),m=s(36),j=s(52),b=s(13),g=s(39),f=(s(64),s(43),s(12)),x=s.n(f),O=(s(102),s(59)),v=s.n(O),w=s(83),y=s(111),N=s(8),S=s.n(N),_=s(0),C=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=s.call(this,t)).componentDidMount=function(){i._getcategorys()},i._getcategorys=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/category/",t.prev=2,t.next=5,x.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:a=t.sent,o=a.data.results.sort((function(e,t){return t.id-e.id})),i.setState({data:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),i.getMuiTheme=function(){return Object(w.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},i.handleModalOpen=function(){i.setState({newCatModal:!i.state.newCatModal})},i.handleModalClose=function(){i.setState({newCatModal:!1})},i.handleEditModalToggle=function(){i.setState({editCatModal:!i.state.editCatModal})},i.handleEdit=function(e){i.setState({editCat:e,editCatModal:!0})},i.onDelete=function(e,t){e.preventDefault(),i.setState({editCat:t}),S()({title:"\xcates vous s\xfbr de vouloir supprimer cette cat\xe9gorie?",icon:"warning",buttons:["Non","Oui"],dangerMode:!0}).then((function(e){e?i.onDeleteCategory():S()("Suppression annul\xe9e!")}))},i.onAddcategory=function(t){t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var s={name:i.state.newCat.name},a=e.config.url+"api/category/";console.log(s),x.a.post(a,s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,newCatModal:!1}),i._getcategorys(),S()("Succes","category Ajoute avec succes","success"),i.setState({newCat:{name:""}})})).catch((function(e){i.setState({inProgress:!i.state.inProgress,newCatModal:!1}),e.response?(console.log(e.response.status),S()("Erreur","Erreur lors de l'ajout, veuillez reessayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message),i.setState({newCat:{name:""}})}))},i.onEditcategory=function(t){var s;t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var a=e.config.url+"api/category/"+(null===(s=i.state.editCat)||void 0===s?void 0:s.id)+"/";x.a.put(a,i.state.editCat,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,editCatModal:!1,editCat:{}}),S()("Succes","categorie modifi\xe9e avec succes","success"),i._getcategorys()})).catch((function(e){var t,s;if(i.setState({inProgress:!i.state.inProgress,editCatModal:!1}),null===e||void 0===e?void 0:e.response)console.log(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status),S()("Erreur","Erreur lors de la modification, veuillez reessayer plus tard","error"),console.log(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data);else if(null===e||void 0===e?void 0:e.request){var a;console.log(null===e||void 0===e||null===(a=e.request)||void 0===a?void 0:a.data)}else console.log(null===e||void 0===e?void 0:e.message)}))},i.onDeleteCategory=function(){var t;i.setState({inProgress:!i.state.inProgress});var s=e.config.url+"api/category/"+(null===(t=i.state.editCat)||void 0===t?void 0:t.id)+"/";x.a.delete(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,editCat:{}}),S()("Cat\xe9gorie supprim\xe9e!",{icon:"success"}),i._getcategorys()})).catch((function(e){var t,s;if(i.setState({inProgress:!i.state.inProgress,editCatModal:!1}),null===e||void 0===e?void 0:e.response)console.log(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status),S()("Erreur","Erreur lors de la suppression, veuillez reessayer plus tard","error"),console.log(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data);else if(null===e||void 0===e?void 0:e.request){var a;console.log(null===e||void 0===e||null===(a=e.request)||void 0===a?void 0:a.data)}else console.log(null===e||void 0===e?void 0:e.message)}))},i.state={data:[],inProgress:!1,newCat:{name:""},editCat:{},newCatModal:!1,showCatModal:!1,editCatModal:!1},i}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.data.map((function(t,s){return[t.id,t.name,Object(_.jsxs)("div",{className:"btn-group",children:[Object(_.jsx)(u.a,{onClick:function(s){return e.handleEdit(t)},className:"btn btn-default btn-xs map-color nb",children:Object(_.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(_.jsx)(u.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(s){e.onDelete(s,t),e.setState({inProgress:!1})},children:Object(_.jsx)("i",{className:"fas fa-trash fa-x"})})," "]})]}));return Object(_.jsxs)("div",{className:"content",children:[Object(_.jsxs)(u.a,{onClick:this.handleModalOpen,className:"pull-right",children:[" ","New Category"]}),Object(_.jsx)(y.a,{theme:this.getMuiTheme(),children:Object(_.jsx)(v.a,{title:"Liste des categorys",data:t,columns:[{name:"id",label:"Id",options:{filter:!0,sort:!0}},{name:"name",label:"Name",options:{filter:!0,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0,selectableRows:!1}})}),Object(_.jsx)("div",{className:"modal fade",children:Object(_.jsxs)(p.a,{show:this.state.newCatModal,onHide:this.handleModalClose,children:[Object(_.jsx)(h.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"New Category"}),Object(_.jsx)(m.a,{className:"col-sm-12",children:Object(_.jsxs)(j.a,{className:"add-form",children:[Object(_.jsxs)(b.a,{className:"col-sm-12",children:[Object(_.jsx)("label",{htmlFor:"name",children:"Libelle:"}),Object(_.jsx)("input",{className:"form-control",type:"text",id:"name",name:"name",value:this.state.newCat.name,onChange:function(t){var s=e.state.newCat;s.name=t.target.value,e.setState({newCat:s},console.log(e.state))}})]}),Object(_.jsxs)(b.a,{className:"col-sm-12",children:[this.state.inProgress?Object(_.jsxs)(u.a,{className:"btn  btn-white btn-round",children:["Loading...",Object(_.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(_.jsx)(u.a,{className:"btn btn-white btn-round",onClick:this.onAddcategory,children:"Ajouter"})," ",Object(_.jsx)(u.a,{className:"btn btn-red btn-round",onClick:this.handleModalClose,children:"Annuler"})]})]})}),Object(_.jsx)(g.a,{})]})}),Object(_.jsx)("div",{className:"modal fade",children:Object(_.jsxs)(p.a,{show:this.state.editCatModal,onHide:this.handleEditModalToggle,children:[Object(_.jsx)(h.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Modifier Categorie"}),Object(_.jsx)(m.a,{className:"col-sm-12",children:Object(_.jsxs)(j.a,{className:"edit-form",children:[Object(_.jsxs)(b.a,{className:"col-sm-12",children:[Object(_.jsx)("label",{htmlFor:"name",children:"Libelle:"}),Object(_.jsx)("input",{className:"form-control",type:"text",id:"name",name:"name",defaultValue:this.state.editCat.name,onChange:function(t){var s=e.state.editCat;s.name=t.target.value,e.setState({editCat:s})}})]}),Object(_.jsxs)(b.a,{className:"col-sm-12",style:{display:"flex"},children:[this.state.inProgress?Object(_.jsxs)(u.a,{className:"btn  btn-white btn-round",style:{marginRight:"5px"},children:["Loading...",Object(_.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(_.jsx)(u.a,{className:"btn btn-white btn-round",onClick:this.onEditcategory,style:{marginRight:"5px"},children:"Modifier"})," ",Object(_.jsx)(u.a,{className:"btn btn-red btn-round",onClick:this.handleEditModalToggle,style:{marginLeft:"5px"},children:"Annuler"})]})]})}),Object(_.jsx)(g.a,{})]})})]})}}]),a}(d.Component)}).call(this,s(45))},644:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return M}));var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(1),u=s(9),p=s(40),h=s(37),m=s(52),j=s(36),b=s(13),g=s(39),f=(s(64),s(43)),x=s(12),O=s.n(x),v=s(8),w=s.n(v),y=s(59),N=s.n(y),S=s(83),_=s(111),C=(s(136),s(0)),M=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=s.call(this,t)).componentDidMount=function(){i._getZones()},i.getMuiTheme=function(){return Object(S.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},i._getZones=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,O.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:a=t.sent,console.log(a.data),o=a.data.results,console.log(o),i.setState({data:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),i.__addZone=function(t){t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var s=new FormData;s.append("name",i.state.newZone.name),s.append("lattitude",i.state.newZone.lattitude),s.append("longitude",i.state.newZone.longitude),s.append("photo",i.state.newZone.photo);var a=e.config.url+"api/zone/";console.log(s),O.a.post(a,s).then((function(e){console.log(e),i.state.data.push(s),i.setState({inProgress:!i.state.inProgress,newZoneModal:!1}),w()("Succes","Zone ajoute avec succes","success")})).catch((function(e){i.setState({inProgress:!i.state.inProgress}),e.response?(w()("Erreur Ajout",e.response.data,"error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),w()("erreur",e.request.data,"error")):(w()("erreur",e.message,"error"),console.log(e.message))}))},i.onUpdateZone=function(t){t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var s=new FormData;s.append("name",i.state.newZone.name),s.append("lattitude",i.state.newZone.lattitude),s.append("longitude",i.state.newZone.longitude),i.state.newZone.photo&&s.append("photo",i.state.newZone.photo);var a=e.config.url;console.log(s);a=e.config.url+"api/zone/"+i.state.newZone.id+"/";console.log(s),O.a.put(a,s).then((function(e){console.log(e),i.setState({inProgress:!i.state.inProgress,newZone:{name:"",lattitude:"",longitude:""},newZoneModal:!1,editZoneModal:!1}),w()("Succes","Zone mise a jour avec succes","success"),i._getZones()})).catch((function(e){i.setState({inProgress:!i.state.inProgress}),e.response?(w()("Erreur","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),w()("erreur","Veuillez reessayer","error")):(w()("erreur","Veuillez reessayer","error"),console.log(e.message))}))},i.onEditZone=function(e){console.log(e),delete e.photo,i.setState({editZoneModal:!i.state.editZoneModal,newZone:e})},i.onDeleteZone=function(t){w()({title:"Etes vous sure?",text:"La suppression est definitive",icon:"warning",buttons:!0,dangerMode:!0}).then((function(s){if(s){var a=e.config.url+"api/zone/"+t.id+"/";console.log(t),O.a.delete(a,t).then((function(e){console.log(e),w()("Zone Supprimee!",{icon:"success"}),i._getZones()})).catch((function(e){i.setState({inProgress:!i.state.inProgress}),e.response?(w()("Erreur Suppression","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),w()("erreur","Veuillez reessayer","error")):(w()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}else w()("Suppression annulee!")}))},i.handleEditModal=function(){i.setState({editZoneModal:!i.state.editZoneModal,newZone:{name:"",lattitude:"",longitude:""}})},i.handleModalOpen=function(){i.setState({newZoneModal:!i.state.newZoneModal})},i.state={data:[],inProgress:!1,newZone:{name:"",lattitude:"",longitude:"",photo:""},newZoneModal:!1,editZoneModal:!1,visible:!1,error:!1,message:[]},i}return Object(i.a)(a,[{key:"render",value:function(){var t=this,s=this.state.data.map((function(s,a){var n=e.config.url.slice(0,-1),o=s.photo,r=n+"".concat(o);return[s.name,Object(C.jsx)("img",{src:r,alt:"",className:"width-half"}),s.lattitude,s.longitude,Object(C.jsxs)("div",{className:"btn-group",children:[Object(C.jsx)("a",{onClick:function(e){return t.onEditZone(s)},className:"btn btn-default btn-xs map-color nb","data-id":s.id,children:Object(C.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(C.jsx)(u.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(e){t.onDeleteZone(s),t.setState({inProgress:!1})},children:Object(C.jsx)("i",{className:"fas fa-trash fa-x"})})]})]})),a=Object(C.jsxs)(p.a,{show:this.state.newZoneModal,onHide:this.handleModalOpen,children:[Object(C.jsx)(h.a,{closeButton:!0,children:"Nouvelle Zone"}),Object(C.jsxs)(m.a,{encType:"multipart/form-data",children:[Object(C.jsxs)(j.a,{className:"col-sm-12",children:[Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(C.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newZone.name,onChange:function(e){var s=t.state.newZone;s.name=e.target.value,t.setState({newZone:s})}})]}),Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"from",children:"Lattitude:"}),Object(C.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newZone.lattitude,onChange:function(e){var s=t.state.newZone;s.lattitude=e.target.value,t.setState({newZone:s})}})]}),Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"from",children:"Longitude:"}),Object(C.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newZone.longitude,onChange:function(e){var s=t.state.newZone;s.longitude=e.target.value,t.setState({newZone:s})}})]}),Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"photo_inc",children:"Photo:"}),Object(C.jsx)("input",{className:"form-control",type:"file",id:"photo_inc",name:"photo",onChange:function(e){var s=t.state.newZone;s.photo=e.target.files[0],t.setState({newZone:s})}})]})]}),Object(C.jsxs)(g.a,{children:[this.state.inProgress?Object(C.jsxs)(u.a,{className:"btn btn-primary",children:["Loading...",Object(C.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(C.jsx)(u.a,{className:"btn btn-primary",onClick:this.__addZone,children:"Ajouter"})," ",Object(C.jsx)(u.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]}),n=Object(C.jsxs)(p.a,{show:this.state.editZoneModal,onHide:this.handleEditModal,children:[Object(C.jsx)(h.a,{closeButton:!0,children:"Modifier Zone"}),Object(C.jsxs)(m.a,{encType:"multipart/form-data",children:[Object(C.jsxs)(j.a,{className:"col-sm-12",children:[Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"from",children:"Nom:"}),Object(C.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"first_name",value:this.state.newZone.name,onChange:function(e){var s=t.state.newZone;s.name=e.target.value,t.setState({newZone:s})}})]}),Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"from",children:"Lattitude:"}),Object(C.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newZone.lattitude,onChange:function(e){var s=t.state.newZone;s.lattitude=e.target.value,t.setState({newZone:s})}})]}),Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"from",children:"Longitude:"}),Object(C.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"last_name",value:this.state.newZone.longitude,onChange:function(e){var s=t.state.newZone;s.longitude=e.target.value,t.setState({newZone:s})}})]}),Object(C.jsxs)(b.a,{className:"col-sm-6",children:[Object(C.jsx)("label",{htmlFor:"photo_inc",children:"Photo:"}),Object(C.jsx)("input",{className:"form-control",type:"file",id:"photo_inc",name:"photo",onChange:function(e){var s=t.state.newZone;s.photo=e.target.files[0],t.setState({newZone:s})}})]})]}),Object(C.jsxs)(g.a,{children:[this.state.inProgress?Object(C.jsxs)(u.a,{className:"btn btn-primary",children:["Loading...",Object(C.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(C.jsx)(u.a,{className:"btn btn-primary",onClick:this.onUpdateZone,children:"Modifier"})," ",Object(C.jsx)(u.a,{className:"btn btn-danger",onClick:this.handleEditModal,children:"Annuler"})]})]})]});return Object(C.jsxs)("div",{className:"content",children:[a,n,Object(C.jsxs)(u.a,{className:"pull-right",style:f.btnStyle,onClick:this.handleModalOpen,children:[Object(C.jsx)("i",{className:"fa fa-plus"}),"Nouvelle Zone"]}),Object(C.jsx)(_.a,{theme:this.getMuiTheme(),children:Object(C.jsx)(N.a,{title:"Liste des Zones",data:s,columns:[{name:"Name",label:"Name",options:{filter:!0,sort:!0}},{name:"photo",label:"Photo",options:{filter:!1,sort:!1}},{name:"lattitude",label:"Lattitude",options:{filter:!0,sort:!1}},{name:"longitude",label:"Longitude",options:{filter:!0,sort:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1,export:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0}})})]})}}]),a}(d.Component)}).call(this,s(45))},645:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return N}));var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(1),u=s(12),p=s.n(u),h=s(59),m=s.n(h),j=s(83),b=s(111),g=s(40),f=s(37),x=s(36),O=s(32),v=s(39),w=s(9),y=s(0),N=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=s.call(this,t)).onReplyM=function(e){e&&(console.log("message a repondre ",e),i.setState({newMessage:e})),i.setState({onReply:!0})},i.onshowMessage=function(e){e&&(console.log("message a afficher ",e),i.setState({newMessage:e})),i.setState({showMessage:!0})},i.handleShowMessage=function(){i.setState((function(e){return{showMessage:!e.showMessage}})),!1===i.state.onShow&&i.setState({newMessage:{}})},i.getAllContact=Object(o.a)(n.a.mark((function t(){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/contact/",t.next=3,p.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){i.setState({data:e.data.results})})).catch((function(e){console.log("error",e)}));case 3:case"end":return t.stop()}}),t)}))),i.getMuiTheme=function(){Object(j.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},i.formatDate=function(e){if(e){var t=new Date(e),s=""+(t.getMonth()+1),a=""+t.getDate(),n=t.getFullYear();return s.length<2&&(s="0"+s),a.length<2&&(a="0"+a),[a,s,n].join("-")}return null},i.state={user:JSON.parse(sessionStorage.user),data:[],showMessage:!1,onReply:!1,newMessage:{}},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getAllContact()}},{key:"render",value:function(){var e=this,t=Object(y.jsx)("div",{className:"modal fade",children:Object(y.jsxs)(g.a,{show:this.state.showMessage,onHide:this.handleShowMessage,children:[Object(y.jsxs)(f.a,{closeButton:!0,className:"map-color fs-20 t-center",children:["De ",this.state.newMessage.email]}),Object(y.jsxs)(x.a,{className:"row",children:[Object(y.jsxs)(O.a,{md:12,style:{display:"flex",flexDirection:"row",fontWeight:"bold",fontFamily:"monospace",marginBottom:"10px"},children:["Objet: ",this.state.newMessage.objet]}),Object(y.jsx)(O.a,{style:{width:"100%",margin:"auto",padding:"15px",fontFamily:"sans-serif",fontSize:"20px",marginBottom:"10px"},children:this.state.newMessage.message}),Object(y.jsx)(O.a,{md:12,style:{marginTop:"-5px",textAlign:"end"},children:Object(y.jsx)("button",{className:"btn btn-secondary justify-content-end mb-auto",onClick:this.handleShowMessage,children:"Fermer"})})]}),Object(y.jsx)(v.a,{})]})}),s=[{name:"objet",label:Object(y.jsx)("span",{style:{fontSize:"14px"},children:"Objet"}),options:{filter:!0,sort:!0}},{name:"email",label:Object(y.jsx)("span",{style:{fontSize:"14px"},children:"Email"}),options:{filter:!0,sort:!0}},{name:"date",label:Object(y.jsx)("span",{style:{fontSize:"14px"},children:"Date"}),options:{filter:!0,sort:!0}},{name:"actions",label:Object(y.jsx)("span",{style:{fontSize:"14px"},children:"Action"}),options:{filter:!0,sort:!0}}],a=this.state.data.map((function(t,s){return[t.objet,t.email,e.formatDate(t.created_at),Object(y.jsx)("div",{className:"btn-group",children:Object(y.jsx)(w.a,{className:"btn btn-default btn-xs map-color nb",onClick:function(){return e.onshowMessage(t)},children:Object(y.jsx)("i",{className:"fa fa-eye fa-x"})})})]}));return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)(b.a,{theme:this.getMuiTheme(),children:Object(y.jsx)(m.a,{title:"Liste des Messages de votre communaute",data:a,columns:s,options:{filter:!1,filterType:"dropdown",responsive:"stacked",hasIndex:!0}})}),t]})}}]),a}(d.Component)}).call(this,s(45))},646:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return v}));var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(64),u=s(1),p=s.n(u),h=s(242),m=s(73),j=s(32),b=s(13),g=s(140),f=s(12),x=s.n(f),O=s(0),v=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(){var t;Object(r.a)(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return(t=s.call.apply(s,[this].concat(c))).state={file:null,photo:void 0,previewImage:void 0,progress:0,load:!1},t.getImages=Object(o.a)(n.a.mark((function s(){var a,o,r,i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.config.url+"api/imagebackground/",o=t.state.file,s.prev=2,s.next=5,x.a.get(a,{headers:{"Content-Type":"application/json"}});case 5:r=s.sent,console.log("response=>",r.data),i=r.data,0!==Object.keys(i).length&&(o=i.photo,t.setState({file:o})),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(2),console.log("erreur=>",s.t0.response);case 14:case"end":return s.stop()}}),s,null,[[2,11]])}))),t.onFileChange=function(){var e=Object(o.a)(n.a.mark((function e(s){var a,o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),a=t.state,a.file,a.photo,a.previewImage,o=s.target.files[0],r=URL.createObjectURL(s.target.files[0]),s.target.files[0],t.setState({photo:o,previewImage:r,progress:0});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.upload=Object(o.a)(n.a.mark((function s(){var a,o,r,i;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t.state.photo,o=e.config.url+"api/imagebackground/",t.setState({progress:0,load:!0}),s.prev=3,!a){s.next=11;break}return(r=new FormData).append("photo",a),s.next=9,x.a.post(o,r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(sessionStorage.token)}});case 9:i=s.sent,t.setState({file:i.data.photo,load:!1,previewImage:void 0});case 11:s.next=17;break;case 13:s.prev=13,s.t0=s.catch(3),console.log("erreur=>",s.t0.response),t.setState({load:!1});case 17:case"end":return s.stop()}}),s,null,[[3,13]])}))),t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getImages()}},{key:"render",value:function(){var e=this.state,t=e.file,s=e.load,a=e.previewImage,n=e.photo,o="https://backend-dashboard.map-action.com/".concat(t);return Object(O.jsx)("div",{className:"content",children:Object(O.jsx)(h.a,{fluid:!0,children:Object(O.jsx)(m.a,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(d.b,{title:"Parametres",content:Object(O.jsxs)(p.a.Fragment,{children:[Object(O.jsxs)("div",{className:"manage-login-page-bgimg-container",children:[Object(O.jsx)("h4",{className:"update-login-bgimg-input-label",children:"Changer l'image de fond de la page de connexion"}),Object(O.jsx)("div",{className:"divider"}),Object(O.jsxs)(m.a,{className:"upload-login-bgimg-row",children:[Object(O.jsx)(j.a,{md:8,className:"upload-bgimg-file-input",children:Object(O.jsx)("label",{htmlFor:"",className:"btn btn-default p-0",children:Object(O.jsx)("input",{type:"file",onChange:this.onFileChange,name:"photo",label:"Photo"})})}),Object(O.jsx)(j.a,{md:4,children:s?Object(O.jsxs)("button",{className:"btn btn-success btn-sm upload-new-bgimg-submit-btn",children:[Object(O.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"}),"\xa0 En cours..."]}):Object(O.jsx)("button",{className:"btn btn-success btn-sm upload-new-bgimg-submit-btn",disabled:!n,onClick:this.upload,children:"Modifier"})})]})]}),a&&Object(O.jsx)("div",{className:"uploaded-img-preview-container",children:Object(O.jsx)("img",{style:{maxWidth:"200px"},src:a,alt:"",className:"preview-image-item"})}),Object(O.jsx)("div",{className:"divider"}),Object(O.jsx)(b.a,{children:Object(O.jsx)("img",{src:t?o:g.a,width:"200",height:"230",alt:"description"})})]})})})})})})}}]),a}(u.Component)}).call(this,s(45))},647:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return q}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(44),d=s(24),u=s(23),p=s(1),h=s.n(p),m=s(40),j=s(37),b=s(36),g=s(39),f=s(52),x=s(13),O=s(9),v=s(325),w=s(242),y=s(12),N=s.n(y),S=(s(136),s(59)),_=s.n(S),C=s(83),M=s(111),I=s(213),k=s(214),z=s(211),P=s(215),E=s(326),R=(s(611),s(8)),D=s.n(R),T=s(320),A=s(48),B=s(154),F=(s(364),s(64)),U=s(0),q=function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var c,d;return Object(i.a)(this,n),(d=s.call(this,t)).componentDidMount=function(){d.getZones(),d._getcategorys(),d._getIndicateurs()},d.onShowAlert=function(){d.setState({visible:!0},(function(){window.setTimeout((function(){d.setState({visible:!1,message:[]})}),5e3)}))},d.onShowIncident=function(e){d.setState({inProgress:!1,showIncidentModal:!d.state.showIncidentModal}),e&&(console.log("element \xe0 afficher ",e),d.state.newIncident=e)},d.onRequestRapport=function(e){d.setState({inProgress:!1,showRapportModal:!d.state.showRapportModal}),e&&(console.log("Rapport pour ",e),d.state.newReport.incident=e.title)},d.getMuiTheme=function(){return Object(C.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiTablePagination:{caption:{fontSize:"15px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},d.handleShowIncidentModal=function(){d.setState((function(e){return{showIncidentModal:!e.showIncidentModal}})),!1===d.state.showIncidentModal&&d.setState({videoIsLoading:!0,newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}})},d._getIncidents=Object(r.a)(o.a.mark((function t(){var s,a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,d.state.zones,a=e.config.url+"api/incidentbyzone/"+s+"/",console.log("url =>",a),t.prev=4,t.next=7,N.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 7:n=t.sent,console.log(n.data),r=n.data,d.setState({data:r}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[4,13]])}))),d.handleSelectChange=function(e){console.log(e.value);var t=d.state.EditIncident;t=e.value,d.setState({EditIncident:t}),console.log(d.state.EditIncident)},d.handleChangeStatus=function(){var t=Object(r.a)(o.a.mark((function t(s){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.preventDefault(),d.setState({isChanged:!0}),(n=new FormData).append("etat",d.state.EditIncident),n.append("zone",null===(a=d.state.data.filter((function(e){return(null===e||void 0===e?void 0:e.id)===d.state.idInc}))[0])||void 0===a?void 0:a.zone),r=e.config.url+"api/incident/"+d.state.idInc+"/",N.a.put(r,n).then((function(e){console.log(e),d.setState({changeState:!d.state.changeState,isChanged:!1,idInc:null,EditIncident:{}}),d.getIncidentsByZone(),D()("Succ\xe8s"," Statut modifi\xe9 avec succ\xe8s.","success")})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),d.setState({changeState:!d.state.changeState,isChanged:!1}),e.response?(D()("Erreur Ajout","Veuillez reessayer plutard","error"),console.log(e.response.status),console.log(e.response.data)):e.request?(console.log(e.request.data),D()("erreur","Veuillez reessayer","error")):(D()("erreur","Veuillez reessayer","error"),console.log(e.message))}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d.onDeleteIncident=function(e){e&&(console.log("element \xe0 supprimer ",e),d.setState({newIncident:e})),d.setState({show:!0})},d.deleteIncident=function(t){d.setState({inProgress:!0}),t.preventDefault(),console.log(d.state.newIncident.id);var s=e.config.url+"api/incident/";N.a.delete(s+d.state.newIncident.id).then((function(e){console.log(e),d.setState({newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}})})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),e.response?(console.log(e.response.status),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},d.onRowClick=function(e,t){console.log("----RowClick"),console.log("rowData: ",e),console.log("rowMeta: ",t)},d.handleModalOpen=function(){d.setState({newIncidentModal:!d.state.newIncidentModal}),d.setState({newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}})},d.handleModalClose=function(){d.setState({showRapportModal:!d.state.showRapportModal})},d.photoValidation=function(e){var t=document.getElementById(e),s=t.value;return!!/(\.jpg|\.jpeg|\.png|\.gif)$/i.exec(s)||(t.value="",!1)},d.videoValidation=function(e){var t=document.getElementById(e),s=t.value;return!!/(\.mp4|\.avi|\.mpg|\.m4v)$/i.exec(s)||(t.value="",!1)},d.addFileHandleChange=function(e){"photo"===e.target.name&&(d.photoValidation("photo_inc")?d.state.newIncident.photo=e.target.files[0]:d.setState({PhotoExtensionOK:!0})),"video"===e.target.name&&(d.videoValidation("video_inc")?d.state.newIncident.video=e.target.files[0]:d.setState({PhotoExtensionOK:!0}))},d.onChangeState=function(e,t){console.log(e,"item",t,"id"),d.setState({changeState:!d.state.changeState,EditIncident:e,idInc:t},(function(){!1===d.state.changeState&&d.setState({EditIncident:{}})}))},d.addReport=function(t){t.preventDefault(),d.setState({inProgress:!d.state.inProgress});var s={details:d.state.newReport.details,zone:d.state.newIncident.zone,user_id:sessionStorage.user_id,incident:d.state.newIncident.id,date_livraison:d.state.newReport.date_livraison},a=e.config.url+"api/rapport/";console.log(s),N.a.post(a,s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e);d.state.data;d.setState({inProgress:!d.state.inProgress,showRapportModal:!1,showIncidentModal:!1}),D()("Succes"," Votre demande a \xe9t\xe9 envoy\xe9e avec succ\xe8s.","success")})).catch((function(e){d.setState({inProgress:!d.state.inProgress}),e.response?(console.log(e.response.status),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message),D()("Erreur"," Oupss! Une erreur est survenue. Veuillez r\xe9essayer plus tard.","error")}))},d.handleMultiChange=function(e){var t=[];e.map((function(e,s){t.push(e.value)})),d.state.newIncident.category_ids=t},d.handleOneChange=function(e){d.state.newIncident.indicateur_id=e.value,console.log(e)},d._getcategorys=Object(r.a)(o.a.mark((function t(){var s,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/category/",t.prev=2,t.next=5,N.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:a=t.sent,console.log(a.data),n=a.data.results,d.setState({categories:n}),console.log(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),d._getIndicateurs=Object(r.a)(o.a.mark((function t(){var s,a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.user_id,s=e.config.url+"api/indicateur/",t.prev=2,t.next=5,N.a.get(s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:a=t.sent,console.log(a.data),n=a.data.results,d.setState({indicateurs:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),d.addIncident=function(t){t.preventDefault(),d.setState({inProgress:!d.state.inProgress});var s=new FormData;s.append("title",d.state.newIncident.title),s.append("zone",sessionStorage.zone),s.append("description",d.state.newIncident.description),s.append("photo",d.state.newIncident.photo),s.append("video",d.state.newIncident.video),s.append("audio",d.state.newIncident.audio),s.append("lattitude",d.state.newIncident.lattitude),s.append("longitude",d.state.newIncident.longitude),s.append("user_id",sessionStorage.user_id);var a=e.config.url+"api/incident/";console.log(s),N.a.post(a,s).then((function(e){console.log(e);d.state.data;d.setState({inProgress:!d.state.inProgress,newEluModal:!1,newIncidentModal:!1}),D()("Succes","Incident ajoute avec succes","success"),d.setState({newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}}),d.getIncidentsByZone()})).catch((function(e){var t,s,a,n;if(d.setState({inProgress:!d.state.inProgress}),null===e||void 0===e?void 0:e.response)D()(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status,null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data,"error"),console.log(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status),console.log(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data);else if(null===e||void 0===e?void 0:e.request){var o,r;D()(e,null===e||void 0===e||null===(o=e.request)||void 0===o?void 0:o.data,"error"),console.log(null===e||void 0===e||null===(r=e.request)||void 0===r?void 0:r.data)}else D()(e,null===e||void 0===e?void 0:e.message,"error"),console.log(null===e||void 0===e?void 0:e.message);d.setState({newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""}})}))},d.formatDate=function(e){if(e){var t=new Date(e),s=""+(t.getMonth()+1),a=""+t.getDate(),n=t.getFullYear();return s.length<2&&(s="0"+s),a.length<2&&(a="0"+a),[a,s,n].join("-")}return null},d.renderShowIncident=function(){var t=e.config.url.slice(0,-1),s=d.state.newIncident.photo,a=t+"".concat(s),n=d.state.newIncident.audio,o=t+"".concat(n),r=d.state.newIncident.video,i=t+"".concat(r),c=function(){return Object(U.jsx)("div",{className:"loader",children:Object(U.jsx)("h2",{children:"Loading video..."})})},l=d.state.newIncident.lattitude,u=d.state.newIncident.longitude,p=[l,u];return Object(U.jsx)("div",{className:"modal fade",children:Object(U.jsxs)(m.a,{show:d.state.showIncidentModal,onHide:d.handleShowIncidentModal,children:[Object(U.jsx)(j.a,{closeButton:!0,className:"map-color fs-20 t-center",children:Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-md-7",children:"Details Incident"}),Object(U.jsx)("div",{className:"col-md-4",children:Object(U.jsxs)("button",{className:"boutton  button--round-l",onClick:function(e){return d.onRequestRapport(d.state.newIncident)},children:[Object(U.jsx)("i",{className:"fa fa-file","aria-hidden":"true"})," Commander un rapport"]})})]})}),Object(U.jsxs)(b.a,{className:"col-sm-12",children:[Object(U.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Titre:"}),Object(U.jsx)("p",{children:d.state.newIncident.title})]}),Object(U.jsxs)("div",{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Zone:"}),Object(U.jsx)("p",{children:d.state.newIncident.zone})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("div",{className:"col-sm-12 pb-3",children:null===l||null===u||isNaN(u)||isNaN(l)?Object(U.jsx)("p",{className:"danger",children:"Coordonnees non renseign\xe9es ou invalide  "}):Object(U.jsxs)(I.a,{center:p,zoom:13,children:[Object(U.jsx)(k.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),Object(U.jsxs)(z.a,{position:p,children:[Object(U.jsx)(P.a,{children:d.state.newIncident.title}),Object(U.jsx)(E.a,{center:p,radius:500,color:"red"})]})]})}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Description:"}),Object(U.jsx)("p",{children:d.state.newIncident.description})]}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsx)("label",{className:"map-color fs-18",children:"Image:"}),Object(U.jsx)("img",{src:a,alt:""})]}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Video:"}),Object(U.jsxs)("div",{className:"video",children:[Object(U.jsx)(B.Player,{fluid:!1,width:537,height:400,children:Object(U.jsx)("source",{src:i})}),d.state.videoIsLoading?Object(U.jsx)(c,{}):null]})]}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsxs)("label",{htmlFor:"code",className:"map-color fs-18",children:["Audio:"," "]}),Object(U.jsx)("br",{}),Object(U.jsxs)("audio",{controls:!0,src:o,children:["Your browser does not support the",Object(U.jsx)("code",{children:"audio"})," element."]})]})]}),Object(U.jsx)(g.a,{})]})})},d.getZones=Object(r.a)(o.a.mark((function t(){var s,a,n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,N.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:return a=t.sent,console.log("zones=>",a.data),n=a.data.results,r=d.state.user,i=[],t.next=11,n.forEach((function(e){r.zones.forEach((function(t){e.id===t&&(console.log("in get elus=>",t),t=e,i.push(e))}))}));case 11:return r.zones=i,d.setState({zones:n,user:r}),t.next=15,d.getIncidentsByZone();case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[1,17]])}))),d.getIncidentsByZone=Object(r.a)(o.a.mark((function t(){var s,a,n,r,i,c,l,u,p,h,m,j;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],t.prev=1,a=0;case 3:if(!(a<d.state.user.zones.length)){t.next=19;break}return n=d.state.user.zones[a],r=null===n||void 0===n?void 0:n.name,i=e.config.url+"api/incidentbyzone/"+n.name+"/",c=e.config.url+"api/incidentbyzone/"+r.charAt(0).toUpperCase()+r.slice(1)+"/",t.next=10,N.a.get(i,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 10:return l=t.sent,t.next=13,N.a.get(c,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 13:for(u=t.sent,p=0;p<l.data.length;p++)h=l.data[p],s.push(h);for(m=0;m<u.data.length;m++)j=u.data[m],s.push(j);case 16:a++,t.next=3;break;case 19:d.setState({data:s.filter((function(e,t,s){return s.findIndex((function(t){return t.id===e.id}))===t})).sort((function(e,t){return(null===t||void 0===t?void 0:t.id)-(null===e||void 0===e?void 0:e.id)}))}),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),console.log(t.t0.message);case 25:case"end":return t.stop()}}),t,null,[[1,22]])}))),d.onSelectZone=function(e){console.log("choice=>",e);var t=d.state.obj;d.setState({data:t[e.value],displayZone:e.value})},d.state={data:[],listIncZone:[],eluZones:[],inProgress:!1,newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:"",etat:"",indicateur_id:"",category_ids:[]},EditIncident:(c={title:"",zone:"",description:"",lattitude:"",longitude:"",user_id:"",etat:""},Object(a.a)(c,"zone",""),Object(a.a)(c,"indicateur_id",""),Object(a.a)(c,"category_ids",[]),c),newReport:{details:"",zone:"",incident_id:"",date_livraison:""},newIncidentModal:!1,showIncidentModal:!1,showRapportModal:!1,visible:!1,error:!1,message:[],PhotoExtensionOK:!1,changeState:!1,categories:[],indicateurs:[],isChanged:!1,list_zones:[],displayZone:"",obj:"",load:!1,user:JSON.parse(sessionStorage.user),zones:[],idInc:null},d.handleSelectChange=d.handleSelectChange.bind(Object(l.a)(d)),d}return Object(c.a)(n,[{key:"getIndicateurById",value:function(e){for(var t="",s=0;s<this.state.indicateurs.length;s++){var a=this.state.indicateurs[s];a.id===e&&(t=a.name)}return t}},{key:"getCategoryById",value:function(e){var t=this,s=[];if(e)return e.map((function(e,a){for(var n=0;n<t.state.categories.length;n++){var o=t.state.categories[n];o.id===e&&s.push(o.name+" ")}})),s}},{key:"formatStatus",value:function(e){var t=this;return"resolved"===e.etat?Object(U.jsx)("button",{onClick:function(){return t.onChangeState(e)},className:"admin-s",children:"resolu"}):Object(U.jsx)("button",{onClick:function(){return t.onChangeState(e)},className:"visitor-s",children:"en attente"})}},{key:"render",value:function(){var e,t,s=this,n=this.state.categories.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key"}})),o=this.state.indicateurs.map((function(e){return{value:e.id,label:e.name,key:e.id+"unique-key"}})),r=(this.state.list_zones.map((function(e){return{value:e.name,label:e.name,key:e.id+"unique-key",id:e.id}})),[{label:"En attente",value:"declared"},{label:"Pris en charge",value:"taken_into_account"},{label:"En cours de r\xe9soluton",value:"in_progress"},{label:"R\xe9solu",value:"resolved"}]),i=Object(U.jsx)("div",{className:"modal fade",children:Object(U.jsxs)(m.a,{backdrop:"static",keyboard:!1,show:this.state.changeState,onHide:this.onChangeState,children:[Object(U.jsx)(j.a,{closeButton:!0,children:"Status Incident"}),Object(U.jsx)(b.a,{children:Object(U.jsx)(f.a,{encType:"multipart/form-data",children:Object(U.jsxs)(x.a,{children:[Object(U.jsx)("label",{htmlFor:"etat",children:"Statut Incident:"}),Object(U.jsx)(A.a,{className:"basic-single",classNamePrefix:"select",defaultValue:r.filter((function(e){return e.value===s.state.EditIncident}))[0],name:"etat",options:r,onChange:this.handleSelectChange})]})})}),Object(U.jsx)(g.a,{children:this.state.isChanged?Object(U.jsxs)(O.a,{className:"btn btn-primary",children:["Modification en cours...",Object(U.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(U.jsx)(O.a,{className:"btn btn-primary",onClick:this.handleChangeStatus,children:"Modifier"})})]})}),c=Object(U.jsxs)(m.a,{show:this.state.showRapportModal,onHide:this.handleModalClose,children:[Object(U.jsxs)(j.a,{closeButton:!0,children:["Commande de rapport pour"," ",Object(U.jsx)("span",{className:"map-color",children:this.state.newIncident.title})]}),Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(b.a,{className:"col-sm-12",children:[Object(U.jsxs)(x.a,{className:"col-sm-12",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Details:"}),Object(U.jsx)("textarea",{className:"form-control",type:"text",id:"prenom",name:"details",placeholder:"Les details du rapport",value:this.state.newReport.details,onChange:function(e){var t=s.state.newReport;t.details=e.target.value,s.setState({newReport:t},console.log(s.state))}})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Zone:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"zone",value:this.state.newIncident.zone,onChange:function(e){var t=s.state.newReport;t.zone=e.target.value,s.setState({newReport:t},console.log(s.state))},disabled:!0})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Incident Concerne:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"incident",name:"incident",placeholder:this.state.newIncident.id,value:this.state.newIncident.id,onChange:function(e){var t=s.state.newReport;t.incident_id=e.target.value,s.setState({newReport:t},console.log(s.state))},disabled:!0})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"phone",children:"Date souhait\xe9e de Livraison:"}),Object(U.jsx)("input",{className:"form-control",type:"date",id:"phone",name:"date_livraison",value:this.state.newReport.date_livraison,onChange:function(e){var t=s.state.newReport;t.date_livraison=e.target.value,s.setState({newReport:t},console.log(s.state))}})]})]}),Object(U.jsxs)(g.a,{children:[this.state.inProgress?Object(U.jsxs)(O.a,{className:"btn btn-primary",children:["Loading...",Object(U.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(U.jsx)(O.a,{className:"btn btn-primary",onClick:this.addReport,children:"Ajouter"})," ",Object(U.jsx)(O.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]}),l=Object(U.jsxs)(m.a,{show:this.state.newIncidentModal,onHide:this.handleModalOpen,children:[Object(U.jsx)(j.a,{closeButton:!0,children:"Nouveau Incident"}),Object(U.jsxs)(f.a,{encType:"multipart/form-data",children:[Object(U.jsxs)(b.a,{className:"col-sm-12",children:[Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Titre:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"prenom",name:"title",value:this.state.newIncident.title,onChange:function(e){var t=s.state.newIncident;t.title=e.target.value,s.setState({newIncident:t},console.log(s.state))}})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Zone:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"zone",name:"zone",value:sessionStorage.zone,onChange:function(e){var t=s.state.newIncident;t.zone=e.target.value,s.setState({newIncident:t},console.log(s.state))},disabled:!0})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Description:"}),Object(U.jsx)("textarea",{className:"form-control",type:"text",id:"desc",name:"description",value:this.state.newIncident.description,onChange:function(e){var t=s.state.newIncident;t.description=e.target.value,s.setState({newIncident:t},console.log(s.state))}})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Categories:"}),Object(U.jsx)(A.a,(e={className:"mt-4 col-md-6 col-offset-4",isMulti:!0,name:"categories",options:n},Object(a.a)(e,"className","basic-multi-select map-color"),Object(a.a)(e,"onChange",this.handleMultiChange),Object(a.a)(e,"classNamePrefix","select"),e))]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Indicateurs:"}),Object(U.jsx)(A.a,(t={className:"mt-4 col-md-6 col-offset-4",name:"indicateurs",options:o},Object(a.a)(t,"className","basic-multi-select map-color"),Object(a.a)(t,"onChange",this.handleOneChange),Object(a.a)(t,"classNamePrefix","select"),t))]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"photo_inc",children:"Photo:"}),Object(U.jsx)("input",{className:"form-control",type:"file",id:"photo_inc",name:"photo",onChange:this.addFileHandleChange})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"video_inc",children:"Video:"}),Object(U.jsx)("input",{className:"form-control",type:"file",id:"video_inc",name:"video",onChange:this.addFileHandleChange})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"lat",children:"Lattitude:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"lat",name:"lattitude",value:this.state.newIncident.lattitude,onChange:function(e){var t=s.state.newIncident;t.lattitude=e.target.value,s.setState({newIncident:t},console.log(s.state))}})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"aud",children:"Audio:"}),Object(U.jsx)("input",{className:"form-control",type:"file",id:"aud",name:"video",onChange:function(e){var t=s.state.newIncident;t.audio=e.target.files[0],s.setState({newIncident:t},console.log(s.state))}})]}),Object(U.jsxs)(x.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"long",children:"Longitude:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"long",name:"longitude",value:this.state.newIncident.longitude,onChange:function(e){var t=s.state.newIncident;t.longitude=e.target.value,s.setState({newIncident:t},console.log(s.state))}})]})]}),Object(U.jsxs)(g.a,{children:[this.state.inProgress?Object(U.jsxs)(O.a,{className:"btn btn-primary",children:["Loading...",Object(U.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(U.jsx)(O.a,{className:"btn btn-primary",onClick:this.addIncident,children:"Ajouter"})," ",Object(U.jsx)(O.a,{className:"btn btn-danger",onClick:this.handleModalOpen,children:"Annuler"})]})]})]});if(this.state.show)return Object(U.jsxs)(v.a,{bsStyle:"danger",onDismiss:function(e){return s.setState({show:!1})},children:[Object(U.jsx)("h4",{children:"Suppresion"}),Object(U.jsx)("p",{children:"Voulez vous vraiment supprimer"}),Object(U.jsxs)("p",{children:[this.state.inProgress?Object(U.jsxs)(O.a,{className:"btn btn-primary",children:["Loading...",Object(U.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(U.jsx)(O.a,{bsStyle:"danger",onClick:function(e){return s.deleteIncident(e)},children:"Supprimer"}),Object(U.jsx)("span",{children:" or "}),Object(U.jsx)(O.a,{onClick:function(e){return s.setState({show:!1})},children:"Annuler"})]})]});var d=this.state.data,u=[{name:"id",label:"ID",options:{filter:!1,sort:!0}},{name:"title",label:"Titre",options:{filter:!0,filterType:"dropdown",sort:!0}},{name:"description",label:"Description",options:{filter:!0,sort:!1}},{name:"categorie",label:"Categories",options:{filter:!0,sort:!1}},{name:"indicateur",label:"Indicateur",options:{filter:!0,sort:!1}},{name:"etat",label:"Statut",options:{filter:!0,filterType:"custom",sort:!1,customBodyRender:function(e,t,a){return"resolved"===e?Object(U.jsx)("button",{onClick:function(){return s.onChangeState(e,t.rowData[0])},className:"admin-s",children:"R\xe9solu"}):"declared"===e?Object(U.jsx)("button",{onClick:function(){return s.onChangeState(e,t.rowData[0])},className:"visitor-s",children:"En attente"}):"taken_into_account"===e?Object(U.jsx)("button",{onClick:function(){return s.onChangeState(e,t.rowData[0])},className:"taken_into_account",children:"Pris en Charge"}):"in_progress"===e?Object(U.jsx)("button",{onClick:function(){return s.onChangeState(e,t.rowData[0])},className:"citizen-s",children:"En cours"}):null},customFilterListOptions:{render:function(e){return e},update:function(e,t,s){return e[s]=[],console.log("update",e[s]),e}},filterOptions:{logic:function(e,t,s){return!!(t.length&&t.length>1)&&!t.includes(e)},display:function(e,t,s,a){console.log("object",e[s]);return Object(U.jsxs)("div",{className:"form-group pos-relative mb-4",children:[Object(U.jsx)("label",{className:"label-state",htmlFor:"etat",children:"Etat"}),Object(U.jsxs)("select",{className:"form-control select-state",name:"etat",id:"etat",multiple:!1,value:e[s]||[],onChange:function(n){e[s]=n.target.value,t(e[s],s,a)},children:[Object(U.jsx)("option",{value:"",children:"All"}),[{label:"En attente",value:"declared"},{label:"Prise en charge",value:"taken_into_account"},{label:"En cours de r\xe9soluton",value:"in_progress"},{label:"R\xe9solu",value:"resolved"}].map((function(e){return Object(U.jsx)("option",{value:e.value,children:e.label},e.value)}))]})]})}}}},{name:"date creation",label:"Date Creation",options:{filter:!0,filterType:"dropdown",sort:!0}},{name:"date resolution",label:"Date Resolution",options:{filter:!0,filterType:"dropdown",sort:!1}},{name:"zone",label:"Zone",options:{filter:!0,sort:!0}},{name:"actions",label:"Action",options:{filter:!1,sort:!1,download:!1}}],p=this.state.data.map((function(e,t){return[null===e||void 0===e?void 0:e.id,e.title,e.description,s.getCategoryById(e.category_ids),s.getIndicateurById(e.indicateur_id),e.etat,s.formatDate(e.created_at),s.formatDate(e.updated_at),e.zone,Object(U.jsx)("div",{className:"btn-group",children:Object(U.jsx)(O.a,{onClick:function(){return s.onShowIncident(e)},className:"btn btn-default btn-xs map-color nb",children:Object(U.jsx)("i",{className:"fas fa-eye fa-x"})})})]}));return Object(U.jsxs)("div",{className:"content",children:[Object(U.jsxs)(w.a,{fluid:!0,children:[Object(U.jsx)(F.b,{content:Object(U.jsxs)(h.a.Fragment,{children:[Object(U.jsx)(O.a,{className:"pull-right",style:L,children:Object(U.jsxs)(T.CSVLink,{filename:"incidents.csv",data:d,headers:[{label:"Titre",key:"title"},{label:"Description",key:"description"},{label:"Zone",key:"zone"},{label:"Lattitude",key:"lattitude"},{label:"Longitude",key:"longitude"},{label:"Etat",key:"etat"},{label:"Utilisateur",key:"user_id"},{label:"Indicateur",key:"indicateur_id"},{label:"Categorie",key:"category_id"}],children:[Object(U.jsx)("i",{className:"fa fa-download"}),"Export"]})}),Object(U.jsx)(O.a,{style:L,onClick:this.handleModalOpen,className:"pull-right",children:"Nouveau"})]})}),Object(U.jsx)(M.a,{theme:this.getMuiTheme(),children:Object(U.jsx)(_.a,{title:"Liste des Incidents: "+this.state.displayZone,data:p,columns:u,options:{filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0,searchBox:!0,csv:!0,selectableRows:!1}})})]}),this.renderShowIncident(),c,l,i]})}}]),n}(p.Component),L={marginTop:"-1em",marginRight:"5px"}}).call(this,s(45))},648:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return T}));var a=s(17),n=s(156),o=s(10),r=s.n(o),i=s(20),c=s(21),l=s(22),d=s(24),u=s(23),p=s(1),h=s(9),m=s(325),j=s(73),b=s(32),g=s(40),f=s(37),x=s(52),O=s(36),v=s(13),w=s(39),y=s(48),N=s(12),S=s.n(N),_=s(102),C=s(8),M=s.n(C),I=s(59),k=s.n(I),z=s(83),P=s(111),E=s(141),R=s.n(E),D=s(0),T=function(t){Object(d.a)(o,t);var s=Object(u.a)(o);function o(t){var a;return Object(c.a)(this,o),(a=s.call(this,t)).componentDidMount=function(){a._getRapports()},a._getIncidents=Object(i.a)(r.a.mark((function t(){var s,n,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,n=e.config.url+"api/incidentbyzone/"+s+"/",t.prev=2,t.next=5,S.a.get(n,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:o=t.sent,console.log(o.data),i=o.data,console.log(i),a.setState({incidents:i}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[2,12]])}))),a._getRapports=Object(i.a)(r.a.mark((function t(){var s,o,i,c,l,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.user_id,o=e.config.url+"api/rapportbyuser/"+s+"/",t.prev=2,t.next=5,S.a.get(o,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:return i=t.sent,c=i.data,t.next=9,a._getIncidents();case 9:c.forEach((function(e){e.customIncidents=[],e.incidents.forEach((function(t){a.state.incidents.forEach((function(s){t===s.id&&(e.customIncidents=[].concat(Object(n.a)(e.customIncidents),[s]))}))}))})),a.setState({data:c,count_rapports:c.length}),l=0,d=0,a.setState({rapports_dispo:l,rapports_nondispo:d}),a.state.data.map((function(e,t){return e.disponible?(l+=1,a.setState({rapports_dispo:l})):(d+=1,a.setState({rapports_nondispo:d}))})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[2,17]])}))),a.getMuiTheme=function(){return Object(z.a)({overrides:{MuiTypography:{h6:{fontSize:"1.5rem"}},MuiTablePagination:{caption:{fontSize:"15px"}},MUIDataTableHeadCell:{root:{fontSize:"16px",color:"#38A0DB"}},MUIDataTableBodyCell:{root:{fontSize:"13px"}},MuiInputLabel:{animated:{fontSize:"21px"}},MuiMenuItem:{root:{fontSize:"15px"}},MUIDataTableToolbar:{iconActive:{color:"#38A0DB"}}}})},a.handleModalOpen=function(){a.setState({showRapportModal:!a.state.showRapportModal})},a.onShowRapport=function(e){a.setState({inProgress:!1,showRapportModal:!a.state.showRapportModal}),e&&(console.log("element \xe0 afficher ",e),a.setState({newRapport:e}))},a.handleShowRapportModal=function(){a.setState((function(e){return{showRapportModal:!e.showRapportModal}})),!1===a.state.showRapportModal&&a.setState({newRapport:{details:"",zone:"",date_livraison:"",disponible:"",incident:""}})},a.onDeleteRapport=function(e){e&&(window.scrollTo(0,0),console.log("element \xe0 supprimer ",e),a.setState({itemDelete:e})),a.setState({show:!0})},a.deleteRapport=function(t){a.setState({inProgress:!0}),t.preventDefault(),a.state.itemDelete.statut="canceled",a.state.itemDelete.user_id=a.state.itemDelete.user_id.id;var s=e.config.url+"api/rapport/"+a.state.itemDelete.id+"/",n={headers:{Authorization:"Bearer ".concat(window.sessionStorage.getItem("token"))}};S.a.put(s,a.state.itemDelete,n).then((function(e){a.setState({inProgress:!a.state.inProgress}),a.setState({show:!1}),M()("Succes","Rapport annul\xe9","Warning"),a._getRapports(),console.log(e),a.setState({itemDelete:{}})})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(M()("Erreur","Veuillez reessayer","error"),console.log(e.response.status),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message),a.setState({show:!1})}))},a.updateReport=function(t){t.preventDefault(),a.state.newRapport.statut="edit",a.state.newRapport.user_id=a.state.newRapport.user_id.id;var s=e.config.url+"api/rapport/"+a.state.newRapport.id+"/";S.a.put(s,a.state.newRapport,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),M()("Succ\xe8s","Votre rapport a \xe9t\xe9 modifi\xe9 avec succ\xe8s.","success"),a.setState({inProgress:!a.state.inProgress,showRapportModal:!1,newRapport:{}}),a._getRapports()})).catch((function(e){a.setState({inProgress:!a.state.inProgress}),e.response?(console.log(e.response.status),M()("Erreur","Erreur lors de l'ajout, veuillez r\xe9essayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},a.handleMultiChange=function(e,t){console.log("test=>",t);var s=a.state.newRapport;a.state.user;if("select-option"===t.action){var n=s.incidents.findIndex((function(e){return e===t.option.value}));console.log("int",String(t.option.value)),-1===n&&s.incidents.push(String(t.option.value))}if("remove-value"===t.action){var o=s.incidents.findIndex((function(e){return parseInt(e)===t.removedValue.value}));-1!==o&&s.incidents.splice(o)}"clear"===t.action&&(s.incidents=[]),a.setState({newRapport:s})},a.state={data:[],inProgress:!1,newRapport:{},newIncident:{title:"",zone:"",description:"",photo:""},newRapportModal:!1,showRapportModal:!1,visible:!1,error:!1,message:[],count_rapports:"",rapports_dispo:"",rapports_nondispo:"",show:!1,itemDelete:{},incidents:[]},a}return Object(l.a)(o,[{key:"createLegend",value:function(e){for(var t=[],s=0;s<e.names.length;s++){var a="fa fa-circle text-"+e.types[s];t.push(Object(D.jsx)("i",{className:a},s)),t.push(" "),t.push(e.names[s])}return t}},{key:"render",value:function(){var t,s=this,n=this.state.incidents.map((function(e){return{value:e.id,label:e.title,key:e.id+"unique-key"}})),o=[];if(this.state.newRapport&&void 0!==this.state.newRapport.incidents&&this.state.newRapport.incidents.length&&n.length)for(var r=0;r<n.length;r++)for(var i=n[r],c=0;c<this.state.newRapport.incidents.length;c++){var l=this.state.newRapport.incidents[c];parseInt(l)===parseInt(i.value)&&o.push(i)}var d=this.state.data.map((function(t,a){var n="";return n=t.disponible?"oui":"non",[t.details,t.zone,R()(t.date_livraison).format("DD/MM/YYYY"),n,t.customIncidents.map((function(e){return e.title+" ,"})),"new"===t.statut&&!1===t.disponible?Object(D.jsx)("span",{className:"label label-info",children:"Nouveau"}):"edit"===t.statut&&!1===t.disponible?Object(D.jsx)("span",{className:"label label-warning",children:"Modifi\xe9"}):"canceled"===t.statut&&!1===t.disponible?Object(D.jsx)("span",{className:"label label-danger",children:"Annul\xe9"}):!0===t.disponible?Object(D.jsx)("span",{className:"label label-success",children:"Trait\xe9"}):null,null===t.file?Object(D.jsx)("span",{className:"label label-danger",children:"Rapport non disponible"}):Object(D.jsx)("span",{className:"label label-success",children:Object(D.jsx)("a",{href:"".concat(e.config.url.slice(0,-1)).concat(t.file),style:{fontSize:"10px",fontWeight:"bold",color:"white"},target:"_blank",download:!0,children:"T\xe9l\xe9charger le rapport"})}),Object(D.jsxs)("div",{className:"btn-group",children:[Object(D.jsx)(h.a,{onClick:function(e){return s.onShowRapport(t)},className:"btn btn-default btn-xs map-color nb",children:Object(D.jsx)("i",{className:"fas fa-edit fa-x"})}),Object(D.jsx)(h.a,{className:"btn btn-danger btn-xs red-color nb",onClick:function(e){s.onDeleteRapport(t),s.setState({inProgress:!1})},children:Object(D.jsx)("i",{className:"fas fa-trash fa-x"})})," "]})]}));return Object(D.jsxs)("div",{className:"content",children:[this.state.show&&Object(D.jsxs)(m.a,{bsStyle:"danger",onDismiss:function(e){return s.setState({show:!1})},children:[Object(D.jsx)("h4",{children:"Attention!!!"}),Object(D.jsx)("p",{children:"Voulez vous vraiment annuler ce rapport ?"}),Object(D.jsxs)("p",{children:[this.state.inProgress?Object(D.jsxs)(h.a,{className:"btn btn-primary",children:["Loading...",Object(D.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(D.jsx)(h.a,{bsStyle:"danger",onClick:this.deleteRapport,children:"Oui"}),Object(D.jsx)("span",{children:" or "}),Object(D.jsx)(h.a,{onClick:function(e){return s.setState({show:!1})},children:"Annuler"})]})]}),Object(D.jsxs)(j.a,{children:[Object(D.jsx)(b.a,{lg:4,sm:6,children:Object(D.jsx)(_.a,{bigIcon:Object(D.jsx)("i",{className:"pe-7s-server text-warning"}),statsText:"Rapports Commandes",statsValue:this.state.count_rapports,statsIcon:Object(D.jsx)("i",{className:"fa fa-refresh"}),statsIconText:"Vos Rapports"})}),Object(D.jsx)(b.a,{lg:4,sm:6,children:Object(D.jsx)(_.a,{bigIcon:Object(D.jsx)("i",{className:"pe-7s-wallet text-success"}),statsText:"Rapports Disponibles",statsValue:this.state.rapports_dispo,statsIcon:Object(D.jsx)("i",{className:"fa fa-calendar-o"}),statsIconText:"Rapports livres"})}),Object(D.jsx)(b.a,{lg:4,sm:6,children:Object(D.jsx)(_.a,{bigIcon:Object(D.jsx)("i",{className:"pe-7s-graph1 text-danger"}),statsText:"Rapports Non Disponibles",statsValue:this.state.rapports_nondispo,statsIcon:Object(D.jsx)("i",{className:"fa fa-clock-o"}),statsIconText:"Rapports en attente"})})]}),Object(D.jsx)(h.a,{onClick:function(){return s.props.history.push("/elu/add-rapport")},className:"pull-right",children:"Nouveau Rapport"}),Object(D.jsx)(P.a,{theme:this.getMuiTheme(),children:Object(D.jsx)(k.a,{title:"Liste des Rapports",data:d,columns:[{name:"details",label:"Details",options:{filter:!0,filterType:"dropdown",sort:!0}},{name:"zone",label:"Zone",options:{filter:!0,filterType:"dropdown",sort:!1}},{name:"date_livraison",label:"Date Livraison",options:{filter:!0,filterType:"dropdown",sort:!1}},{name:"disponible",label:"Disponible",options:{filter:!0,filterType:"dropdown",sort:!1}},{name:"incident",label:"Incident",options:{sort:!0,filter:!0,filterType:"dropdown"}},{name:"status",label:"Etat",options:{sort:!0,filter:!1,filterType:"dropdown"}},{name:"file",label:"Rapport",options:{sort:!1,filter:!1}},{name:"actions",label:"Action",options:{filter:!1,sort:!1}}],options:{filter:!0,filterType:"dropdown",responsive:"stacked",search:!0,hasIndex:!0,emptyTable:"No data available in table"}})}),Object(D.jsx)("div",{className:"modal fade",children:Object(D.jsxs)(g.a,{show:this.state.showRapportModal,onHide:this.handleShowRapportModal,children:[Object(D.jsx)(f.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Details Rapport"}),Object(D.jsx)(x.a,{encType:"multipart/form-data",children:Object(D.jsxs)(O.a,{className:"col-sm-12",children:[Object(D.jsxs)(v.a,{className:"col-sm-12",children:[Object(D.jsx)("p",{className:"title mt-3",children:"Type de Rapports:"}),Object(D.jsx)("div",{children:[{id:1,value:"zone",label:"Zone"},{id:2,value:"detaille",label:"Detaill\xe9"}].map((function(e,t){return Object(D.jsxs)("div",{children:[Object(D.jsx)("input",{type:"radio",name:"type",checked:s.state.newRapport.type&&s.state.newRapport.type===e.value,value:e.value,onChange:function(e){var t=s.state.newRapport;t.type=e.target.value,s.setState({newRapport:t},console.log(s.state.newRapport))}}),Object(D.jsx)("label",{children:e.label})]},t)}))})]}),Object(D.jsxs)(v.a,{className:"col-sm-12",children:[Object(D.jsx)("label",{htmlFor:"from",children:"Details:"}),Object(D.jsx)("textarea",{className:"form-control",type:"text",id:"prenom",name:"details",value:this.state.newRapport.details,onChange:function(e){var t=s.state.newRapport;t.details=e.target.value,s.setState({newRapport:t},console.log(s.state.newRapport))}})]}),Object(D.jsxs)(v.a,{className:"col-sm-3",children:[Object(D.jsx)("label",{htmlFor:"from",children:"Zone:"}),Object(D.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"zone",value:sessionStorage.zone,onChange:function(e){var t=s.state.newRapport;t.zone=e.target.value,s.setState({newRapport:t},console.log(s.state.newRapport))},disabled:!0})]}),Object(D.jsxs)(v.a,{className:"col-sm-4",children:[Object(D.jsx)("label",{htmlFor:"",children:"Type:"}),Object(D.jsx)(y.a,(t={className:"mt-4 col-md-6 col-offset-4",isMulti:!0,name:"incidents",value:o,options:n},Object(a.a)(t,"className","basic-multi-select map-color"),Object(a.a)(t,"onChange",this.handleMultiChange),Object(a.a)(t,"classNamePrefix","select"),t))]}),Object(D.jsxs)(v.a,{className:"col-sm-5",children:[Object(D.jsx)("label",{htmlFor:"phone",children:"Date livraison:"}),Object(D.jsx)("input",{className:"form-control",type:"date",id:"phone",name:"date_livraison",value:this.state.newRapport.date_livraison,onChange:function(e){var t=s.state.newRapport;t.date_livraison=e.target.value,s.setState({newRapport:t},console.log(s.state.newRapport))}})]}),Object(D.jsx)("p",{}),Object(D.jsxs)(v.a,{className:"col-sm-6",children:[this.state.inProgress?Object(D.jsxs)(h.a,{className:"btn  btn-white btn-round",children:["Loading...",Object(D.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(D.jsx)(h.a,{className:"btn btn-white btn-round",onClick:this.updateReport,children:"Modifer"})," "]}),Object(D.jsx)(v.a,{className:"col-sm-6",children:Object(D.jsx)(h.a,{className:"btn btn-red btn-round",onClick:this.handleModalOpen,children:"Annuler"})})]})}),Object(D.jsx)(w.a,{})]})})]})}}]),o}(p.Component)}).call(this,s(45))},649:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return I}));var a=s(17),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(44),d=s(24),u=s(23),p=s(1),h=s(9),m=s(40),j=s(37),b=s(36),g=s(52),f=s(13),x=s(39),O=s(12),v=s.n(O),w=s(8),y=s.n(w),N=s(59),S=s.n(N),_=s(83),C=s(111),M=s(0),I=function(t){Object(d.a)(n,t);var s=Object(u.a)(n);function n(t){var c;return Object(i.a)(this,n),(c=s.call(this,t)).componentDidMount=function(){c.getZones(),c.__getMessageUser()},c.__getMessageUser=Object(r.a)(o.a.mark((function t(){var s,a,n,r,i,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[],t.prev=1,a=c.state.user.id,n=e.config.url+"api/messagebyuser/"+a+"/",t.next=6,v.a.get(n,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 6:for(r=t.sent,i=0;i<r.data.length;i++)l=r.data[i],s.push(l);c.setState({userMessages:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),c.__getMessageZones=Object(r.a)(o.a.mark((function t(){var s,a,n,r,i,l,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],t.prev=1,a=0;case 3:if(!(a<c.state.user.zones.length)){t.next=13;break}return n=c.state.user.zones[a],r=e.config.url+"api/messagebyzone/"+n.name+"/",t.next=8,v.a.get(r,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 8:for(i=t.sent,l=0;l<i.data.length;l++)d=i.data[l],s.push(d);case 10:a++,t.next=3;break;case 13:c.setState({communauteMessages:s}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.log(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[1,16]])}))),c.getZones=Object(r.a)(o.a.mark((function t(){var s,a,n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,v.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:return a=t.sent,console.log("zones=>",a.data),n=a.data.results,r=c.state.user,i=[],t.next=11,n.forEach((function(e){r.zones.forEach((function(t){e.id===t&&(console.log("in get elus=>",t),t=e,i.push(e))}))}));case 11:return r.zones=i,c.setState({zones:n,user:r}),t.next=15,c.__getMessageZones();case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[1,17]])}))),c.getMuiTheme=function(){var e;return Object(_.a)({overrides:(e={MuiTypography:{h6:{fontSize:"1.5rem"}},MuiTablePagination:{caption:{fontSize:"15px"}}},Object(a.a)(e,"MuiTablePagination",{caption:{fontSize:"15px"}}),Object(a.a)(e,"MUIDataTableHeadCell",{root:{fontSize:"16px",color:"#38A0DB"}}),Object(a.a)(e,"MUIDataTableBodyCell",{root:{fontSize:"13px"}}),Object(a.a)(e,"MuiInputLabel",{animated:{fontSize:"21px"}}),Object(a.a)(e,"MuiMenuItem",{root:{fontSize:"15px"}}),Object(a.a)(e,"MUIDataTableToolbar",{iconActive:{color:"#38A0DB"}}),e)})},c.formatDate=function(e){if(e){var t=new Date(e),s=""+(t.getMonth()+1),a=""+t.getDate(),n=t.getFullYear();return s.length<2&&(s="0"+s),a.length<2&&(a="0"+a),[a,s,n].join("-")}return null},c.formatUser=function(e){return console.log("useruseruser",e),e?e.first_name+" "+e.last_name:null},c.onReplyMessage=function(){c.setState((function(e){return{onReply:!e.onReply}})),!1===c.state.onReply&&c.setState({newMessage:{objet:"",message:"",communaute:"",user_id:""}})},c.onReplyM=function(e){var t=c.state.fields;e&&(console.log("message a repondre ",e),t.message=e.id,t.elu=c.state.user.id,c.setState({newMessage:e})),c.setState({onReply:!0,fields:t})},c.onshowMessage=function(e){e&&(console.log("message a afficher ",e),c.setState({newMessage:e})),c.setState({showMessage:!0})},c.handleShowMessage=function(){c.setState((function(e){return{showMessage:!e.showMessage}})),!1===c.state.onShow&&c.setState({newMessage:{objet:"",message:"",communaute:"",user_id:""}})},c.handleReplyMessage=function(t){t.preventDefault(),c.setState({inProgress:!c.state.inProgress});var s=e.config.url+"api/responsemessage/";console.log("fields",c.state.fields),v.a.post(s,c.state.fields,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),c.setState({inProgress:!c.state.inProgress,onReply:!c.state.onReply,fields:{}}),y()("Succes","Votre message a ete envoye","success")})).catch((function(e){c.setState({inProgress:!c.state.inProgress}),e.response?(console.log(e.response.status),y()("Erreur","Erreur lors de l'envoie, veuillez reessayer","error"),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},c.state={user:JSON.parse(sessionStorage.user),data:[],onReply:!1,showMessage:!1,inProgress:!1,communauteMessages:[],userMessages:[],newMessage:{objet:"",message:"",communaute:"",user_id:"",reply:""},fields:{},zones:[]},c.onReplyM=c.onReplyM.bind(Object(l.a)(c)),c.onshowMessage=c.onshowMessage.bind(Object(l.a)(c)),c.handleShowMessage=c.handleShowMessage.bind(Object(l.a)(c)),c.handleReplyMessage=c.handleReplyMessage.bind(Object(l.a)(c)),c}return Object(c.a)(n,[{key:"render",value:function(){var e,t=this;this.state.communauteMessages.length&&this.state.communauteMessages.forEach((function(e){t.state.zones.forEach((function(t){e.zone===t.id&&(e.zone=t)}))}));var s=this.state.userMessages.map((function(e,s){return[t.formatUser(e.user_id),e.objet,t.formatDate(e.created_at),Object(M.jsxs)("div",{className:"btn-group",children:[Object(M.jsx)(h.a,{className:"btn btn-default btn-xs map-color nb",onClick:function(){return t.onReplyM(e)},children:Object(M.jsx)("i",{className:"fa fa-comment fa-x"})}),Object(M.jsx)(h.a,{className:"btn btn-default btn-xs map-color nb",onClick:function(){return t.onshowMessage(e)},children:Object(M.jsx)("i",{className:"fa fa-eye fa-x"})})]})]})),a=this.state.communauteMessages.map((function(e,s){return[t.formatUser(e.user_id),e.objet,t.formatDate(e.created_at),e.zone.name,Object(M.jsxs)("div",{className:"btn-group",children:[Object(M.jsx)(h.a,{className:"btn btn-default btn-xs map-color nb",onClick:function(){return t.onReplyM(e)},children:Object(M.jsx)("i",{className:"fa fa-comment fa-x"})}),Object(M.jsx)(h.a,{className:"btn btn-default btn-xs map-color nb",onClick:function(){return t.onshowMessage(e)},children:Object(M.jsx)("i",{className:"fa fa-eye fa-x"})}),Object(M.jsx)(h.a,{className:"btn btn-danger btn-xs red-color nb"})," "]})]})),n={filter:!0,filterType:"dropdown",responsive:"stacked",hasIndex:!0},o=Object(M.jsx)("div",{className:"modal fade",children:Object(M.jsxs)(m.a,{size:"sm",show:this.state.onReply,onHide:this.onReplyMessage,children:[Object(M.jsxs)(j.a,{closeButton:!0,children:["Discussion :",this.state.newMessage.objet]}),Object(M.jsx)(b.a,{className:"col-sm-12",children:Object(M.jsxs)(g.a,{encType:"multipart/form-data",children:[Object(M.jsx)(f.a,{className:"col-sm-6",children:Object(M.jsxs)("label",{htmlFor:"from",children:["Message:",Object(M.jsx)("p",{children:this.state.newMessage.message})]})}),Object(M.jsxs)(f.a,{className:"col-sm-12",children:[Object(M.jsx)("label",{htmlFor:"from",children:"Reponse:"}),Object(M.jsx)("textarea",{className:"form-control",type:"text",id:"msg",name:"message",placeholder:"Votre Reponse",value:this.state.fields?this.state.fields.response:"",onChange:function(e){var s=t.state.fields;s.response=e.target.value,t.setState({fields:s})}})]})]})}),Object(M.jsxs)(x.a,{children:[this.state.inProgress?Object(M.jsxs)(h.a,{className:"btn btn-primary",children:["Loading...",Object(M.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(M.jsx)(h.a,{className:"btn btn-primary",onClick:function(e){return t.handleReplyMessage(e)},children:"Repondre"})," ",Object(M.jsx)(h.a,{className:"btn btn-danger",onClick:this.onReplyMessage,children:"Annuler"})]})]})}),r=Object(M.jsx)("div",{className:"modal fade",children:Object(M.jsxs)(m.a,{show:this.state.showMessage,onHide:this.handleShowMessage,children:[Object(M.jsx)(j.a,{closeButton:!0,className:"map-color fs-20 t-center",children:this.state.newMessage.objet}),Object(M.jsxs)(b.a,{className:"col-sm-12",children:[Object(M.jsxs)("div",{className:"col-sm-12",children:[Object(M.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Contenu:"}),Object(M.jsx)("p",{children:this.state.newMessage.message})]}),Object(M.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(M.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Date :"}),Object(M.jsx)("p",{children:this.formatDate(this.state.newMessage.created_at)})]}),this.state.newMessage.zone?Object(M.jsxs)("div",{className:"col-sm-6",children:[Object(M.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Zone:"}),Object(M.jsx)("p",{children:null===(e=this.state.newMessage.zone)||void 0===e?void 0:e.name})]}):Object(M.jsxs)("div",{className:"col-sm-6",children:[Object(M.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Utilisateur:"}),Object(M.jsxs)("p",{children:[this.formatUser(this.state.newMessage.user_id)," "]})]})]}),Object(M.jsx)(x.a,{})]})});return Object(M.jsxs)("div",{className:"content",children:[Object(M.jsxs)("div",{className:"row",children:[Object(M.jsx)("div",{className:"col-md-6",children:Object(M.jsx)(C.a,{theme:this.getMuiTheme(),children:Object(M.jsx)(S.a,{title:"Liste des Messages de vos zones",data:a,columns:[{name:"user_id",label:"Utilisateur",options:{filter:!0,sort:!0}},{name:"objet",label:"Objet",options:{filter:!0,sort:!0}},{name:"date",label:"Date",options:{filter:!0,sort:!0}},{name:"zone",label:"Zone",options:{filter:!0,sort:!0}},{name:"actions",label:"Actions",options:{filter:!0,sort:!0}}],options:n})})}),Object(M.jsx)("div",{className:"col-md-6",children:Object(M.jsx)(C.a,{theme:this.getMuiTheme(),children:Object(M.jsx)(S.a,{title:"Liste des Messages des organisations",data:s,columns:[{name:"user_id",label:"Utilisateur",options:{filter:!0,sort:!0}},{name:"objet",label:"Objet",options:{filter:!0,sort:!0}},{name:"date",label:"Date",options:{filter:!0,sort:!0}},{name:"actions",label:"Actions",options:{filter:!0,sort:!0}}],options:n})})})]}),o,r]})}}]),n}(p.Component)}).call(this,s(45))},650:function(e,t,s){"use strict";(function(e){var a=s(10),n=s.n(a),o=s(20),r=s(21),i=s(22),c=s(24),l=s(23),d=s(1),u=s(142),p=s.n(u),h=s(64),m=s(102),j=(s(389),s(12)),b=s.n(j),g=s(206),f=s.n(g),x=s(43),O=s(130),v=s(40),w=s(37),y=s(36),N=s(39),S=s(52),_=s(13),C=s(9),M=s(73),I=s(32),k=(s(136),s(213)),z=s(214),P=s(211),E=s(215),R=s(326),D=s(51),T=s.n(D),A=s(8),B=s.n(A),F=s(154),U=s(0);delete T.a.Icon.Default.prototype._getIconUrl,T.a.Icon.Default.mergeOptions({iconRetinaUrl:s(543),iconUrl:s(1044),shadowUrl:s(544)});T.a.Icon.Default.mergeOptions({iconUrl:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});var q=function(t){Object(c.a)(a,t);var s=Object(l.a)(a);function a(t){var i;return Object(r.a)(this,a),(i=s.call(this,t)).componentDidMount=function(){if(console.log("userType",i.state.userType),"elu"!=i.state.userType)return Object(U.jsx)(O.a,{});i._getRapports(),i._getIncidentsResolved(),i._getIncidentsNotResolved(),i.getIncidentsByMonth(),i.getIncidentsByWeek(),i.getIndicateur(),i.getZones()},i.renderShowIncident=function(){var t=e.config.url.slice(0,-1),s=i.state.incident.photo,a=t+"".concat(s),n=i.state.incident.audio,o=t+"".concat(n),r=i.state.incident.video,c=t+"".concat(r),l=function(){return Object(U.jsx)("div",{className:"loader",children:Object(U.jsx)("h2",{children:"Loading video..."})})},d=i.state.incident.lattitude,u=i.state.incident.longitude,p=[d,u];return Object(U.jsx)("div",{className:"modal fade",children:Object(U.jsxs)(v.a,{show:i.state.showIncidentModal,onHide:i.handleShowIncidentModal,children:[Object(U.jsx)(w.a,{closeButton:!0,className:"map-color fs-20 t-center",children:"Details Incident"}),Object(U.jsxs)(y.a,{className:"col-sm-12",children:[Object(U.jsxs)("div",{className:"col-sm-6 pb-3",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Titre:"}),Object(U.jsx)("p",{children:i.state.incident.title})]}),Object(U.jsxs)("div",{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Zone:"}),Object(U.jsx)("p",{children:i.state.incident.zone})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("div",{className:"col-sm-12 pb-3",children:null!==d&&null!==u?Object(U.jsxs)(k.a,{center:p,zoom:13,children:[Object(U.jsx)(z.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),Object(U.jsxs)(P.a,{position:p,children:[Object(U.jsx)(E.a,{children:i.state.incident.title}),Object(U.jsx)(R.a,{center:p,radius:500,color:"red"})]})]}):Object(U.jsx)("p",{className:"danger",children:"Coordonnees non renseignees"})}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Description:"}),Object(U.jsx)("p",{children:i.state.incident.description})]}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsx)("label",{className:"map-color fs-18",children:"Image:"}),Object(U.jsx)("img",{src:a,alt:""})," "]}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsx)("label",{htmlFor:"code",className:"map-color fs-18",children:"Video:"}),Object(U.jsxs)("div",{className:"video",children:[Object(U.jsx)(F.Player,{fluid:!1,width:537,height:400,children:Object(U.jsx)("source",{src:c})}),i.state.videoIsLoading?Object(U.jsx)(l,{}):null]})]}),Object(U.jsxs)("div",{className:"col-sm-12 pb-3",children:[Object(U.jsxs)("label",{htmlFor:"code",className:"map-color fs-18",children:["Audio:"," "]}),Object(U.jsx)("br",{}),Object(U.jsxs)("audio",{controls:!0,src:o,children:["Your browser does not support the",Object(U.jsx)("code",{children:"audio"})," element."]})]})]}),Object(U.jsx)(N.a,{})]})})},i.getIncidents=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,a=e.config.url+"api/incidentbyzone/"+s+"/",t.prev=2,t.next=5,b.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:o=t.sent,i.setState({data:o.data,count_incidents:o.data.length}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),i.getZones=Object(o.a)(n.a.mark((function t(){var s,a,o,r,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/zone/",t.prev=1,t.next=4,b.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:return a=t.sent,console.log("zones=>",a.data),o=a.data.results,r=i.state.user,c=[],t.next=11,o.forEach((function(e){r.zones.forEach((function(t){e.id===t&&(console.log("in get elus=>",t),t=e,c.push(e))}))}));case 11:return r.zones=c,i.setState({zones:o,user:r}),t.next=15,i.getIncidentsByZone();case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[1,17]])}))),i.onShowIncident=function(e){i.setState({inProgress:!1,showIncidentModal:!i.state.showIncidentModal});var t=i.getIncidentById(e);console.log(t),t&&(console.log("element \xe0 afficher ",t),i.state.incident=t)},i.handleShowIncidentModal=function(){i.setState({inProgress:!1,showIncidentModal:!i.state.showIncidentModal})},i.getIncidentsByZone=Object(o.a)(n.a.mark((function t(){var s,a,o,r,c,l,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],t.prev=1,a=0;case 3:if(!(a<i.state.user.zones.length)){t.next=13;break}return o=i.state.user.zones[a],r=e.config.url+"api/incidentbyzone/"+o.name+"/",t.next=8,b.a.get(r,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 8:for(c=t.sent,l=0;l<c.data.length;l++)d=c.data[l],s.push(d);case 10:a++,t.next=3;break;case 13:i.setState({data:s,count_incidents:s.length}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.log(t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[1,16]])}))),i.getIncidentsByWeek=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,a=e.config.url+"api/incidentbyweekbyzone/"+s+"/",t.prev=2,t.next=5,b.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:o=t.sent,i.setState({incidentsByWeek:o.data.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),i.getIncidentsByMonth=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,a=e.config.url+"api/incidentbymonthbyzone/"+s+"/",t.prev=2,t.next=5,b.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:o=t.sent,i.setState({incidentsByMonth:o.data.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),i._getIncidentsResolved=Object(o.a)(n.a.mark((function t(){var s,a,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,console.log(s),a=e.config.url+"api/incidentresolved/",t.prev=3,t.next=6,b.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 6:o=t.sent,i.setState({resolus:o.data.results}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[3,10]])}))),i.getIndicateur=Object(o.a)(n.a.mark((function t(){var s,a,o,r,c,l,d;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.zone,a=e.config.url+"api/indicateurincidentbyzone/"+s,t.prev=2,t.next=5,b.a.get(a,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:o=t.sent,console.log("indicateur",o.data.data),r=o.data.data,c=[],l=[],r.forEach((function(e){e.number>0&&"null"!=e.indicateur&&(c.push(e.indicateur+"("+e.number+")"),l.push(e.number))})),d={labels:c,series:l},i.setState({indicateurs:d}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[2,15]])}))),i._getIncidentsNotResolved=Object(o.a)(n.a.mark((function t(){var s,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sessionStorage.zone,s=e.config.url+"api/incidentnotresolved/",t.prev=2,t.next=5,b.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 5:a=t.sent,i.setState({enCours:a.data.results}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),i.addReport=function(t){t.preventDefault(),i.setState({inProgress:!i.state.inProgress});var s={details:i.state.newReport.details,zone:sessionStorage.zone,user_id:sessionStorage.user_id,incident:i.state.newReport.incident_id,date_livraison:i.state.newReport.date_livraison},a=e.config.url+"api/rapport/";console.log(s),b.a.post(a,s,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),B()("Succes","Rapport commande avec succes","success"),i.setState({inProgress:!i.state.inProgress,showRapportModal:!1,showIncidentModal:!1})})).catch((function(e){i.setState({inProgress:!i.state.inProgress}),e.response?(B()(e.response.status,e.response.data,e),console.log(e.response.status),console.log(e.response.data)):e.request?console.log(e.request.data):console.log(e.message)}))},i.onRequestRapport=function(e){i.setState({inProgress:!1,showRapportModal:!i.state.showRapportModal}),e&&(console.log("Rapport pour ",e),i.state.newReport.incident_id=e)},i.handleModalClose=function(){i.setState({showRapportModal:!i.state.showRapportModal})},i._getRapports=Object(o.a)(n.a.mark((function t(){var s,a,o,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=sessionStorage.user_id,a=e.config.url+"api/rapportbyuser/"+s+"/",t.prev=2,t.next=5,b.a.get(a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(sessionStorage.token)}});case 5:o=t.sent,r=o.data,i.setState({count_reports:r.length}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),i.state={count_incidents:"",count_reports:"",resolus:[],enCours:[],indicateurs:[],incident:[],data:[],incidentsByMonth:[],incidentsByWeek:[],incidentsByMonthNR:"",showRapportModal:!1,showIncidentModal:!1,inProgress:!1,newIncident:{title:"",zone:"",description:"",photo:"",video:"",audio:"",lattitude:"",longitude:"",user_id:""},newReport:{details:"",zone:"",incident_id:"",date_livraison:""},userType:sessionStorage.getItem("user_type"),list_zones:[],user:JSON.parse(sessionStorage.user),zones:[]},i}return Object(i.a)(a,[{key:"getIncidentById",value:function(e){for(var t="",s=0;s<this.state.data.length;s++){var a=this.state.data[s];a.id===e&&(t=a)}return t}},{key:"createLegend",value:function(e){for(var t=[],s=0;s<e.names.length;s++){var a="fa fa-circle text-"+e.types[s];t.push(Object(U.jsx)("i",{className:a},s)),t.push(" "),t.push(e.names[s])}return t}},{key:"render",value:function(){var t=this,s={labels:[],series:[[]]},a=new Date;1===a.getDay()&&(s.labels=["Lundi"]),2===a.getDay()&&(s.labels=["Lundi","Mardi"]),3===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi"]),4===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi"]),5===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi","Vendredi"]),6===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]),7===a.getDay()&&(s.labels=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"]);var n=new Array;n[0]="Jan",n[1]="Feb",n[2]="Mar",n[3]="Apr",n[4]="May",n[5]="Jun",n[6]="Jul",n[7]="Aug",n[8]="Sep",n[9]="Oct",n[10]="Nov",n[11]="Dec";var o={labels:[],series:[]},r=[],i=[],c=[];this.state.incidentsByMonth.map((function(e,t){var s=new Date(e.month),a=n[s.getMonth()];o.labels.push(a),r.push(e.total),i.push(e.resolved),c.push(e.unresolved)})),o.series.push(r,i,c);var l=[];if(this.state.incidentsByWeek.length)this.state.incidentsByWeek.map((function(e,t){for(var n=new Date(e.day).getDay(),o=0;o<a.getDay();o++)o===n?s.series[0][n]=e.total:s.series[0][o]=0;l.push(e.total)}));else for(var d=0;d<a.getDay();d++)s.series[0][d]=0;var u=[];this.state.data.map((function(t,s){if(null!==t.lattitude&&null!==t.longitude&&!isNaN(t.longitude)&&!isNaN(t.lattitude)){var a={id:t.id,lat:t.lattitude,lon:t.longitude,tooltip:t.title,desc:t.description,img:e.config.url.slice(0,-1)+t.photo,etat:t.etat};u.push(a)}}));var j=[];u.map((function(e,t){null!==e&&j.push(e.lat,e.lon)}));var b=f.a.renderToString(Object(U.jsx)("i",{class:"fas fa-map-marker-alt fa-2x text-primary "})),g=new T.a.DivIcon({html:b}),O=f.a.renderToString(Object(U.jsx)("i",{class:"fas fa-map-marker-alt fa-2x text-danger "})),R=new T.a.DivIcon({html:O}),D=Object(U.jsxs)(k.a,{center:[14.716677,-17.467686],zoom:10,children:[Object(U.jsx)(z.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),u.map((function(e,s){return Object(U.jsx)(P.a,{className:"icon-marker",position:[e.lat,e.lon],icon:"resolved"==e.etat?g:R,children:Object(U.jsx)(E.a,{children:Object(U.jsx)("span",{className:"icon-marker-tooltip",children:Object(U.jsxs)("ul",{children:[Object(U.jsxs)("div",{className:"row",children:[Object(U.jsxs)("div",{className:"col-md-6",children:[Object(U.jsxs)("li",{children:[Object(U.jsx)("strong",{children:"Titre:"})," ",e.tooltip]}),Object(U.jsxs)("li",{children:[Object(U.jsx)("strong",{children:"Description:"})," ",e.desc]})]}),Object(U.jsx)("div",{className:"col-md-6",children:Object(U.jsx)("img",{src:e.img,alt:""})})]}),Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col-md-2",children:Object(U.jsx)("button",{className:"boutton  button--round-l ",onClick:function(s){return t.onShowIncident(e.id)},children:Object(U.jsx)("i",{className:"fa fa-eye","aria-hidden":"true"})})}),Object(U.jsx)("div",{className:"col-md-10",children:Object(U.jsxs)("button",{className:"boutton  button--round-l",onClick:function(s){return t.onRequestRapport(e.id)},children:[Object(U.jsx)("i",{className:"fa fa-file","aria-hidden":"true"})," ","Commander un rapport"]})})]})]})})})},"marker-".concat(s))}))]}),A=[],B=[];this.state.resolus.map((function(e,t){e.zone===sessionStorage.zone&&A.push(e)})),this.state.enCours.map((function(e,t){e.zone===sessionStorage.zone&&B.push(e)}));var F=Object(U.jsxs)(v.a,{show:this.state.showRapportModal,onHide:this.handleModalClose,children:[Object(U.jsx)(w.a,{closeButton:!0,children:"Commande de rapport"}),Object(U.jsxs)(S.a,{children:[Object(U.jsxs)(y.a,{className:"col-sm-12",children:[Object(U.jsxs)(_.a,{className:"col-sm-12",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Details:"}),Object(U.jsx)("textarea",{className:"form-control",type:"text",id:"prenom",name:"details",placeholder:"Les details du rapport",value:this.state.newReport.details,onChange:function(e){var s=t.state.newReport;s.details=e.target.value,t.setState({newReport:s},console.log(t.state))}})]}),Object(U.jsxs)(_.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"from",children:"Zone:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"nom",name:"zone",value:sessionStorage.zone,onChange:function(e){var s=t.state.newReport;s.zone=e.target.value,t.setState({newReport:s},console.log(t.state))},disabled:!0})]}),Object(U.jsxs)(_.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"email",children:"Incident Concerne:"}),Object(U.jsx)("input",{className:"form-control",type:"text",id:"incident",name:"incident",value:this.state.newReport.incident_id,onChange:function(e){var s=t.state.newReport;s.incident_id=e.target.value,t.setState({newReport:s},console.log(t.state))},disabled:!0})]}),Object(U.jsxs)(_.a,{className:"col-sm-6",children:[Object(U.jsx)("label",{htmlFor:"phone",children:"Date souhaite de Livraison:"}),Object(U.jsx)("input",{className:"form-control",type:"date",id:"phone",name:"date_livraison",value:this.state.newReport.date_livraison,onChange:function(e){var s=t.state.newReport;s.date_livraison=e.target.value,t.setState({newReport:s},console.log(t.state))}})]})]}),Object(U.jsxs)(N.a,{children:[this.state.inProgress?Object(U.jsxs)(C.a,{className:"btn btn-primary",children:["Loading...",Object(U.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(U.jsx)(C.a,{className:"btn btn-primary",onClick:this.addReport,children:"Ajouter"})," ",Object(U.jsx)(C.a,{className:"btn btn-danger",onClick:this.handleModalClose,children:"Annuler"})]})]})]});return Object(U.jsxs)("div",{className:"content",children:[Object(U.jsxs)(M.a,{children:[Object(U.jsx)(I.a,{lg:4,sm:6,children:Object(U.jsx)(m.a,{bigIcon:Object(U.jsx)("i",{className:"pe-7s-graph1 text-danger"}),statsText:Object(U.jsx)("h3",{className:"elu-dashboard-count-title",children:" Incidents "}),statsValue:Object(U.jsxs)("div",{className:"elu-dashboard-counter",children:[" ",this.state.count_incidents]})})}),Object(U.jsx)(I.a,{lg:4,sm:6,children:Object(U.jsx)("div",{className:"card card-stats",children:Object(U.jsxs)("div",{className:"content",children:[Object(U.jsxs)(M.a,{children:[Object(U.jsx)(I.a,{xs:3,children:Object(U.jsx)("div",{className:"icon-big text-center icon-warning",children:Object(U.jsx)("i",{className:"pe-7s-server text-warning"})})}),Object(U.jsx)(I.a,{xs:9,children:Object(U.jsxs)("div",{className:"numbers",children:[Object(U.jsx)("h3",{className:"elu-dashboard-count-title",children:"Etat des incidents"}),Object(U.jsxs)("div",{className:"text-card-details-container",children:[Object(U.jsxs)("div",{className:"text-card-details",children:[Object(U.jsx)("span",{className:"text-card-number-infos",children:B.length}),"\xa0",Object(U.jsx)("span",{className:"text-card-number-label",children:"r\xe9solu(s)"})]}),Object(U.jsxs)("div",{className:"text-card-details",children:[Object(U.jsx)("span",{className:"text-card-number-infos",children:A.length}),"\xa0",Object(U.jsx)("span",{className:"text-card-number-label",children:"en cours"})]})]})]})})]}),Object(U.jsxs)("div",{className:"footer",children:[Object(U.jsx)("hr",{}),Object(U.jsx)("div",{className:"stats"})]})]})})}),Object(U.jsx)(I.a,{lg:4,sm:6,children:Object(U.jsx)(m.a,{bigIcon:Object(U.jsx)("i",{className:"pe-7s-wallet text-success"}),statsText:Object(U.jsxs)("h3",{className:"elu-dashboard-count-title",children:[" ","Rapports Commandes"," "]}),statsValue:Object(U.jsxs)("div",{className:"elu-dashboard-counter",children:[" ",this.state.count_reports," "]})})})]}),Object(U.jsx)("br",{}),Object(U.jsxs)(M.a,{children:[Object(U.jsx)(I.a,{md:5,children:Object(U.jsx)(h.a,{id:"chartActivity",title:"Incidents",category:"Les incidents selon leur \xe9tat",stats:"Etat des incidents",statsIcon:"fa fa-check",content:Object(U.jsx)("div",{className:"ct-chart",children:Object(U.jsx)(p.a,{data:o,type:"Bar",options:x.optionsBar,responsiveOptions:x.responsiveBar})}),legend:Object(U.jsx)("div",{className:"legend",children:this.createLegend(x.legendBar)})})}),Object(U.jsx)(I.a,{md:7,children:Object(U.jsx)(h.a,{id:"chartActivity",title:"Indicateurs",category:"Nombre incidents par indicateur",statsIcon:"fa fa-check",stats:"Indicateurs",content:Object(U.jsx)("div",{className:"ct-chart",children:Object(U.jsx)(p.a,{data:this.state.indicateurs,type:"Pie",options:x.optionsCircle,responsiveOptions:x.responsiveOptionsCircle})}),legend:Object(U.jsx)("div",{className:"legend",children:" "})})})]}),Object(U.jsx)("br",{}),Object(U.jsx)(M.a,{children:Object(U.jsx)(I.a,{md:12,children:Object(U.jsx)(h.a,{id:"chartActivity",title:"Bilan Hebdomadaire",category:"Nombres d'incidents de la semaine",stats:"Incidents par jour",statsIcon:"fa fa-check",content:Object(U.jsx)("div",{className:"ct-chart",children:Object(U.jsx)(p.a,{data:s,type:"Line",options:x.optionsSales,responsiveOptions:x.responsiveSales})}),legend:Object(U.jsx)("div",{className:"legend",children:this.createLegend(x.legendSales)})})})}),Object(U.jsx)(M.a,{children:Object(U.jsx)(I.a,{lg:12,sm:12,children:Object(U.jsx)(h.a,{id:"map",title:"Carte des Incidents dans votre zone",category:"Tous les incidents",content:Object(U.jsx)("div",{className:"map",children:D})})})}),F,this.renderShowIncident()]})}}]),a}(d.Component);t.a=q}).call(this,s(45))},651:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return N}));var a=s(17),n=s(21),o=s(22),r=s(44),i=s(24),c=s(23),l=s(1),d=s(40),u=s(37),p=s(52),h=s(36),m=s(39),j=s(9),b=s(12),g=s.n(b),f=(s(136),s(140)),x=s(153),O=s(8),v=s.n(O),w=s(0),y={backgroundImage:"url(".concat(f.a,")"),backgroundSize:"cover"},N=function(t){Object(i.a)(l,t);var s=Object(c.a)(l);function l(t){var a;return Object(n.a)(this,l),(a=s.call(this,t)).handleShowPwdModal=function(){a.setState((function(e){return{showPwdModal:!e.showPwdModal}}))},a.handleModalOpen=function(e){e.preventDefault(),a.setState({changepwd:!0})},a.handleShowPwdModal=function(e){e.preventDefault(),a.setState({changepwd:!1})},a.handleChangePassword=function(t){if(t.preventDefault(),a.setState({inProgress:!a.state.inProgress}),a.state.confirm_pwd!==a.state.new_password)v()("erreur","les 2 mots de pass doivent etre identiques","error");else{var s={old_password:a.state.old_password,new_password:a.state.new_password},n=e.config.url+"api/changepassword/";console.log(s),console.log(sessionStorage.token),g.a.put(n,s,{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),v()("Succes"," Mot de passe modifi\xe9 avec succ\xe8s","success"),a.setState({inProgress:!1,changepwd:!1}),a.setState({old_password:"",new_password:"",confirm_pwd:""}),a.props.history.push("/elu/dashboard")})).catch((function(e){a.setState({inProgress:!1}),a.setState({changepwd:!1}),a.setState({old_password:"",new_password:""}),e.response?(console.log(e.response.status),e.response.data.old_password?v()("Erreur",e.response.data.old_password[0],"error"):v()("Erreur","Veuillez reessayer","error")):e.request?(console.log(e.request.data),v()("erreur","Veuillez reessayer","error")):(v()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}},a.state={email:"",password:"",emailpwd:"",isValidForm:"",email_empty:!1,password_empty:!1,isPending:!1,isRequestError:!1,errors:{},inProgress:!1,showPwdModal:!1,changepwd:!1,url_reset:e.config.url+"api/request-password-reset/",show_reset:"/request-password"},a.onChange=a.onChange.bind(Object(r.a)(a)),a.onSubmit=a.onSubmit.bind(Object(r.a)(a)),a.onSend=a.onSend.bind(Object(r.a)(a)),a}return Object(o.a)(l,[{key:"onChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"validateLoginForm",value:function(){var e=!0,t={};return this.state.email||(this.setState({isPending:!1}),e=!1,this.state.email_empty=!0,this.handleShowAndHideAlert("email"),t.email="Le champ email est obligatoire"),this.setState({errors:t}),e}},{key:"handleShowAndHideAlert",value:function(e){var t=this;setTimeout((function(){"credential_error"==e&&t.setState({isValidUser:!0}),"email"==e&&t.setState({email_empty:!1}),"password"==e&&t.setState({password_empty:!1}),"requestError"==e&&t.setState({isRequestError:!1})}),5e3)}},{key:"onSubmit",value:function(t){var s=this;t.preventDefault(),this.validateLoginForm()&&this.setState({isPending:!1,inProgress:!0});var a=new FormData;a.append("email",this.state.email),g.a.post(e.config.url+"api/request-password-reset/",a,{headers:{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}}}).then((function(e){s.setState({isPending:!0,inProgress:!1}),console.log(e.data),"success"==e.data.status&&v()("Succes"," Veillez utiliser le code envoyer par email pour r\xe9initialiser votre mot de pas .","success"),window.location="/request-password-view"})).catch((function(e){s.setState({isPending:!0,inProgress:!1}),v()("Erreur","Email incorrect! Veuillez reessayer","error"),console.log(e)}))}},{key:"onSend",value:function(t){var s=this;t.preventDefault(),this.setState({inProgress:!0});var a=this.state.emailpwd;a&&g.a.post(e.config.url+"api/password_reset/",a,{headers:{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}}}).then((function(e){s.setState({inProgress:!1}),console.log(e)})).catch((function(e){s.setState({isPending:!0,inProgress:!1})}))}},{key:"render",value:function(){var e=this,t=Object(w.jsxs)(d.a,{show:this.state.changepwd,onHide:this.handleShowPwdModal,children:[Object(w.jsx)(u.a,{closeButton:!0,children:"Veuillez changer votre mot de passe avant de continuer"}),Object(w.jsxs)(p.a,{encType:"multipart/form-data",children:[Object(w.jsxs)(h.a,{className:"col-sm-12",children:[Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"form-group col-md-8",children:[Object(w.jsx)("label",{children:"Mot de passe"}),Object(w.jsx)("input",{type:"password",name:"old_password",className:"form-control",placeholder:"Password",value:this.state.old_password,onChange:function(t){e.setState({old_password:t.target.value})}})]})}),Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"form-group col-md-8",children:[Object(w.jsx)("label",{children:"Nouveau Mot de passe"}),Object(w.jsx)("input",{type:"password",name:"new_password",className:"form-control",placeholder:"New password",value:this.state.new_password,onChange:function(t){e.setState({new_password:t.target.value})}})]})}),Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"form-group col-md-8",children:[Object(w.jsx)("label",{children:"Confirmation Mot de passe"}),Object(w.jsx)("input",{type:"password",name:"confirm_password",className:"form-control",placeholder:"Confirm password",value:this.state.confirm_pwd,onChange:function(t){e.setState({confirm_pwd:t.target.value})}})]})})]}),Object(w.jsxs)(m.a,{children:[this.state.inProgress?Object(w.jsxs)(j.a,{className:"btn btn-primary",children:["Loading...",Object(w.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(w.jsx)(j.a,{className:"btn btn-primary",onClick:this.handleChangePassword,children:"Modifier"})," ",Object(w.jsx)(j.a,{className:"btn btn-danger",onClick:this.handleShowPwdModal,children:"Annuler"})]})]})]});return Object(w.jsxs)("div",{className:"auth-wrapper",style:y,children:[t,Object(w.jsx)("div",{className:"modal fade",children:Object(w.jsxs)(d.a,{show:this.state.showPwdModal,onHide:this.handleShowPwdModal,children:[Object(w.jsx)(u.a,{closeButton:!0,className:"map-color t-center",children:Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col-md-7",children:"Mot de Passe oubli\xe9"})})}),Object(w.jsx)(h.a,{className:"col-sm-12",children:Object(w.jsxs)("form",{noValidate:!0,onSubmit:function(t){return e.onSend(t)},className:"map-color",children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"email",children:" Adresse Email"}),Object(w.jsx)("input",{type:"email",className:"form-control",name:"emailpwd",placeholder:"Entrez votre email",value:this.state.emailpwd,onChange:this.onChange})]}),this.state.inProgress?Object(w.jsxs)(j.a,{className:"btn",children:["Loading...",Object(w.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(w.jsx)("button",{className:"btn button--round-l button--text-thick ",children:"Envoyer"})]})}),Object(w.jsx)(m.a,{})]})}),Object(w.jsx)("div",{className:"auth-inner",children:Object(w.jsxs)("form",{noValidate:!0,onSubmit:function(t){return e.onSubmit(t)},className:"map-color",children:[Object(w.jsx)("h3",{children:Object(w.jsx)("img",{className:"logo-front",src:x.a})}),this.state.succes?this.state.message.map((function(e,t){return Object(w.jsx)("div",{className:"alert alert-danger",children:e},t)})):null,Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"email",children:" Adresse Email"}),Object(w.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Entrez votre email",value:this.state.email,onChange:this.onChange})]}),this.state.email_empty&&Object(w.jsx)("div",{className:"errorMsg",children:this.state.errors.email}),this.state.email_empty&&Object(w.jsx)("div",{className:"errorMsg",children:this.state.errors.password}),this.state.inProgress?Object(w.jsxs)(j.a,{className:"button  button--round-l button--text-thick button--text-upper",children:["Loading...",Object(w.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(w.jsx)("button",{className:"button  button--round-l button--text-thick button--text-upper",children:"Envoyer"}),Object(w.jsx)("a",{href:"/",children:"Se connecter"})]})})]})}}]),l}(l.Component)}).call(this,s(45))},652:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return N}));var a=s(17),n=s(21),o=s(22),r=s(44),i=s(24),c=s(23),l=s(1),d=s(40),u=s(37),p=s(52),h=s(36),m=s(39),j=s(9),b=s(12),g=s.n(b),f=(s(136),s(140)),x=s(153),O=s(8),v=s.n(O),w=s(0),y={backgroundImage:"url(".concat(f.a,")"),backgroundSize:"cover"},N=function(t){Object(i.a)(l,t);var s=Object(c.a)(l);function l(t){var a;return Object(n.a)(this,l),(a=s.call(this,t)).handleShowPwdModal=function(){a.setState((function(e){return{showPwdModal:!e.showPwdModal}}))},a.handleModalOpen=function(e){e.preventDefault(),a.setState({changepwd:!0})},a.handleShowPwdModal=function(e){e.preventDefault(),a.setState({changepwd:!1})},a.handleChangePassword=function(t){if(t.preventDefault(),a.setState({inProgress:!a.state.inProgress}),a.state.confirm_pwd!==a.state.new_password)v()("erreur","les 2 mots de pass doivent etre identiques","error");else{var s={old_password:a.state.old_password,new_password:a.state.new_password},n=e.config.url+"api/changepassword/";console.log(s),console.log(sessionStorage.token),g.a.put(n,s,{headers:{Authorization:"Bearer ".concat(sessionStorage.token)}}).then((function(e){console.log(e),v()("Succes"," Mot de passe modifi\xe9 avec succ\xe8s","success"),a.setState({inProgress:!1,changepwd:!1}),a.setState({old_password:"",new_password:"",confirm_pwd:""}),a.props.history.push("/elu/dashboard")})).catch((function(e){a.setState({inProgress:!1}),a.setState({changepwd:!1}),a.setState({old_password:"",new_password:""}),e.response?(console.log(e.response.status),e.response.data.old_password?v()("Erreur",e.response.data.old_password[0],"error"):v()("Erreur","Veuillez reessayer","error")):e.request?(console.log(e.request.data),v()("erreur","Veuillez reessayer","error")):(v()("erreur","Veuillez reessayer","error"),console.log(e.message))}))}},a.state={email:"",code:"",password_confirm:"",password:"",emailpwd:"",isValidForm:"",email_empty:!1,code_empty:!1,password_empty:!1,password_confirm_empty:!1,isPending:!1,isRequestError:!1,errors:{},inProgress:!1,showPwdModal:!1,changepwd:!1,url_reset:e.config.url+"api/request-password-reset/",show_reset:"/request-password"},a.onChange=a.onChange.bind(Object(r.a)(a)),a.onSubmit=a.onSubmit.bind(Object(r.a)(a)),a.onSend=a.onSend.bind(Object(r.a)(a)),a}return Object(o.a)(l,[{key:"onChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"validateLoginForm",value:function(){var e=this.state.email,t=this.state.code,s=this.state.password,a=this.state.password_confirm,n=!0,o={};return t||(this.setState({isPending:!1}),n=!1,this.state.code_empty=!0,this.handleShowAndHideAlert("code"),o.code="Le code est obligatoire"),e||(this.setState({isPending:!1}),n=!1,this.state.email_empty=!0,this.handleShowAndHideAlert("email"),o.email="Le champ email est obligatoire"),s||(this.setState({isPending:!1}),n=!1,this.state.password_empty=!0,this.handleShowAndHideAlert("password"),o.password="Le champ mot de passe est obligatoire"),a||(this.setState({isPending:!1}),n=!1,this.state.password_confirm_empty=!0,this.handleShowAndHideAlert("passwordConfirm"),o.passwordConfirm="Le champ confirmer mot de passe est obligatoire"),this.setState({errors:o}),n}},{key:"handleShowAndHideAlert",value:function(e){var t=this;setTimeout((function(){"credential_error"==e&&t.setState({isValidUser:!0}),"email"==e&&t.setState({email_empty:!1}),"code"==e&&t.setState({code_empty:!1}),"password"==e&&t.setState({password_empty:!1}),"passwordConfirm"==e&&t.setState({password_confirm_empty:!1}),"requestError"==e&&t.setState({isRequestError:!1})}),5e3)}},{key:"onSubmit",value:function(t){var s=this;t.preventDefault(),this.validateLoginForm()&&this.setState({isPending:!1,inProgress:!0});var a=new FormData;a.append("code",this.state.code),a.append("email",this.state.email),a.append("new_password",this.state.password),a.append("new_password_confirm",this.state.password_confirm),console.log(a),g.a.post(e.config.url+"api/reset-password/",a,{headers:{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}}}).then((function(e){s.setState({isPending:!0,inProgress:!1}),console.log(e),"success"==e.data.status&&v()("Succ\xe8s"," Mot de passe r\xe9initialis\xe9 succ\xe8s .","success"),window.location="/"})).catch((function(e){s.setState({isPending:!0,inProgress:!1}),v()("Erreur","Erreur lors de la r\xe9initialisation ! Veuillez reessayer","error"),console.log(e)}))}},{key:"onSend",value:function(t){var s=this;t.preventDefault(),this.setState({inProgress:!0});var a=this.state.emailpwd;a&&g.a.post(e.config.url+"api/password_reset/",a,{headers:{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"}}}).then((function(e){s.setState({inProgress:!1}),console.log(e)})).catch((function(e){s.setState({isPending:!0,inProgress:!1})}))}},{key:"render",value:function(){var e=this,t=Object(w.jsxs)(d.a,{show:this.state.changepwd,onHide:this.handleShowPwdModal,children:[Object(w.jsx)(u.a,{closeButton:!0,children:"Veuillez changer votre mot de passe avant de continuer"}),Object(w.jsxs)(p.a,{encType:"multipart/form-data",children:[Object(w.jsxs)(h.a,{className:"col-sm-12",children:[Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"form-group col-md-8",children:[Object(w.jsx)("label",{children:"Mot de passe"}),Object(w.jsx)("input",{type:"password",name:"old_password",className:"form-control",placeholder:"Password",value:this.state.old_password,onChange:function(t){e.setState({old_password:t.target.value})}})]})}),Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"form-group col-md-8",children:[Object(w.jsx)("label",{children:"Nouveau Mot de passe"}),Object(w.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"New password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}})]})}),Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"form-group col-md-8",children:[Object(w.jsx)("label",{children:"Confirmation Mot de passe"}),Object(w.jsx)("input",{type:"password",name:"confirm_password",className:"form-control",placeholder:"Confirm password",value:this.state.confirm_pwd,onChange:function(t){e.setState({confirm_pwd:t.target.value})}})]})})]}),Object(w.jsxs)(m.a,{children:[this.state.inProgress?Object(w.jsxs)(j.a,{className:"btn btn-primary",children:["Loading...",Object(w.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(w.jsx)(j.a,{className:"btn btn-primary",onClick:this.handleChangePassword,children:"Modifier"})," ",Object(w.jsx)(j.a,{className:"btn btn-danger",onClick:this.handleShowPwdModal,children:"Annuler"})]})]})]});return Object(w.jsxs)("div",{className:"auth-wrapper",style:y,children:[t,Object(w.jsx)("div",{className:"modal fade",children:Object(w.jsxs)(d.a,{show:this.state.showPwdModal,onHide:this.handleShowPwdModal,children:[Object(w.jsx)(u.a,{closeButton:!0,className:"map-color t-center",children:Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col-md-7",children:"Mot de Passe oubli\xe9"})})}),Object(w.jsx)(h.a,{className:"col-sm-12",children:Object(w.jsxs)("form",{noValidate:!0,onSubmit:function(t){return e.onSend(t)},className:"map-color",children:[Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"email",children:" Adresse Email"}),Object(w.jsx)("input",{type:"email",className:"form-control",name:"emailpwd",placeholder:"Entrez votre email",value:this.state.emailpwd,onChange:this.onChange})]}),this.state.inProgress?Object(w.jsxs)(j.a,{className:"btn",children:["Loading...",Object(w.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(w.jsx)("button",{className:"btn button--round-l button--text-thick ",children:"Envoyer"})]})}),Object(w.jsx)(m.a,{})]})}),Object(w.jsx)("div",{className:"auth-inner",children:Object(w.jsxs)("form",{noValidate:!0,onSubmit:function(t){return e.onSubmit(t)},className:"map-color",children:[Object(w.jsx)("h3",{children:Object(w.jsx)("img",{className:"logo-front",src:x.a})}),this.state.succes?this.state.message.map((function(e,t){return Object(w.jsx)("div",{className:"alert alert-danger",children:e},t)})):null,Object(w.jsx)("h5",{children:" Veillez utiliser le code re\xe7u par email pour r\xe9initialiser votre mot de passe "}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Code"}),Object(w.jsx)("input",{type:"number",className:"form-control",name:"code",placeholder:"Entrez votre code envoyer par email",value:this.state.code,onChange:this.onChange})]}),this.state.code_empty&&Object(w.jsx)("div",{className:"errorMsg",children:this.state.errors.code}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"email",children:" Adresse Email"}),Object(w.jsx)("input",{type:"email",className:"form-control",name:"email",placeholder:"Entrez votre email",value:this.state.email,onChange:this.onChange})]}),this.state.email_empty&&Object(w.jsx)("div",{className:"errorMsg",children:this.state.errors.email}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"passsword",children:" Nouveau Mot de Passe"}),Object(w.jsx)("input",{type:"password",className:"form-control",name:"password",placeholder:"Entrez votre nouveau mot de passe",value:this.state.password,onChange:this.onChange})]}),this.state.password_empty&&Object(w.jsx)("div",{className:"errorMsg",children:this.state.errors.password}),Object(w.jsxs)("div",{className:"form-group",children:[Object(w.jsx)("label",{htmlFor:"passsword",children:"Confirmer Mot de Passe"}),Object(w.jsx)("input",{type:"password",className:"form-control",name:"password_confirm",placeholder:"Confirmer votre mot de passe",value:this.state.password_confirm,onChange:this.onChange})]}),this.state.password_confirm_empty&&Object(w.jsx)("div",{className:"errorMsg",children:this.state.errors.passwordConfirm}),this.state.inProgress?Object(w.jsxs)(j.a,{className:"button  button--round-l button--text-thick button--text-upper",children:["Loading...",Object(w.jsx)("i",{className:"fa fa-spin fa-spinner","aria-hidden":"true"})]}):Object(w.jsx)("button",{className:"button  button--round-l button--text-thick button--text-upper",children:"Envoyer"}),Object(w.jsx)("a",{href:"/",children:"Se connecter"})]})})]})}}]),l}(l.Component)}).call(this,s(45))},653:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return g}));var a=s(66),n=s(10),o=s.n(n),r=s(20),i=s(21),c=s(22),l=s(24),d=s(23),u=s(1),p=s(654),h=s.n(p),m=s(12),j=s.n(m),b=s(0),g=function(t){Object(l.a)(n,t);var s=Object(d.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=s.call(this,t))._getIncidentbyId=Object(r.a)(o.a.mark((function t(){var s,n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.config.url+"api/incident/"+a.state.id,t.prev=1,t.next=4,j.a.get(s,{headers:{Authorization:"Bearer".concat(sessionStorage.token),"Content-Type":"application/json"}});case 4:n=t.sent,console.log(n.data),r=n.data,i=e.config.url.slice(0,-1)+r.photo,console.log(i),a.setState({data:r,url_photo:i}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])}))),a.state={id:a.props.match.params.id,data:[],url_photo:""},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props),console.log(this.props.match.params.id),this._getIncidentbyId()}},{key:"render",value:function(){var e={title:this.state.data.title,description:this.state.data.description,canonical:"http://example.com/path/to/page",meta:{charset:"utf-8",name:{keywords:this.state.data.title},property:{"og:title":this.state.data.title,"og:url":"`https://play.google.com/store/apps/details?id=com.volkeno.actionma`","og:image":this.state.url_photo,"og:description":this.state.data.description,"twitter:card":"summary_large_image","twitter:title":this.state.data.title,"twitter:description":this.state.data.description,"twitter:image":this.state.url_photo,"twitter:url":"`https://play.google.com/store/apps/details?id=com.volkeno.actionmap`"}}};return Object(b.jsx)(h.a,Object(a.a)({},e))}}]),n}(u.Component)}).call(this,s(45))},674:function(e,t,s){(function(t){e.exports=t.config={url:"https://backend-dashboard.map-action.com/"}}).call(this,s(45))},75:function(e,t,s){"use strict";var a=s(66),n=s(322),o=s(21),r=s(22),i=s(24),c=s(23),l=s(1),d=s(9),u=s(18),p=s.n(u),h=s(0),m=["fill","simple","pullRight","round","block"],j=function(e){Object(i.a)(s,e);var t=Object(c.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){var e=this.props,t=e.fill,s=e.simple,o=e.pullRight,r=e.round,i=e.block,c=Object(n.a)(e,m),l=p()({"btn-fill":t,"btn-simple":s,"pull-right":o,"btn-block":i,"btn-round":r});return Object(h.jsx)(d.a,Object(a.a)({className:l},c))}}]),s}(l.Component);t.a=j}},[[1049,1,2]]]);
//# sourceMappingURL=main.751c6cfc.chunk.js.map